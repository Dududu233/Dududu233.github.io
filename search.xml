<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>创新港的一年四季</title>
      <link href="/2022/11/30/2022-2023/"/>
      <url>/2022/11/30/2022-2023/</url>
      
        <content type="html"><![CDATA[<p>不读博士的话，在创新港的日子就可以掰着指头算啦。<br>行事奔流不息，切记流连。</p><h4 id="11-30-创新港2022年的初雪"><a href="#11-30-创新港2022年的初雪" class="headerlink" title="11.30 创新港2022年的初雪"></a>11.30 创新港2022年的初雪</h4><blockquote><p>应是天仙狂醉，乱把白云揉碎。</p></blockquote><div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=480751&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/fef2c20b14a5ae42ce58d2fd505598ce.jpg" alt="今日最佳！看雪还是得在朋友圈。"></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 60%;"><iframe src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/videos/5e7bab7e222a657596c19e04ea54253e.mp4" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雾霾天</title>
      <link href="/2022/11/21/smoggydays/"/>
      <url>/2022/11/21/smoggydays/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=1425401131&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow=" clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>西安最近的天气甚是烦人，自从入了秋，便时不时的来一场大雾。宽大的秦岭山脉为西安城遮风挡雨，也拦住了长安的烟火气，不得飘散。起先是只有水汽和泥土的味道，顶多再掺杂一些烧烤的油腻，暖气烧起来后，雾中就多了几分二氧化硫的味道，一时之间，空气就硬了起来。雾大的时候，常常站在泓理楼下看不见涵英楼，起先还会惊叹于雾中的丁达尔效应，再往后来，便慢慢的只剩下了对这看不到头的湿漉漉的天气的怨念。</p><p>22岁是一个很奇妙的年龄，往前走八年，我那时十四岁，正在读高中，还是不知天高地厚的猴子；往后再走八年，我那时已经三十岁，大概率已经工作成家，是为生活奔波的牛马。二十二岁，风华正茂，似乎还能过点人过的日子。八年又八年，这样一段一段的数，人生就过的很快，八年又八年，一共又能有几个八年。</p><p>总是怀念高中生活，怀念当时只要考好试就万事大吉的简单模式。很难想象，当时的我竟会为一次考试的失利失声痛哭。虽然父母从未苛求于我的成绩，也不太在乎是进步还是退步——他们很相信自己孩子的考试能力，即使退步了也会很快的追回来，我和我姐都是一等一的考试能手。与考试这一唯一主线相比，其他的经历都似乎只是锦上添花。虽然高中时其他的经历并没有那么完美的结局，但因为主线任务似乎还完成的不错，现在看来也算是人生中一段值得回味的美好时光。现在的日子与之相比，简直是过于复杂，像是各种黏黏糊糊不能观更不可控的复杂系统或者混沌系统，实在是很难给自己的表现打上一个满意的评价。可是八年前的我是怎样？终究是难以回到过去。</p><p>最近总是喜欢做一些怀旧的事，走在路上带着耳机听到take me to your heart，好像回到了在嵩阳高中操场上偷偷带着mp3听歌的日子。上周开始，我强迫自己用回了网易云音乐（<del>当然不是冲不起spotify的会员了</del>）。一年四十大洋的黑胶会员让最近本就不阔绰的手头更是发紧。说到这里要吐槽一下财务处，十月份十一月份居家办公一个半月，开工了竟然还不赶紧加班给我们发工资和奖学金。在一个夜晚偷偷的加回了之前删除了的一个好友，意外发现人家竟然没把我删了，又意料之中的发现人家似乎过的好像还不错，于是又偷偷摸摸的删掉了对方的微信以免给人家带来困扰。倒是我自己最近的学习和生活都不是很顺利，当然不仅仅是因为积极分子考试的时候连西迁精神都不会写，以至于积极分子考试不及格明年还要再来一次。越来越临近过年，研究生生活也要过半，就业像压城的乌云，让人喘不过气。投了简历没有任何回应的实习，b站和微博上时不时看到的秋招地狱笑话，一直在提示着我，已经是寒气逼人啦。再是寒气逼人，终究是要生活在现下，逃也逃不掉。</p><p>偶尔也会跟同门聊起工作后薪资的事。即使是寒气逼人的当下，也能听师兄师姐拿到总包好几十w的offer。似乎挣钱真的是小事。可是现实一点的情况是，谈论着30w offer的我们，从小到大连管理3w块钱的时候都不多。对于年薪拿到的30w到底是个什么样的购买力？我一无所知，或者说只停留在自己的想象中。这样一想，似乎只追求听上去总包很多的offer也挺没意思的。毕竟已经研究生了，不能像小孩子一样只知道比大小。八年后的我会是怎样？终究是料想不到。</p><p>晚上吃饭的时候下了一阵小雨，到了下班的时候，外边的空气已经是格外的清新了，没有恼人的水汽，也没有熟悉的二氧化硫的味道，淡淡的草香味一股一股的扑鼻而来。顿时又感觉，西安真好。</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习操作系统</title>
      <link href="/2022/11/18/os/"/>
      <url>/2022/11/18/os/</url>
      
        <content type="html"><![CDATA[<h2 id="计算机硬件结构"><a href="#计算机硬件结构" class="headerlink" title="计算机硬件结构"></a>计算机硬件结构</h2><h3 id="冯诺依曼模型"><a href="#冯诺依曼模型" class="headerlink" title="冯诺依曼模型"></a>冯诺依曼模型</h3><p>1945年，冯诺依曼等人在图灵机的基础上，提出使用电子元件构造计算机，并约定了使用二进制进行存储和计算。将计算机的基本结构定义为五个部分，运算器，控制器，存储器，输入设备和输出设备。这种计算机结构被称为冯诺依曼结构。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221118101449.png" alt="冯诺依曼结构"></p><p>运算器和控制器在cpu中，存储器就是我们常说的内存，输入设备和输出设备是计算机外接的设备。</p><h4 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h4><p>程序和数据都存放在内存中，存储的区域是线性的。在计算机中，存储数据的基本单位是字节(byte)，一个字节由8个二进制位组成。内存的地址是从0开始的，每个字节对应一个内存地址，每个内存地址对应内存中的一个字节。<br>内存中的地址从0开始编号，自增直到最后一个地址为内存的总字节数-1。</p><h4 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h4><p>cpu是计算机的核心，负责执行程序。cpu分为32位和64位。主要区别在于，一次能计算多少字节数据。32位cpu一次能计算4个字节(4x8=32个二进制位)，64位cpu一次能计算8个字节(8x8=64个二进制位)。32位和64位又称为cpu的位宽。将cpu设计成多位的，可以计算大数。32位的cpu能计算的最大数值为$2^{32}-1$，64位的cpu能计算的最大数值为$2^{64}-1$。</p><p>cpu的组件主要有，寄存器，控制单元和逻辑运算单元。控制单元负责控制cpu的工作，逻辑运算单元负责运算，寄存器分为多种种类，每种寄存器的功能不尽相同。</p><ul><li><font color = blue>通用寄存器</font>：用来储存需要进行运算的数据</li><li><font color = blue>程序计数器</font>：用来储存cpu要执行的下一条<strong>指令的内存地址</strong></li><li><font color = blue>指令寄存器</font>：用来存放现在正在执行的<strong>指令</strong></li></ul><p>此时，我们已经了解到计算机的三种存储器，寄存器，cpu cache，内存和硬盘。寄存器和cpu cache都是cpu内部的存储器，寄存器的速度比cpu cache快，但是寄存器的容量比cpu cache小。寄存器的容量一般为几十个字节，cpu cache的容量一般为几十兆字节。内存和硬盘是cpu之外的存储器，内存的访问速度比硬盘快10-1000倍。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221118110115.png" alt="计算机的存储结构"></p><h4 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h4><p>总线是计算机中连接各个部件的通道。总线的宽度决定了cpu一次能传输多少数据。总线的宽度越大，cpu一次能传输的数据就越多，cpu的性能就越好。</p><p>总线可分为三种，数据总线，地址总线和控制总线。</p><ul><li>地址总线：用于传输cpu将要操作的内存地址</li><li>数据总线：用于读写内存中的数据</li><li>控制总线：用于发送和接收信号，比如中断，设备复位等</li></ul><p>cpu在读写内存中的数据时，首先会通过地址总线指定内存的地址，然后通过控制总线控制是读还是写，最后通过数据总线来传输数据。</p><h4 id="输入输出设备"><a href="#输入输出设备" class="headerlink" title="输入输出设备"></a>输入输出设备</h4><p>输入输出设备是计算机和外界进行交互的接口。输入设备是将外界的信息输入到计算机中，输出设备是将计算机中的信息输出到外界。</p><h4 id="中断和软中断"><a href="#中断和软中断" class="headerlink" title="中断和软中断"></a>中断和软中断</h4><p>中断是cpu在执行指令时，发生了某种事件，cpu会暂停当前的指令，转而去执行中断处理程序。中断的事件有很多种，比如时钟中断，键盘中断，鼠标中断等等。中断的处理程序是由操作系统提供的。<br>操作系统在处理中断时应该尽可能快的执行完，这样可以减少对正常进程运行调度的影响。中断程序在相应中断时，可能还会临时关闭中断，这就导致，在当前的中断处理程序执行完之前，系统中的其他中断程序无法被响应，导致中断可能会丢失（一种形象的类比是由于电话占线而漏接电话），所以中断程序应该尽可能的短且快。</p><p>Linux系统为了解决中断丢失的问题，将中断过程分成了两个阶段，上半部分用来快速处理中断，主要负责处理跟硬件紧密相关或者时间敏感的事情，下半部分延迟处理上半部未完成的工作，一般以内核线程的方式进行运行。<br>上半部直接处理硬件请求，也就是硬中断，主要负责耗时短的工作。下半部由操作系统自己触发，也就是软中断，用于处理上半部未完成的工作，特点是延时执行。</p><p>中断（上半部）是会打断 CPU 正在执行的任务，然后立即执行中断处理程序，而软中断（下半部）是以内核线程的方式执行，并且每一个 CPU 都对应一个软中断内核线程。不过，软中断不只是包括硬件设备中断处理程序的下半部，一些内核自定义事件也属于软中断，比如内核调度等、RCU锁（内核里常用的一种锁）等。</p><h3 id="操作系统启动"><a href="#操作系统启动" class="headerlink" title="操作系统启动"></a>操作系统启动</h3><p>以linux0.11为例：<br>操作系统在启动时，首先要将磁盘上的操作系统加载到内存中，即著名的<code>bootsect.s</code>所做的任务。</p><ul><li>分段将操作系统的代码读入，<code>setup.s</code>和<code>system</code></li><li>调用<code>1ah=0x13</code>中断将存在es:bp寄存器的字符串打印在串口屏幕，只要在使用中断时，将输入设定好即可</li><li>确定根设备号和驱动设备号</li></ul><p>在完成这些任务之后，<code>bootsect.s</code>将跳转到<code>setup.s</code>的第一条指令，将控制权交给<code>setup.s</code>，</p><ul><li>取出光标位置和其他的硬件参数，放在<code>0x90000</code>处</li><li>获取扩展内存的大小，即1M以外的其他内存空间，放在<code>0x90002</code>处</li><li>将<code>system</code>模块移到<code>0x10000</code>处</li></ul><p><code>setup.s</code>在完成了上边的任务之后，执行<code>jmpi 0, 8</code>，从实模式进入保护模式。这时，寻址的方式发生了变化。之前实模式下的寻址<code>cs &lt;&lt; 4 + ip</code>变成了保护模式下的寻址，根据<code>cs</code>查<code>gdt</code>表(在<code>setup.s</code>中初始化)再加上<code>ip</code>。中断处理也发生了变化，保护模式下，中断处理函数的入口被放在<code>idt</code>表中，而不是之前在实模式下通过中断向量表来寻找中断程序的入口地址。</p><p><code>system</code>模块中的第一部分代码是<code>head.s</code>，这段代码在保护模式下运行。这段代码建立了<code>idt</code>表和<code>gdt</code>表，(虽然在上一步<code>setup.s</code>中已经建立过<code>gdt</code>表，但那是为了执行<code>jmpi 0, 8</code>而设置的，因此在这里还需要再创建一次)并进行了一些其他的初始化(设置页表、填写页表)。在完成自己的任务之后，将跳转到<code>main.c</code>代码中。<code>main.c</code>的工作是初始化各种硬件，以及<code>mem_map</code>(<code>mem_init</code>)等重要的数据结构。完成初始化之后，操作系统开始运转，进入内核态，进入shell。</p><p><img title="" src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220928202906.png" alt="操作系统启动" data-align="center" width="567"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">EXT_MEM_K</span> <span class="token expression"><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0x90000</span><span class="token punctuation">)</span></span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 结束地址是由0x90002 处取出的内容决定</span>    <span class="token keyword">long</span> memory_end <span class="token operator">=</span> <span class="token number">1</span> « <span class="token number">20</span> <span class="token operator">+</span> EXT_MEM_K « <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token comment">// 而一页的大小操作系统就设为 4K，当不足 1 页的内存就丢弃。</span>    memory_end <span class="token operator">&amp;=</span> <span class="token number">0xfffff000</span><span class="token punctuation">;</span>    <span class="token comment">// 此处的起始地址为 4M，这是因为 0 - 1M 交给了系统内核 system，1M - 4M 将交给磁盘高速缓存，所以 4M 以后的内存才是让用户应用程序使用的</span>    <span class="token keyword">long</span> memory_start <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">;</span>    <span class="token comment">// mem_init() 的两个参数是要管理的起始内存地址和结束内存地址</span>    <span class="token function">mem_init</span><span class="token punctuation">(</span>memory_start<span class="token punctuation">,</span> memory_end<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化mem_map</span>    <span class="token function">hd_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 硬盘初始化 </span>    ······    <span class="token function">sti</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">move_to_user_mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// init() 会启动一个 shell，就是命令窗口</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="进程和线程"><a href="#进程和线程" class="headerlink" title="进程和线程"></a>进程和线程</h2><h3 id="cpu管理的直观想法"><a href="#cpu管理的直观想法" class="headerlink" title="cpu管理的直观想法"></a>cpu管理的直观想法</h3><p>最简单的使用cpu的方法就是给<code>pc</code>设置一个初值，然后让cpu取址执行下去。但是，一些指令比如<code>io</code>指令执行时间长，且并不占用cpu，这时候cpu就会空闲下来，导致cpu的利用率低。<br>一种直观的改善方法是，设置多道程序交替执行。这样，当一个程序执行<code>io</code>指令时，cpu就会执行另一个程序，这样就能提高cpu的利用率。怎么做到呢？不仅需要在切换程序的时候修改<code>pc</code>的值，还需要保存当前程序的状态，以便下次切换回来时，能够恢复程序的状态。这就引出了<code>pcb(process control block)</code>的概念，<a href="#pcb"><code>pcb</code>是一个数据结构</a>，用来保存程序的状态。<br>同时，也引出了进程的概念，进程就是一个运行中的程序。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221121155320.png" alt="为什么要进行进程的切换？"></p><p>对于一个支持多进程的系统，单核的cpu会从一个进程快速的切换到另一个进程，这样就产生了一种并行的错觉，但是，事实上单核的cpu只能执行一个进程，实际上这是并发而不是并行。</p><h3 id="多进程图像"><a href="#多进程图像" class="headerlink" title="多进程图像"></a>多进程图像</h3><p>多进程图像是一个抽象的概念，它是一个进程的集合。</p><p>多进程的组织是怎么样的？有一个进程在执行，一些进程在等待执行，有一些进程在等待某事件。为了管理这些进程的状态，引入了就绪态，运行态，阻塞态的概念。除了这三种状态之外，再加上新建态和终止态，这就是进程的五种基本状态，这五种基本状态完整的描述了一个进程的生命周期。</p><p>多进程是如何交替的？依赖于<code>schedule</code>函数。<code>schedule</code>函数是一个函数，它的作用是选择一个进程，让cpu执行这个进程。<code>schedule</code>函数的选择过程是怎么样的？有两种选择方式，一种是抢占式，一种是非抢占式。抢占式是指，当一个进程执行的时候，如果有更高优先级的进程需要执行，那么就会抢占当前进程，让更高优先级的进程执行。非抢占式是指，当一个进程执行的时候，如果有更高优先级的进程需要执行，那么就会等待当前进程执行完毕，再执行更高优先级的进程。</p><p>多进程如何互相影响？进程之间切换时，可能会导致不同的进程同时修改同一个内存地址，这样就导致进程的执行乱套了，为了避免这种状况，我们对每一个进程都设置一个单独的映射，使相同的虚拟地址对应到不同的物理地址。多进程是怎么合作的？核心的想法在于进程同步，确定一个合理的推进顺序，实现方法是给进程上锁。</p><h3 id="进程的基本知识"><a href="#进程的基本知识" class="headerlink" title="进程的基本知识"></a>进程的基本知识</h3><p>进程的定义：<br>我们编写的代码只是一个存储在硬盘的静态文件，通过编译后就会生成二进制可执行文件，当我们运行这个可执行文件后，它会被装载到内存中，接着 CPU 会执行程序中的每一条指令，那么这个运行中的程序，就被称为 <strong>进程</strong>（Process）。</p><h4 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h4><div class="table-container"><table><thead><tr><th>进程的几种状态</th><th>意义</th></tr></thead><tbody><tr><td>运行态</td><td>进程此时处于运行态，表示进程此时正占用cpu</td></tr><tr><td>就绪态</td><td>进程此时可运行，但是由于其他进程处于运行态而暂时的停止运行</td></tr><tr><td>阻塞态</td><td>进程此时正在等待另一事件的发生，如等待输入输出操作的完成，此时，即使cpu空闲此进程也不能运行</td></tr><tr><td>创建状态</td><td>进程正在被创建的状态</td></tr><tr><td>结束状态</td><td>进程正在从系统中消失时的状态</td></tr></tbody></table></div><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221121160125.png" alt="进程的三种主要状态"></p><p>如果大量的进程都处于阻塞状态，这些在阻塞态的进程将占用大量的物理内存空间，根据我们上文所说的，cpu附近的内存空间寸土寸金，阻塞态占用大量的内存空间显然是一种浪费物理内存的行为。为了避免大量物理内存的浪费，通常会把阻塞状态的进程的物理内存空间换到硬盘中，等进程再次被运行时，再从硬盘换入物理内存中。</p><p>当进程没有实际占用物理内存空间时，我们称这种状态为 <strong>挂起状态</strong>。<br>挂起状态可以分为两种，阻塞挂起状态和就绪挂起状态。阻塞挂起状态是指，进程在硬盘中等待某个事件的发生。就绪挂起状态是指，进程在硬盘中等待被调度，只要进入内存就能立刻被执行。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221121161235.png" alt="进程的状态变迁"></p><h4 id="进程的控制结构"><a href="#进程的控制结构" class="headerlink" title="进程的控制结构"></a><span id = 'pcb'>进程的控制结构</span></h4><p>上文提到过，在操作系统中通过pcb来控制进程。<br>pcb是进程存在的唯一标识。在pcb中包含了进程的各种信息：</p><ul><li>进程描述信息<ul><li>进程标识符：用于标识各个进程，每个进程都有唯一的标识符</li><li>用户标识符：用于标识进程的所有者</li></ul></li></ul><ul><li><p>进程控制和管理信息</p><ul><li>进程当前的状态：创建态，结束态，就绪态，运行态，阻塞态 </li><li>进程优先级：用于调度进程的优先级</li></ul></li><li><p>资源分配清单</p><ul><li>进程的内存分配情况，打开的文件列表和所使用的I/O设备信息等等 </li></ul></li><li><p>cpu相关的信息</p><ul><li>cpu中各个寄存器的值，当进程被切换时，需要保存进程的cpu相关信息，以便下次切换回来时，能够恢复进程的运行状态</li></ul></li></ul><p>pcb通过链表的方式进行组织，操作系统将状态相同的进程的pcb连在一块组成各种队列。比如，就绪队列，阻塞队列，挂起队列等等。</p><h4 id="进程的控制"><a href="#进程的控制" class="headerlink" title="进程的控制"></a>进程的控制</h4><p>进程是如何被创建，终止，阻塞和唤醒的？</p><font color = blue>01 创建进程</font><p>操作系统允许一个进程创建另一个进程，且允许子进程继承父进程所拥有的资源。<br>操作系统创建一个进程的步骤为：</p><ul><li>申请一个空白的pcb，并向pcb中填写一些控制和管理进程相关的信息，比如进程的唯一标识等</li><li>为该进程分配运行所需的内存资源等</li><li>将创建的pcb插入就绪队列中，等待被调度</li></ul><font color = blue>02 终止进程</font><p>进程的终止是指进程的执行结束，进程的pcb被释放，进程所占用的资源被回收。<br>进程的终止有三种方式，正常终止，异常终止和被动终止(被用户手动的kill掉)。<br>当子进程被终止时，其继承的父进程的资源应当全部还给父进程，当父进程被终止时，其名下的子进程变成了孤儿进程，由1号进程（init进程）对他们进行状态收集工作（收养）。<br>终止进程时，操作系统会进行以下步骤：</p><ul><li>查找要释放的进程的pcb，</li><li>若该进程还处于执行状态，则立刻停止该进程的执行，将cpu资源分配给其他进程，</li><li>若该进程还有子进程，则将其子进程交给1号进程进行接管，</li><li>将该进程所占用的所有资源交还给操作系统，</li><li>将该进程的pcb从所在的队列中删除。</li></ul><p>为什么要收养孤儿进程？<br>任何一个子进程(init除外)在<code>exit()</code>之后，并非马上就消失掉，而是留下一个称为僵尸进程(Zombie)的数据结构，等待父进程处理。这是每个子进程在结束时都要经过的阶段。如果子进程在<code>exit()</code>之后，父进程没有来得及处理，这时用ps命令就能看到子进程的状态是<code>Z</code>。如果父进程能及时处理，可能用<code>ps</code>命令就来不及看到子进程的僵尸状态，但这并不等于子进程不经过僵尸状态。如果父进程在子进程结束之前退出，则子进程将由<code>init</code>接管。<code>init</code>将会以父进程的身份对僵尸状态的子进程进行处理。<br>孤儿进程的父进程已经被终止，但是，父进程还没有调用<code>wait</code>获取子进程的状态信息，孤儿进程的信息不能被处理，这些孤儿进程的进程标识符等信息将一直被保存在操作系统中，变成了僵尸进程，导致操作系统的空间被浪费，因此，必须对孤儿进程进行收养。init进程会循环地<code>wait</code>它的已经退出的子进程，避免僵尸进程对操作系统的危害。</p><font color = blue>03 阻塞进程</font><p>当进程需要等待另一事件完成时，可以调用阻塞语句将自己置于阻塞状态。一个处于阻塞态的进程只能被另一进程唤醒。<br>阻塞进程时，操作系统会进行以下步骤：</p><ul><li>查找要阻塞的进程标识号对应的pcb，</li><li>若该进程处于运行状态，则保护其现场，将其状态转换为阻塞态，停止运行，</li><li>将该进程对应的pcb从原队列中删除，加入阻塞队列中。</li></ul><font color = blue>04 唤醒进程</font><p>进程由运行态转变为阻塞态时由于进程必须等待某一事件的完成，因此，进程必须等待另一进程的唤醒。当另一进程完成了事件后，会调用唤醒语句将阻塞进程唤醒。处于阻塞状态的进程绝对不可能自己叫醒自己。<br>唤醒进程时，操作系统会进行以下步骤：</p><ul><li>查找要唤醒的进程标识号对应的pcb，</li><li>将其从阻塞队列中移出，并将其状态置为就绪态，</li><li>将其插入到就绪队列中，等待调度。</li></ul><h3 id="线程的基本知识"><a href="#线程的基本知识" class="headerlink" title="线程的基本知识"></a>线程的基本知识</h3><p>在早期的操作系统中，进程就是调度的最基本单元，随着操作系统的发展，提出了更小的能独立运行的基本单位，也就是线程。</p><h4 id="为什么要使用线程？"><a href="#为什么要使用线程？" class="headerlink" title="为什么要使用线程？"></a>为什么要使用线程？</h4><p>对于一些任务，如果我们使用单进程进行运行，各个函数之间不能并发的执行，导致资源利用效率低下。若使用多进程的方式，可以提高资源的利用效率，但是又带来了新的问题，进程之间如何相互通信？如何共享数据？维护这么多的进程又要消耗大量的资源。<br>为了解决这些问题，我们设计了一种新的实体供操作系统进行调度，即线程。线程具有以下特点：</p><ul><li>线程之间可以并发的运行</li><li>线程之间可以共享相同的地址空间</li></ul><h4 id="线程的定义"><a href="#线程的定义" class="headerlink" title="线程的定义"></a>线程的定义</h4><p>线程是进程中的一条执行流程。<br>同一进程中的多个线程之间可以共享代码块，数据段和打开的文件等资源，以节省维护很多进程对应的pcb所需要的物理内存空间，但是每个线程都有自己独立的一套寄存器和栈，确保线程的控制流时相对独立的，从而使得线程可以被操作系统调度。</p><p>使用线程的优点：</p><ul><li>一个进程中可以同时并发多个线程</li><li>各个线程之间可以同步执行</li><li>各个线程之间可以共享地址空间和文件等资源<br>使用线程的缺点：</li><li>进程中的一个线程崩溃时，会导致该线程所属的进程的所有线程崩溃。这并非不可避免的，在java编程中，<a href="#threadbk">线程的崩溃不会导致进程的崩溃</a>。</li></ul><h4 id="线程的实现"><a href="#线程的实现" class="headerlink" title="线程的实现"></a>线程的实现</h4><p>线程的实现有三种不同的思路：</p><ul><li>用户级线程：在用户空间中实现，由用户态的线程库管理的线程</li><li>内核级线程：在内核中实现，由内核管理的线程</li><li>轻量级进程：又称混合型线程，在内核中支持用户级线程</li></ul><p>目前通常将几种不同的线程实现思路结合起来使用，既提供核心线程供smp系统使用，也提供线程库在用户态中实现另一套线程机制，供用户使用。</p><p><font color=blue>内核级线程</font>：内核级线程只运行在内核态，不受用户态的影响，在上下文切换时不涉及到内核态和用户态的切换。唯一使用的资源时内核栈和上下文切换时保存寄存器的空间，资源消耗量小。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122103126.png" alt="内核级线程的模型，一个用户线程对应一个内核线程"></p><ul><li>内核级线程的优点：<ol><li>在一个进程当中，如果某个内核线程发起系统调用而被阻塞，并不会影响其他内核线程的运行。</li><li>分配给线程，多线程的进程获得更多的 CPU 运行时间。</li></ol></li><li>内核级线程的缺点：<ol><li>在支持内核线程的操作系统中，由内核来维护进程和线程的上下文信息，如 PCB 和 TCB。</li><li>线程的创建、终止和切换都是通过系统调用的方式来进行，因此对于系统来说，系统开销比较大。</li></ol></li></ul><p><font color = blue>用户级线程</font>：用户级线程完全建立在用户空间的线程库之上，用户线程的创建，调度，同步和结束全都在用户态之下完成，不需要内核的帮助，因此用户级线程是低消耗且高效的。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122103357.png" alt="用户级线程的模型，多个用户线程对应一个内核线程"></p><ul><li>用户级线程的优点：<ol><li>每个进程都需要有它私有的线程控制块（TCB）列表，用来跟踪记录它各个线程状态信息（PC、栈指针、寄存器），TCB 由用户级线程库函数来维护，可用于不支持线程技术的操作系统。</li><li>用户线程的切换也是由线程库函数来完成的，无需用户态与内核态的切换，所以速度特别快。</li></ol></li><li>用户级线程的缺点：<ol><li>由于操作系统不参与线程的调度，如果一个线程发起了系统调用而阻塞，那进程所包含的用户线程都不能执行了。</li><li>当一个线程开始运行后，除非它主动地交出 CPU 的使用权，否则它所在的进程当中的其他线程无法运行，因为用户态的线程没法打断当前运行中的线程，它没有这个特权，只有操作系统才有，但是用户线程不是由操作系统管理的。</li><li>由于时间片分配给进程，故与其他进程比，在多线程执行时，每个线程得到的时间片较少，执行会比较慢。</li></ol></li></ul><p><font color = blue>轻量级进程</font>：轻量级进程是建立在内核之上并由内核支持的 <strong>用户线程</strong>，是内核线程的高度抽象，每一个轻量级进程都与一个特定的内核级线程关联，内核线程只能由内核管理并像普通的进程一样被调度。轻量级进程的创建通过系统调用完成，与父进程共享进程地址空间和系统资源。像普通的进程一样被调用，但是相比于普通的进程，轻量级进程只有一个最小的执行上下文和调度程序所需的统计信息。而相比于普通的用户线程，轻量级进程与内核线程相关联，可以像独立的进程一样拥有中断。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122103242.png" alt="轻量级进程"></p><ul><li>使用轻量级进程的优点：<ol><li>由于本质是用户线程：故轻量级进程可以共享诸如地址空间，打开的文件等，只要其中一个修改共享资源，另一个就立即查看这种修改。</li><li>由于与内核进程相关联：所以每个LWP都可以作为独立单元由Kernel独立调度，同时由于内核线程位于Kernel，而Kernel正是所有资源的管理者，这也LWP也就可以像独立进程一样享有专门的中断。</li></ol></li><li>使用轻量级进程的缺点：<ol><li>大多数LWP的操作，如建立、析构以及同步，都需要进行系统调用。系统调用的代价相对较高：需要在user mode和kernel mode中切换。</li><li>每个LWP都需要有一个内核线程支持，因此LWP要消耗内核资源（内核线程的栈空间）。因此一个系统不能支持大量的LWP。</li></ol></li></ul><p>在linux中，没有真正的线程，linux中所有的线程都是使用轻量级进程和进程模拟实现的。</p><h3 id="进程、线程和协程的区别和联系"><a href="#进程、线程和协程的区别和联系" class="headerlink" title="进程、线程和协程的区别和联系"></a>进程、线程和协程的区别和联系</h3><div class="table-container"><table><thead><tr><th></th><th>进程</th><th>线程</th><th>协程</th></tr></thead><tbody><tr><td>定义</td><td>资源分配和拥有的基本单位</td><td>程序执行的基本单位</td><td>用户态的轻量级线程，线程内部调度的基本单位</td></tr><tr><td>切换情况</td><td>进程CPU环境(栈、寄存器、页表和文件句柄等)的保存以及新调度的进程CPU环境的设置</td><td>保存和设置程序计数器、少量寄存器和栈的内容</td><td>先将寄存器上下文和栈保存，等切换回来的时候再进行恢复</td></tr><tr><td>切换者</td><td>操作系统</td><td>操作系统</td><td>用户</td></tr><tr><td>切换过程</td><td>用户态-&gt;内核态-&gt;用户态</td><td>用户态-&gt;内核态-&gt;用户态</td><td>用户态(没有陷入内核)</td></tr><tr><td>调用栈</td><td>内核栈</td><td>内核栈</td><td>用户栈</td></tr><tr><td>拥有资源</td><td>CPU资源、内存资源、文件资源和句柄等</td><td>程序计数器、寄存器、栈和状态字</td><td>拥有自己的寄存器上下文和栈</td></tr><tr><td>并发性</td><td>不同进程之间切换实现并发，各自占有CPU实现并行</td><td>一个进程内部的多个线程并发执行</td><td>同一时间只能执行一个协程，而其他协程处于休眠状态，适合对任务进行分时处理</td></tr><tr><td>系统开销</td><td>切换虚拟地址空间，切换内核栈和硬件上下文，CPU高速缓存失效、页表切换，开销很大</td><td>切换时只需保存和设置少量寄存器内容，因此开销很小</td><td>直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快</td></tr><tr><td>通信方面</td><td>进程间通信需要借助操作系统</td><td>线程间可以直接读写进程数据段(如全局变量)来进行通信</td><td>共享内存、消息队列</td></tr></tbody></table></div><p>1、进程是资源调度的基本单位，运行一个可执行程序会创建一个或多个进程，进程就是运行起来的可执行程序</p><p>2、线程是程序执行的基本单位，是轻量级的进程。每个进程中都有唯一的主线程，且只能有一个，主线程和进程是相互依存的关系，主线程结束进程也会结束。多提一句：协程是用户态的轻量级线程，线程内部调度的基本单位</p><h3 id="cpu调度"><a href="#cpu调度" class="headerlink" title="cpu调度"></a>cpu调度</h3><p>直观的想法：FIFO，先来先服务。Piority，优先级，任务短的可以适当优先。RR，时间片轮转。</p><h4 id="调度的五个原则"><a href="#调度的五个原则" class="headerlink" title="调度的五个原则"></a>调度的五个原则</h4><p>调度有五个原则：</p><ol><li>CPU利用率：调度程序应确保 CPU 是始终匆忙的状态，这可提高 CPU 的利用率；</li><li>系统吞吐量：吞吐量表示的是单位时间内 CPU 完成进程的数量，长作业的进程会占用较长的 CPU 资源，因此会降低吞吐量，相反，短作业的进程会提升系统吞吐量；</li><li>周转时间：周转时间是进程运行+阻塞时间+等待时间的总和，一个进程的周转时间越小越好；</li><li>等待时间：这个等待时间不是阻塞状态的时间，而是进程处于就绪队列的时间，等待的时间越长，用户越不满意；</li><li>响应时间：用户提交请求到系统第一次产生响应所花费的时间，在交互式系统中，响应时间是衡量调度算法好坏的主要标准。</li></ol><p>考虑到任务的特点，将任务分为前台任务和后台任务，前台任务使用时间片轮转进行调度，后台任务使用最短作业优先进行调度，前台任务和后台任务之间使用优先级进行调度。</p><h4 id="一个实际的schedule-函数"><a href="#一个实际的schedule-函数" class="headerlink" title="一个实际的schedule()函数"></a>一个实际的schedule()函数</h4><p>linux0.11中的<code>schedule</code>函数如下所示：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">int</span> i<span class="token punctuation">,</span>next<span class="token punctuation">,</span>c<span class="token punctuation">;</span>         <span class="token keyword">struct</span> <span class="token class-name">task_struct</span> <span class="token operator">*</span><span class="token operator">*</span> p<span class="token punctuation">;</span> <span class="token comment">/* check alarm, wake up any interruptible tasks that havegot a signal */</span>         <span class="token keyword">for</span><span class="token punctuation">(</span>p<span class="token operator">=</span> <span class="token operator">&amp;</span>LAST_TASK <span class="token punctuation">;</span> p<span class="token operator">></span> <span class="token operator">&amp;</span>FIRST_TASK <span class="token punctuation">;</span> <span class="token operator">--</span>p<span class="token punctuation">)</span>                   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>alarm <span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>alarm<span class="token operator">&lt;</span> jiffies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                               <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>signal<span class="token operator">|=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>SIGALRM<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                               <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>alarm <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>                                     <span class="token punctuation">&#125;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>signal<span class="token operator">&amp;</span> <span class="token operator">~</span><span class="token punctuation">(</span>_BLOCKABLE <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>blocked<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>                            <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>state<span class="token operator">==</span>TASK_INTERRUPTIBLE<span class="token punctuation">)</span>                                     <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>state<span class="token operator">=</span>TASK_RUNNING<span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span><span class="token comment">/* this is the scheduler proper: */</span>         <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                   c <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                   next <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                   i <span class="token operator">=</span> NR_TASKS<span class="token punctuation">;</span>                   p <span class="token operator">=</span> <span class="token operator">&amp;</span>task<span class="token punctuation">[</span>NR_TASKS<span class="token punctuation">]</span><span class="token punctuation">;</span>                   <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span><span class="token operator">--</span>p<span class="token punctuation">)</span>                                     <span class="token keyword">continue</span><span class="token punctuation">;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>state <span class="token operator">==</span>TASK_RUNNING <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>counter<span class="token operator">></span> c<span class="token punctuation">)</span> <span class="token comment">// 找到状态就绪且counter最大的任务，counter同时实现了时间片轮转和优先级调度</span>                                     c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>counter<span class="token punctuation">,</span> next <span class="token operator">=</span>i<span class="token punctuation">;</span>                   <span class="token punctuation">&#125;</span>                   <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token keyword">for</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>LAST_TASK<span class="token punctuation">;</span> p <span class="token operator">></span> <span class="token operator">&amp;</span>FIRST_TASK<span class="token punctuation">;</span> <span class="token operator">--</span>p<span class="token punctuation">)</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span>                                     <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>counter<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>counter<span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span>                                                        <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">-></span>priority<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>         <span class="token function">switch_to</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>counter代表的优先级在不断的动态调整。<br>counter保证了响应时间的界。$c(t)=\frac{c(t-1)}{2} + p,c(0) = p$是一个几何级数，且一定收敛，这也是为什么降低counter一定是除以一个数而不是减去一个数的原因。<br>经过IO之后，counter会变大，IO时间越长，counter就越大，变相的照顾了前台的进程。<br>后台进程一直按照counter的大小进行轮转，近似了sjf调度。</p><h3 id="进程间通信机制"><a href="#进程间通信机制" class="headerlink" title="进程间通信机制"></a>进程间通信机制</h3><p>每个进程的用户地址空间都是相对独立的，不能互相访问。但是内核空间是每个进程共享的，因此进程之间的通信必须通过内核。<br>Linux的内核提供了一些进程间通信的机制，管道，消息队列，共享内存，socket，信号量和信号。</p><h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><p>linux中提供了匿名管道和命名管道。最常见的管道就是<code>|</code>，他是一个匿名管道：<br><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> python <span class="token comment"># 这是一条很常见的命令，首先使用ps aux命令将所有进程的信息输出到标准输出，</span><span class="token comment"># 然后使用管道将标准输出作为grep python的标准输入，</span><span class="token comment"># grep python命令将标准输入中包含python的行输出到标准输出。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><br>匿名管道在使用完之后就被销毁。在linux中，命名管道是一个文件，可以在不同的进程之间进行通信。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkfifo</span> mypipe <span class="token comment"># 创建一个命名管道，命名为mypipe，此时，多了一个名为mypipe的文件，使用ls -l可以看到其类型为p，即pipe，管道。</span><span class="token builtin class-name">echo</span> <span class="token string">"hello"</span> <span class="token operator">></span> mypipe <span class="token comment"># 将hello写入管道，此时，管道中的内容为hello</span><span class="token function">cat</span> <span class="token operator">&lt;</span> mypipe <span class="token comment"># 从管道中读取内容，此时，管道中的内容为空</span><span class="token comment"># 在mypipe中的内容被读取之前，echo "hello" > mypipe 不会退出。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>管道这种通信方式效率低，不适合进程间频繁地交换数据。但是，管道的使用很简单，同时也我们很容易得知管道里的数据已经被另一个进程读取了。</p><p>匿名管道的创建使用系统调用<code>int pipe(int fd[2])</code>，<code>fd[0]</code>是读端，<code>fd[1]</code>是写端。命名管道的创建使用系统调用<code>int mkfifo(const char *pathname, mode_t mode)</code>，<code>pathname</code>是管道的名字，<code>mode</code>是管道的权限。匿名管道只存在于内存中，命名管道存在于文件系统中。</p><p>所谓的管道，就是操作系统内核中的一串缓存。从管道的一端写入的数据实际上缓存在内核中，另一端读取时，直接从内核中读取这段数据，因此管道的大小是受限的。且管道传输的数据事实上是无格式的流。</p><ul><li><code>fd[0]</code>是读端，<code>fd[1]</code>是写端，对于匿名管道，两个描述符都在同一个进程中，那么匿名管道是如何跨过两个进程，实现进程之间的通信的？<br>一般的做法是，fork一个子进程，子进程继承父进程的所有文件描述符，因此，子进程也有了管道的读写端。这样，父子进程之间都可以通过各自的<code>fd</code>写入和读取同一个管道文件，实现跨进程通信。<br>事实上，父子进程同时读写管道很容易造成混乱，为了避免这种混乱的出现，通常的做法是父进程只写，子进程只读，或者父进程只读，子进程只写。这样只能实现单向通信，如果要实现双向通信，就需要使用两个管道。</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122112652.png" alt="匿名管道实现进程间的通信"></p><p>对于匿名管道，他的通信范围是存在于父子关系之间的进程。由于没有实体，只能通过<code>fork</code>父进程来实现进程之间的通信。<br>对于命名管道，可以在不相关的进程间相互通信。命名管道提前创建了一个文件，这个文件就是管道，因此，命名管道的通信范围是整个文件系统。</p><h4 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h4><p>使用管道从A进程向B进程发送消息时，只有B进程将管道中的信息读取完之后才能A进程才能正常的退出。因此，使用管道是效率低的，不适合进程间频繁地交换数据。</p><p>使用消息队列的通信模式可以解决这个问题。消息队列本质上是一个保存在内核中的消息链表，在发送数据时，会分成一个一个独立的数据单元，也就是消息体。消息体是用户自定义的数据类型，消息的接收方和发送方要约定好消息体的数据类型。所以每个消息体都是固定大小的存储块，而不是管道中的无格式的字节流数据。若进程从消息队列中读取了消息体，内核会将这个消息体从消息队列中删除。</p><p>消息队列的生命周期由内核决定，若没有主动的释放消息队列或者关闭操作系统，消息队列会一直存在，而匿名管道的生命周期由进程决定，随着进程的创建而建立，当管道中的数据被读取之后就销毁。</p><p>使用消息队列的不足之处：</p><ol><li>通信不及时</li><li>消息体的大小有限制，不适合比较大数据的传输。在内核中，每个消息体都会有一个最长长度的限制，同时所有队列所包含的全部消息体的总长度也是有上限的。在linux内核中，有两个宏定义，<code>MSGMAX</code>和<code>MSGMNB</code>，他们以字节为单位，分别表示消息体的最大长度和消息队列的最大长度。</li><li>使用消息队列进行通信时，存在从内核态到用户态之间的数据拷贝开销，因为消息队列存在于内核中，进程写入数据到内核中的消息队列时，会发生用户态拷贝数据到内核态的过程，同样的进程从消息队列中读取数据时，也会发生从内核态拷贝数据到用户态的过程。</li></ol><h4 id="共享内存"><a href="#共享内存" class="headerlink" title="共享内存"></a>共享内存</h4><p>使用消息队列进行通信时，通信往往是不及时的，且频繁的发生从内核态拷贝到用户态和从用户态拷贝到内核态的过程，导致额外的开销。因此，使用共享内存进行通信是一种更高效的方式。</p><p>现代操作系统中的内存管理通常是使用虚拟内存技术，也就是每个进程都有自己独立的虚拟内存空间，不同进程的虚拟内存映射到不同的物理内存中。因此，即使进程A和进程B的虚拟地址是一样的，但是访问的不是同一个物理内存，所以对于数据的增删查改互不影响。</p><p>共享内存的实现方式是，将一段物理内存映射到不同进程的虚拟内存中，这样不同进程就可以访问同一段物理内存，从而实现数据的共享。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122154036.png" alt="共享内存"></p><h4 id="信号量"><a href="#信号量" class="headerlink" title="信号量"></a><span id = 'pv'>信号量</span></h4><p>使用共享内存的通信方式，实现了不同进程对同一物理内存地址的修改。但是若多个进程同时对同一内容进行修改，很可能会发生冲突。为了防止多进程竞争共享资源而造成的数据错乱，需要保护机制，使得共享的资源在任意时刻只能被一个进程访问。这种保护机制可以使用信号量来实现。</p><p>信号量是一个整型的计数器，主要用于实现进程间的互斥和同步，实际上并不直接传递数据。信号量的大小表示资源的数量，控制信号量有两种操作：</p><ol><li>P操作，这个操作会把信号量减去 1，相减后如果信号量 &lt; 0，则表明资源已被占用，进程需阻塞等待；相减后如果信号量 &gt;= 0，则表明还有资源可使用，进程可正常继续执行。</li><li>V 操作，这个操作会把信号量加上 1，相加后如果信号量 &lt;= 0，则表明当前有阻塞中的进程，于是会将该进程唤醒运行；相加后如果信号量 &gt; 0，则表明当前没有阻塞中的进程。</li></ol><p>将信号量的值初始化为1，代表互斥信号量，可以保证共享内存在任一时刻只能被一个进程访问。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122160249.png" alt="互斥信号量"></p><p>具体的过程为：</p><ol><li>进程 A 在访问共享内存前，先执行了 P 操作，由于信号量的初始值为 1，故在进程 A 执行 P 操作后信号量变为 0，表示共享资源可用，于是进程 A 就可以访问共享内存。</li><li>若此时，进程 B 也想访问共享内存，执行了 P 操作，结果信号量变为了 -1，这就意味着临界资源已被占用，因此进程 B 被阻塞。</li><li>直到进程 A 访问完共享内存，才会执行 V 操作，使得信号量恢复为 0，接着就会唤醒阻塞中的线程 B，使得进程 B 可以访问共享内存，最后完成共享内存的访问后，执行 V 操作，使信号量恢复到初始值 1。</li></ol><p>信号量不仅可以是互斥信号量，当信号量的值初始化0时，代表同步信号量，确保进程执行的顺序。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221122155735.png" alt="同步信号量"></p><p>具体的过程为：</p><ol><li>如果进程 B 比进程 A 先执行了，那么执行到 P 操作时，由于信号量初始值为 0，故信号量会变为 -1，表示进程 A 还没生产数据，于是进程 B 就阻塞等待；</li><li>接着，当进程 A 生产完数据后，执行了 V 操作，就会使得信号量变为 0，于是就会唤醒阻塞在 P 操作的进程 B；</li><li>最后，进程 B 被唤醒后，意味着进程 A 已经生产了数据，于是进程 B 就可以正常读取数据了。</li></ol><h4 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h4><p>信号是进程间通信机制中唯一的一种异步通信机制。可以在任何一个时刻发送信号给一个进程，一旦有信号产生，进程就将对信号做出处理。<br>用户进程对信号的处理方式有：</p><ol><li>执行默认的操作。</li><li>忽略信号，当我们不希望处理某些信号时，可以忽略该信号，不做任何处理。<code>SIGKILL</code> 和 <code>SIGSTOP</code> 信号不能被忽略。</li><li>捕捉信号，将信号定义为一个信号处理函数，在信号发生时，执行相应的信号处理函数</li></ol><p>linux中的信号：使用<code>kill -l</code>命令可以查看linux中的信号。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">kill</span> -l <span class="token number">1</span><span class="token punctuation">)</span> SIGHUP       <span class="token number">2</span><span class="token punctuation">)</span> SIGINT       <span class="token number">3</span><span class="token punctuation">)</span> SIGQUIT      <span class="token number">4</span><span class="token punctuation">)</span> SIGILL       <span class="token number">5</span><span class="token punctuation">)</span> SIGTRAP <span class="token number">6</span><span class="token punctuation">)</span> SIGABRT      <span class="token number">7</span><span class="token punctuation">)</span> SIGBUS       <span class="token number">8</span><span class="token punctuation">)</span> SIGFPE       <span class="token number">9</span><span class="token punctuation">)</span> SIGKILL     <span class="token number">10</span><span class="token punctuation">)</span> SIGUSR1<span class="token number">11</span><span class="token punctuation">)</span> SIGSEGV     <span class="token number">12</span><span class="token punctuation">)</span> SIGUSR2     <span class="token number">13</span><span class="token punctuation">)</span> SIGPIPE     <span class="token number">14</span><span class="token punctuation">)</span> SIGALRM     <span class="token number">15</span><span class="token punctuation">)</span> SIGTERM<span class="token number">16</span><span class="token punctuation">)</span> SIGSTKFLT   <span class="token number">17</span><span class="token punctuation">)</span> SIGCHLD     <span class="token number">18</span><span class="token punctuation">)</span> SIGCONT     <span class="token number">19</span><span class="token punctuation">)</span> SIGSTOP     <span class="token number">20</span><span class="token punctuation">)</span> SIGTSTP<span class="token number">21</span><span class="token punctuation">)</span> SIGTTIN     <span class="token number">22</span><span class="token punctuation">)</span> SIGTTOU     <span class="token number">23</span><span class="token punctuation">)</span> SIGURG      <span class="token number">24</span><span class="token punctuation">)</span> SIGXCPU     <span class="token number">25</span><span class="token punctuation">)</span> SIGXFSZ<span class="token number">26</span><span class="token punctuation">)</span> SIGVTALRM   <span class="token number">27</span><span class="token punctuation">)</span> SIGPROF     <span class="token number">28</span><span class="token punctuation">)</span> SIGWINCH    <span class="token number">29</span><span class="token punctuation">)</span> SIGIO       <span class="token number">30</span><span class="token punctuation">)</span> SIGPWR<span class="token number">31</span><span class="token punctuation">)</span> SIGSYS      <span class="token number">34</span><span class="token punctuation">)</span> SIGRTMIN    <span class="token number">35</span><span class="token punctuation">)</span> SIGRTMIN+1  <span class="token number">36</span><span class="token punctuation">)</span> SIGRTMIN+2  <span class="token number">37</span><span class="token punctuation">)</span> SIGRTMIN+3<span class="token number">38</span><span class="token punctuation">)</span> SIGRTMIN+4  <span class="token number">39</span><span class="token punctuation">)</span> SIGRTMIN+5  <span class="token number">40</span><span class="token punctuation">)</span> SIGRTMIN+6  <span class="token number">41</span><span class="token punctuation">)</span> SIGRTMIN+7  <span class="token number">42</span><span class="token punctuation">)</span> SIGRTMIN+8<span class="token number">43</span><span class="token punctuation">)</span> SIGRTMIN+9  <span class="token number">44</span><span class="token punctuation">)</span> SIGRTMIN+10 <span class="token number">45</span><span class="token punctuation">)</span> SIGRTMIN+11 <span class="token number">46</span><span class="token punctuation">)</span> SIGRTMIN+12 <span class="token number">47</span><span class="token punctuation">)</span> SIGRTMIN+13<span class="token number">48</span><span class="token punctuation">)</span> SIGRTMIN+14 <span class="token number">49</span><span class="token punctuation">)</span> SIGRTMIN+15 <span class="token number">50</span><span class="token punctuation">)</span> SIGRTMAX-14 <span class="token number">51</span><span class="token punctuation">)</span> SIGRTMAX-13 <span class="token number">52</span><span class="token punctuation">)</span> SIGRTMAX-12<span class="token number">53</span><span class="token punctuation">)</span> SIGRTMAX-11 <span class="token number">54</span><span class="token punctuation">)</span> SIGRTMAX-10 <span class="token number">55</span><span class="token punctuation">)</span> SIGRTMAX-9  <span class="token number">56</span><span class="token punctuation">)</span> SIGRTMAX-8  <span class="token number">57</span><span class="token punctuation">)</span> SIGRTMAX-7<span class="token number">58</span><span class="token punctuation">)</span> SIGRTMAX-6  <span class="token number">59</span><span class="token punctuation">)</span> SIGRTMAX-5  <span class="token number">60</span><span class="token punctuation">)</span> SIGRTMAX-4  <span class="token number">61</span><span class="token punctuation">)</span> SIGRTMAX-3  <span class="token number">62</span><span class="token punctuation">)</span> SIGRTMAX-2<span class="token number">63</span><span class="token punctuation">)</span> SIGRTMAX-1  <span class="token number">64</span><span class="token punctuation">)</span> SIGRTMAX<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h4><p>在同一主机中的进程间通信，可以使用管道、信号量、信号、共享内存等方式，但是在不同主机中的进程间通信，就需要使用网络通信了。网络通信的基础是 socket，socket 是一种通信机制，它可以让不同主机上的进程进行通信。</p><p>创建socket的系统调用为：<br><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">socket</span><span class="token punctuation">(</span><span class="token keyword">int</span> domain<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">int</span> protocol<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/* domain 为协议族，AF_INET 为 IPv4 协议族, AF_INET6 为 IPv6 协议族, AF_UNIX 为本地通信协议族*/</span><span class="token comment">/* type 为套接字类型，指定通信的类型，SOCK_STREAM 为字节流套接字，对应TCP，SOCK_DGRAM为数据报套接字，对应UDP*/</span><span class="token comment">/*protocol 为协议，现已被忽略，一般指定为0即可*/</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>关于socket编程具体的内容在计算机网络中介绍。</p><h3 id="线程互斥与同步"><a href="#线程互斥与同步" class="headerlink" title="线程互斥与同步"></a>线程互斥与同步</h3><p>在单核的cpu系统中，为了实现多个程序同时运行的假象，操作系统常常以时间片轮转的方式进行调度，让每个线程都执行一个时间片，时间片用完之后就切换到下一个进程进行，由于时间片的时间很短，就会有一种很多线程在并发运行的假象。</p><p>多个线程同时操作一个变量时；若此时在执行过程中发生了上下文切换，很可能会使执行的顺序出现问题，这时，我们是有概率得到错误的结果的。</p><h4 id="互斥"><a href="#互斥" class="headerlink" title="互斥"></a>互斥</h4><p><font color = blue>为什么要有互斥的概念？</font><br>在多线程执行操作共享变量的一段代码时，可能会导致竞争状态。这样一个访问共用资源的程序片段，我们称为临界区。共用资源又有无法被多个线程同时访问的特性。这样就引入了互斥的概念，我们希望这段代码是互斥的：当有线程进入临界区时，其他线程必须等待。即，临界区的代码执行时，最多只能出现一个线程。</p><p>基于临界区控制的交互作用是比较简单的，只需要一个进程/线程进入了临界区，其他试图进入临界区的进程/线程都会被阻塞着，直到第一个进程/线程离开了临界区。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221128163320.png" alt="临界区的代码执行时只能出现一个线程"></p><h4 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h4><p>在多线程中，每个线程不一定是顺序执行的，但是，我们又需要线程之间可以密切合作，以实现一个共同的任务。<br>为了实现这种需求，提出了同步的概念：并发线程在一些关键点上需要互相等待或者互通消息，这种相互制约的等待与互通消息称为线程同步。</p><p>同步操作即，操作A应该在操作B之前执行，操作C必须在操作A和B都执行完成之后再执行，强调执行的先后顺序。<br>互斥操作即，操作A和操作B不能同时执行，并不要求执行的先后顺序。</p><h4 id="互斥与同步的实现和使用"><a href="#互斥与同步的实现和使用" class="headerlink" title="互斥与同步的实现和使用"></a>互斥与同步的实现和使用</h4><p>为了实现线程进程之间的正确协作，操作系统提供实现进程协作的措施和方法，主要的方法有两种：</p><ul><li><font color = purple>锁</font>：加锁解锁操作</li><li><font color = purple>信号量</font>：<a href="#pv">PV操作</a></li></ul><p>信号量和锁都可以实现线程/进程之间的互斥，但是，信号量可以实现更加复杂的同步操作。</p><h5 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h5><p>通过加锁和解锁的操作，可以解决并发线程/进程之间的互斥问题。</p><p>具体的操作是，对于任意想进入临界区的线程，必须先进行加锁操作，若加锁操作顺利通过，则线程可以进入临界区，在完成对临界资源的访问之后再执行解锁操作，以释放该临界资源。</p><p>根据锁的不同实现方式，可以分为 <strong>忙等待锁</strong> 和 <strong>无忙等待锁</strong>。</p><ul><li><strong>忙等待锁</strong></li></ul><p>忙等待锁的实现基于一组特殊原子操作指令——测试和置位指令(test and set)。<code>Test-and-Set</code>指令的伪码如下所示：</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">int TestAndSet(int *old_ptr, int new) &#123;  int old &#x3D; *old_ptr;  *old_ptr &#x3D; new;  return old;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>原子操作就是要么全部不执行，要么全部执行，执行了之后无法被打断的操作，这组指令完成了这些工作：</p><ol><li>将<code>old_ptr</code>地址内保存的内容更新为<code>new</code>;</li><li>返回<code>old_ptr</code>中的旧值。</li></ol><p>这条原子操作指令同时完成了测试旧值和设置新值的工作，所以这条指令叫做 <strong>测试并设置</strong>。</p><p>可以使用<code>Test-and-Set</code>指令实现 <strong>忙等待锁</strong>：<br><pre class="line-numbers language-C" data-language="C"><code class="language-C">typedef struct lock_t &#123;    int flag;&#125; lock_t;void init(lock_t *lock) &#123;    lock-&gt;flag &#x3D; 0;     &#x2F;&#x2F; 初始化锁，将锁置为0，解锁状态。 &#125;void lock(lock_t *lock) &#123;    while(TestAndSet(&amp;(lock-&gt;flag), 1) &#x3D;&#x3D; 1)    ; &#x2F;&#x2F; wait and do nothing  &#x2F;&#x2F; 当线程想要进入临界区时，对临界区的锁进行检查，并将临界区的锁置为锁定状态，等待，  &#x2F;&#x2F; 直到上一个访问临界区的线程退出，将临界区的锁置为0，这时继续向下进行，并再次锁定临界区&#125;void unlock(lock_t *lock) &#123;    lock-&gt;flag &#x3D; 0;    &#x2F;&#x2F; 将锁置为0，解锁状态&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>当要访问的临界区被锁时，线程就被困在<code>while</code>循环中，不做任何事情，因此这种锁被称为忙等待锁，也成为自旋锁。</p><p>这是最简单的一种锁，一直自旋，利用 CPU 周期，直到锁可用。在单处理器上，需要抢占式的调度器（即不断通过时钟中断一个线程，运行其他线程）。否则，自旋锁在单 CPU 上无法使用，因为一个自旋的线程永远不会放弃 CPU。</p><ul><li><strong>无忙等待锁</strong></li></ul><p>无忙等待锁，顾名思义就是在获取不到锁时，不自旋，而是将获取不到锁的线程放在等待队列中，将cpu资源让给其他的线程。</p><p>一种无忙等待锁的伪码如下所示：</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">typedef struct lock_t &#123;    int flag;    queue_t *q;&#125; lock_t;void init(lock_t *lock) &#123;    lock-&gt;flag &#x3D; 0; &#x2F;&#x2F; 将锁置为可获取状态    queue_init(lock-&gt;q); &#x2F;&#x2F; 初始化等待队列&#125;void lock(lock_t *lock) &#123;    while(TestAndSet(&amp;(lock-&gt;flag), 1) &#x3D;&#x3D; 1) &#123;      &#x2F;*      1. 保存现在运行进程的tcb，      2. 将现在运行的进程的tcb插入等待队列中，      3. 将当前运行的线程设置为等待状态，      4. 调度其他能使用cpu的线程。      *&#x2F;    &#125;&#125;void unlock(lock_t *lock) &#123;    if(lock-&gt;q !&#x3D; NULL) &#123;      &#x2F;*      1. 移出队列中的第一个线程，      2. 将该线程的tcb插入到就绪队列，      3. 设置该线程为就绪状态。      *&#x2F;    &#125;    lock-&gt;flag &#x3D; 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="信号量-1"><a href="#信号量-1" class="headerlink" title="信号量"></a>信号量</h5><p>信号量是操作系统提供的一种协调共享资源访问的方法。</p><p>信号量就是资源的数量，对应的变量通常是一个整型变量。</p><p>在操作系统中，提供了两种原子操作对信号量进行控制：</p><ul><li><code>P</code> 操作：对信号量进行减 1 操作，如果<code>sem &lt; 0</code>，那么就阻塞当前线程。</li><li><code>V</code> 操作：对信号量进行加 1 操作，如果 <code>sem &lt;= 0</code> ，那么就唤醒一个线程。</li></ul><blockquote><p>为什么<code>V</code>操作在<code>sem &lt;= 0</code>时唤醒一个线程？<br><code>V</code>操作和<code>P</code>操作都是成对出现的，当执行<code>V</code>操作时说明有一个线程已经执行完了临界区的代码，而此时，<code>sem &lt;= 0</code>，说明还有线程在等这个刚刚被释放出来的资源，那么就会唤醒一个线程。</p></blockquote><p><code>P</code>操作是用在进入临界区之前，<code>V</code>操作是用在离开临界区之后。两个操作成对出现。</p><p>下边是信号量和<code>P</code>、<code>V</code>操作的伪码：</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">typedef struct sem_t &#123;    int value;  &#x2F;&#x2F; 资源数量    queue_t *q; &#x2F;&#x2F; 等待队列&#125; sem_t;void init(sem_t *sem, int value) &#123;    sem-&gt;value &#x3D; value;    queue_init(sem-&gt;q);&#125;void P(sem_t *sem) &#123;    sem-&gt;value--;    if(sem-&gt;value &lt; 0) &#123;        &#x2F;*        1. 保存现在运行进程的tcb，        2. 将现在运行的进程的tcb插入等待队列中，        3. 将当前运行的线程设置为等待状态，        4. 调度其他能使用cpu的线程。        *&#x2F;    &#125;&#125;void V(sem_t *sem) &#123;    sem-&gt;value++;    if(sem-&gt;value &lt;&#x3D; 0) &#123;        &#x2F;*        1. 移出队列中的第一个线程，        2. 将该线程的tcb插入到就绪队列，        3. 设置该线程为就绪状态。        *&#x2F;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><code>P</code>操作和<code>V</code>操作是怎样使用的？</strong></p><blockquote><p>实现互斥访问控制</p></blockquote><p>将信号量的初值设置为1，并将临界区的代码放在<code>P</code>和<code>V</code>之间时，可以实现临界区的互斥访问控制。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221128205525.png" alt="使用信号量实现互斥访问控制"></p><p>此时，任何想进入临界区的线程，必先在互斥信号量上执行 P 操作，在完成对临界资源的访问后再执行 V 操作。由于互斥信号量的初始值为 1，故在第一个线程执行 P 操作后 s 值变为 0，表示临界资源为空闲，可分配给该线程，使之进入临界区。</p><p>若此时又有第二个线程想进入临界区，也应先执行 P 操作，结果使 s 变为负值，这就意味着临界资源已被占用，因此，第二个线程被阻塞。</p><p>并且，直到第一个线程执行 V 操作，释放临界资源而恢复 s 值为 0 后，才唤醒第二个线程，使之进入临界区，待它完成临界资源的访问后，又执行 V 操作，使 s 恢复到初始值 1。</p><blockquote><p>实现事件同步控制</p></blockquote><p>为了说明问题，我们假设两个需要进行同步控制的线程。</p><ul><li>儿子线程：儿子肚子饿了就要吃饭，叫妈妈早点做饭，妈妈做好饭之后，儿子可以开始吃饭</li><li>妈妈线程：儿子肚子饿了就开始做饭，做完饭之后叫儿子吃饭</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221129102835.png" alt="儿子线程和妈妈线程"></p><p>当儿子饿了时，妈妈才开始做饭，当妈妈做好饭了，儿子才开始吃饭。</p><p>一种使用信号量的方式实现上述事件关系的伪码是：<br><pre class="line-numbers language-C" data-language="C"><code class="language-C">semaphore s1 &#x3D; 0; &#x2F;&#x2F; 表示还不饿semaphore s2 &#x3D; 0; &#x2F;&#x2F; 表示还没做好饭void son() &#123;    while(1) &#123;        V(s1); &#x2F;&#x2F; 叫妈妈做饭        P(s2); &#x2F;&#x2F; 等待妈妈做好饭        eat(); &#x2F;&#x2F; 吃饭    &#125;&#125;void mother() &#123;    while(1) &#123;        P(s1);  &#x2F;&#x2F; 等待儿子叫妈妈做饭        cook(); &#x2F;&#x2F; 做饭        V(s2);  &#x2F;&#x2F; 告诉儿子饭做好了    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>妈妈一开始询问儿子要不要做饭时，执行的是<code>P(s1)</code>，相当于询问儿子需不需要吃饭，由于 <code>s1</code>初始值为 0，此时<code>s1</code>变成 -1，表明儿子不需要吃饭，所以妈妈线程就进入等待状态。</p><p>当儿子肚子饿时，执行了<code>V(s1)</code>，使得<code>s1</code>信号量从 -1 变成 0，表明此时儿子需要吃饭了，于是就唤醒了阻塞中的妈妈线程，妈妈线程就开始做饭。</p><p>接着，儿子线程执行了<code>P(s2)</code>，相当于询问妈妈饭做完了吗，由于<code>s2</code>初始值是 0，则此时<code>s2</code>变成 -1，说明妈妈还没做完饭，儿子线程就等待状态。</p><p>最后，妈妈终于做完饭了，于是执行 <code>V(s2)</code>，<code>s2</code> 信号量从 -1 变回了 0，于是就唤醒等待中的儿子线程，唤醒后，儿子线程就可以进行吃饭了。</p><h5 id="生产者和消费者问题"><a href="#生产者和消费者问题" class="headerlink" title="生产者和消费者问题"></a>生产者和消费者问题</h5><p>生产者和消费者的问题中既包含了互斥关系，也包含了同步关系，问题描述如下：</p><ul><li>生产者在生成数据之后，将数据放在一个缓冲区中</li><li>消费者从缓冲区中取出数据进行处理</li><li>任何时刻，都只能有一个消费者或者生产者访问缓存区的数据</li></ul><blockquote><p>互斥关系：缓冲区一次只能有一个线程操作，说明缓冲区是临界代码，需要互斥<br>同步关系：当缓冲区为空时，消费者需要等待生产者生成数据，当缓冲区满时，生产者需要等待消费者消耗数据。</p></blockquote><p>为了实现上述的这种控制关系，我们需要三个信号量：</p><ol><li>互斥信号量<code>mutex</code>：用于互斥访问缓冲区，初始化为1</li><li>资源信号量<code>fullBuffers</code>：用于消费者询问缓冲区是否有数据，初始化为0</li><li>资源信号量<code>emptyBuffers</code>：用于生产者询问缓冲区是否有空间，初始化为n(缓冲区的大小)</li></ol><p>伪码：<br><pre class="line-numbers language-C" data-language="C"><code class="language-C"># define N 1000 &#x2F;&#x2F; 缓冲区的大小semaphore mutex &#x3D; 1;semaphore emptyBuffers &#x3D; N;semaphore fullBuffers &#x3D; 0;void producer() &#123;    while(1) &#123;P(emptyBuffers); &#x2F;&#x2F; 询问是否有空间，将缓冲区的空间 - 1P(mutex);        &#x2F;&#x2F; 询问是否能进入临界区produce();       &#x2F;&#x2F; 将生成的数据放在缓冲区V(mutex);        &#x2F;&#x2F; 离开临界区V(fullBuffers);  &#x2F;&#x2F; 将缓冲区的数据数量 + 1    &#125;&#125;void consumer() &#123;while(1) &#123;P(fullBuffers);  &#x2F;&#x2F; 询问缓冲区是否有数据，将缓冲区的数据数量 - 1P(mutex);        &#x2F;&#x2F; 是否可以进入临界区consume();       &#x2F;&#x2F; 将缓冲区中的数据取出1V(mutex);  &#x2F;&#x2F; 离开临界区V(emptyBuffers); &#x2F;&#x2F; 将缓冲区的空间数量 + 1&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><h4 id="死锁的概念"><a href="#死锁的概念" class="headerlink" title="死锁的概念"></a>死锁的概念</h4><p>在多线程编程时，为了防止多线程竞争共享资源导致数据错乱，通常会在共享资源之前加上互斥锁，保证同时只能由有一个线程对共享资源进行操作。两个线程为了保护两个不同的共享资源使用了两个互斥锁，当两个互斥锁应用不当时，就可能会造成两个线程都在等待对方释放锁，在没有外力的情况下，这些线程就会一直互相等待，没有办法继续运行下去，这种情况就是发生了死锁。</p><p>死锁的发生需要四个条件：</p><ol><li>互斥条件：多个线程不能同时使用一个资源。</li><li><p>持有并等待条件：一个线程已经持有了一个资源，但是又申请了一个新的资源，而这个新的资源已经被其他线程持有。<br>当线程A拥有资源1，但是线程A又想申请资源2，但是资源2已经被线程C所占有。这种情况下A就会处于等待状态，<font color = green>但是A又不会释放资源1</font>，这样就会造成线程B也无法申请资源1，因为资源1已经被A所占有。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130104708.png" alt="持有并等待条件"></p></li><li><p>不可剥夺条件：线程已经获得的资源，在未使用完之前不能被其他线程获取。</p></li><li><p>环路等待条件：线程之间形成一个环路，线程A等待线程B，线程B等待线程A。<br>线程A已经持有资源2，而想请求资源1，线程B已经获取了资源1，而想请求资源2，这就形成资源请求等待的环形图。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130104959.png" alt="环路等待条件"></p></li></ol><h4 id="模拟死锁"><a href="#模拟死锁" class="headerlink" title="模拟死锁"></a>模拟死锁</h4><p>使用C++代码来模拟死锁的产生，首先创建两个线程和两个互斥锁。<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// linux</span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;thread></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token comment">// 声明线程函数A和线程函数B</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_A_func</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_B_func</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建互斥锁</span>pthread_mutex_t mutex_A <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span>pthread_mutex_t mutex_B <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pthread_t thread_A<span class="token punctuation">,</span> thread_B<span class="token punctuation">;</span><span class="token comment">// 创建两个线程</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread_A<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_A_func<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread_B<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_B_func<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_join</span><span class="token punctuation">(</span>thread_A<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_join</span><span class="token punctuation">(</span>thread_B<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"exit"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 线程函数A</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_A_func</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread a is waiting for resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread a is using resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread a is waiting for resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread a is using resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 线程函数B的实现</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_B_func</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is waiting for resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is using resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is waiting for resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is using resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130151923.png" alt="运行结果"></p><p>线程 B 在等待互斥锁 A 的释放，线程 A 在等待互斥锁 B 的释放，双方都在等待对方资源的释放，很明显，产生了死锁问题。</p><p>使用gdb调试工具可以对确定死锁死锁的位置。<br>首先获取可能发生了死锁的进程的pid，使用<code>gdb -p xxxx</code>命令，然后使用<code>info threads</code>命令查看线程的状态，可以看到线程A和线程B都在等待互斥锁，这就是死锁的位置。</p><h4 id="避免死锁的出现"><a href="#避免死锁的出现" class="headerlink" title="避免死锁的出现"></a>避免死锁的出现</h4><p>死锁的出现需要四个条件，互斥条件，持有并等待条件，不可剥夺条件，环路等待条件。四个条件缺一不可。</p><p>为了避免死锁的出现，我们只需要破坏其中任意一个条件即可。最常见的方法是，使用资源有序分配法，来破坏环路等待条件。</p><blockquote><p>什么是资源有序分配法？</p></blockquote><p>为所有的资源编上编号，保证线程A和线程B获取资源的顺序一样。<br>即，线程A是先尝试获取资源A， 再获取资源B；线程B也是先尝试获取资源A，再获取资源B。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130153858.png" alt="资源有序分配法"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 使用资源有序分配法改进后的代码，只需要修改线程函数B的获取资源顺序即可。</span><span class="token comment">// 线程函数B的实现</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_B_func</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is waiting for resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is using resource a"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is waiting for resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thread b is using resource b"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_B<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex_A<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130154740.png" alt="运行结果"></p><p>很明显，这次并没有发生死锁。</p><h2 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h2><h3 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h3><p>虚拟内存是计算机系统内存管理的一种技术。它使得应用程序认为它拥有连续的可用的内存（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。大多数操作系统都使用了虚拟内存，如Windows家族的“虚拟内存”；Linux的“交换空间”等。</p><h4 id="什么是虚拟内存"><a href="#什么是虚拟内存" class="headerlink" title="什么是虚拟内存"></a>什么是虚拟内存</h4><p>cpu的执行，本质上是一个取址执行的过程。在内存中同时运行两个程序是不可能的，因为两个程序的代码和数据都是放在内存中的，如果同时运行两个程序，那么这两个程序的代码和数据就会相互覆盖，这样就会导致程序运行出错。操作系统为了解决这个问题，引入了虚拟内存的技术。</p><p>我们可以将两个进程所使用的地址隔离开，操作系统为每个进程分配独立的一套虚拟地址，互不干涉。这样，每个进程都可以独立的使用自己的虚拟地址，而不会相互干扰。</p><blockquote><p>在这个过程中，操作系统会提供一种机制，将不同进程的虚拟地址和不同内存的物理地址映射起来。操作系统引入了虚拟内存，进程持有的虚拟地址会通过 CPU 芯片中的内存管理单元（MMU）的映射关系，来转换变成物理地址，然后再通过物理地址访问内存。</p></blockquote><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221130173352.png" alt="CPU通过虚拟地址访问物理地址"></p><blockquote><p>操作系统是怎么管理虚拟地址和物理地址之间的关系的？主要有内存分段和内存分页两种方法。</p></blockquote><h4 id="内存分段"><a href="#内存分段" class="headerlink" title="内存分段"></a>内存分段</h4><h2 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h2><ul><li>操作系统6.828 <a href="https://knowledgehive.github.io/6.828/">笔记</a> <a href="https://abelay.github.io/6828seminar/schedule.html">官网</a></li><li>哈工大李治军老师的操作系统课程 <a href="https://www.bilibili.com/video/BV1d4411v7u7/?spm_id_from=333.337.search-card.all.click&amp;vd_source=0819e1872d4b44489d49f89acd6be56c">视频</a> <a href="https://www.lanqiao.cn/courses/115">实验</a></li><li>蒋岩炎的操作系统 <a href="https://www.bilibili.com/video/BV1Cm4y1d7Ur/?spm_id_from=333.337.search-card.all.click">视频</a></li><li>图解操作系统 <a href="https://xiaolincoding.com/os/">小林coding</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 八股 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
            <tag> os </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字符串匹配</title>
      <link href="/2022/11/03/string-match/"/>
      <url>/2022/11/03/string-match/</url>
      
        <content type="html"><![CDATA[<p>字符串匹配相对来说是一个很常见的问题，无论是在工程中还是在笔试和面试中。<br>一般来说，字符串匹配的输入有一个原字符串和一个子串，要求返回子串在原字符串中首次出现的位置。即，c++标准库中的find函数。</p><p>本文以leetcode的<a href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/">第28题实现strStr()</a>为例，总结几种常见的字符串匹配算法。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221103110235.png" alt="找出字符串中第一个匹配项的下标"></p><h3 id="1-暴力匹配"><a href="#1-暴力匹配" class="headerlink" title="1. 暴力匹配"></a>1. 暴力匹配</h3><p>这种方法是最容易想到的。<br>将原字符串和子串的左端对齐，逐一比较。若第一个字母匹配上，则继续向后滑动，比较下一个字母。若不匹配，则将原字符串的左端向后滑动一位，子串的左端对齐，继续比较。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">strStr</span><span class="token punctuation">(</span>string haystack<span class="token punctuation">,</span> string needle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> haystack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>haystack<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> needle<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 第一个字母匹配上</span>                <span class="token keyword">bool</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> needle<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> right<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>haystack<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">!=</span> needle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span> left<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// 没有匹配上，继续向后移动</span>            left<span class="token operator">++</span><span class="token punctuation">;</span>            right <span class="token operator">=</span> left<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-RABIN-KARP-字符匹配算法"><a href="#2-RABIN-KARP-字符匹配算法" class="headerlink" title="2. RABIN KARP 字符匹配算法"></a>2. RABIN KARP 字符匹配算法</h3><p>Rabin-Krap算法的核心思想是hash。本质上，是对暴力搜索的一种优化。在暴力搜索时，每次原字符串的左端和子串的左端匹配上，我们都需要匹配剩下的所有字符。而在Rabin-Krap算法中，我们只需要比较子串的hash值和原字符串的hash值是否相等即可。这种算法实际上被用于论文查重的工作中。</p><p>根据<a href="https://labuladong.github.io/algo/2/20/28/">labuladong的算法笔记</a>，我们先从一个简单的例子开始理解。<br>假设我们有一个字符串形式的数字，将之转化为int型。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">str2int</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        res <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> res <span class="token operator">+</span> <span class="token punctuation">(</span>p <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>举这个例子的目的是为了说明两个操作<span id = 'jump'></span>：</p><ul><li>如何在数字的最低位添加数字？将数字整体左移（十进制数乘十），左移后的数字加上要添加的数字。</li><li>如何在数字的最高位删除数字？获取此时数字的最高位数字，用最高位数字乘以10的此时数字的位数次方，在用原来的数字减去这个数字。</li></ul><p>为了理解上述两个操作在Rabin-Krap算法中的应用，我们先来看一道简单的题，<a href="https://leetcode.cn/problems/repeated-dna-sequences/">leetcode187.重复的DNA序列</a>。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221104155041.png" alt="重复的DNA序列"></p><p>直观上来看，这题的解法很简单，使用一个set来存储已经出现过的DNA序列，如果当前的DNA序列已经在set中出现过，则将其加入结果集中。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">findRepeatedDnaSequences</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> st<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            string tmp <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> st<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span>string<span class="token operator">></span></span></span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这题和我们上边说的有什么关系？在上述的解法中，我们使用了<code>substr</code>函数。其实，可以使用滑动窗口的思想，结合上述的两种操作来避免每一次都要调用<code>substr</code>函数。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">char2int</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">switch</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token string">'A'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'C'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'G'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">'T'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">findRepeatedDnaSequences</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> st<span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> <span class="token keyword">long</span> hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            hash <span class="token operator">=</span> hash <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">char2int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">else</span> st<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>                hash <span class="token operator">-=</span> <span class="token punctuation">(</span><span class="token function">char2int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            right<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span>string<span class="token operator">></span></span></span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其实到了这里，已经很像Rabin-Krap算法了。只是，现在的字符串只有四种字符，而实际上，ASCII码有256种字符，所以应该是将字符串hash到256进制的数进行处理。其他的逻辑都是相同的，这里的重点在于怎么处理256进制数，计算字符串的hash值，对hash值进行上述的<a href="#jump">两种操作</a>。下边展示了一种实现Rabin-krap算法的伪代码。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 待匹配的文本</span>string txt<span class="token punctuation">;</span><span class="token comment">// 模式串</span>string pat<span class="token punctuation">;</span><span class="token keyword">int</span> l <span class="token operator">=</span> pat<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span><span class="token keyword">int</span> rl <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token function">power</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> window_hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 计算pat的hash值</span><span class="token keyword">int</span> pat_hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pat<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pat_hash <span class="token operator">=</span> r <span class="token operator">*</span> pat_hash <span class="token operator">+</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pat<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 滑动窗口</span><span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> txt<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window_hash <span class="token operator">=</span> r <span class="token operator">*</span> window_hash <span class="token operator">+</span> <span class="token keyword">int</span><span class="token punctuation">(</span>txt<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    right<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">==</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>pat_hash <span class="token operator">==</span> window_hash<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> left<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            window_hash <span class="token operator">=</span> window_hash <span class="token operator">-</span> txt<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">*</span> rl<span class="token punctuation">;</span>            left<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们使用了十进制数来作为hash值，但是一个十位的256进制数就需要一个25位的十进制数才能表示，这样，只要<code>pat</code>的位数稍微多一些，很容易就会超出<code>long</code>甚至是<code>long long</code>类型的上界。<br>因此，我们使用取余的方法进行处理，但是这会导致新的问题，即出现<code>hash</code>冲突。解决<code>hash</code>冲突常用的方法有拉链法和线性探查法。但是这里的解决方法是在出现<code>hash</code>冲突时，使用暴力匹配的方法将原字符串和<code>pat</code>进行比对。由于<code>hash</code>冲突不常出现，因此，暴力匹配并不太影响算法的时间复杂度。</p><p>此时，我们已经可以写出完整的Rabin-krap算法。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// 使用Rabin-krap</span>    <span class="token keyword">int</span> <span class="token function">strStr</span><span class="token punctuation">(</span>string haystack<span class="token punctuation">,</span> string needle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> l <span class="token operator">=</span> needle<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> q <span class="token operator">=</span> <span class="token number">1658598167</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> rl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// 计算rl的值</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            rl <span class="token operator">=</span> <span class="token punctuation">(</span>rl <span class="token operator">*</span> r<span class="token punctuation">)</span> <span class="token operator">%</span> q<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 计算needle的hash值</span>        <span class="token keyword">long</span> needle_hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> window_hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> needle<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            needle_hash <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">*</span> needle_hash <span class="token operator">+</span> <span class="token keyword">int</span><span class="token punctuation">(</span>needle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> q<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 滑动窗口</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> haystack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            window_hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r <span class="token operator">*</span> window_hash<span class="token punctuation">)</span> <span class="token operator">%</span> q <span class="token operator">+</span> <span class="token keyword">int</span><span class="token punctuation">(</span>haystack<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> q<span class="token punctuation">;</span>            right<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">==</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>needle_hash <span class="token operator">==</span> window_hash<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">// 检查是否真的匹配</span>                    <span class="token keyword">bool</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>haystack<span class="token punctuation">[</span>left <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">!=</span> needle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                            <span class="token keyword">break</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span> left<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 移除最左侧字符</span>                window_hash <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>window_hash <span class="token operator">-</span> <span class="token keyword">int</span><span class="token punctuation">(</span>haystack<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> rl<span class="token punctuation">)</span> <span class="token operator">%</span> q <span class="token operator">+</span> q<span class="token punctuation">)</span> <span class="token operator">%</span> q<span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上边给出的代码中，q应该为尽可能大的素数，可以降低哈希冲突的概率。具体的证明由数学推导给出。</p><h3 id="3-KMP算法"><a href="#3-KMP算法" class="headerlink" title="3. KMP算法"></a>3. KMP算法</h3><p>KMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法。<br>在开始之前，我们约定<code>pat</code>为模式串，长度为<code>m</code>，<code>txt</code>为待匹配的文本，长度为<code>n</code>。</p>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>juicer工具的使用</title>
      <link href="/2022/10/30/juicer/"/>
      <url>/2022/10/30/juicer/</url>
      
        <content type="html"><![CDATA[<p>juicer工具是AidenLab推出的一款处理Hi-C数据的工具，来源于他们的大作<a href="https://www.sciencedirect.com/science/article/pii/S2405471216302198">Juicer Provides a One-Click System for Analyzing Loop-Resolution Hi-C Experiments</a></p><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p><code>juicer</code>最近的稳定版本可以在<a href="https://github.com/aidenlab/juicer/releases/tag/1.6">这里</a>得到。(不用在这里下载，可以使用<code>git clone</code>一步到位)</p><p>具体的安装过程可以参考<a href="https://cloud.tencent.com/developer/article/1556784?from=article.detail.1557271">这里</a>。</p><p>这篇博客里边写的建立链接的部分稍有问题，稍作修改之后，适合我们的版本是这样的:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 创建juicer文件夹</span><span class="token function">mkdir</span> /home/xxx/juicer<span class="token builtin class-name">cd</span> /home/xxx/juicer<span class="token comment"># 创建juicer必须的文件夹</span><span class="token function">mkdir</span> references<span class="token function">mkdir</span> work<span class="token function">mkdir</span> restriction_sites<span class="token comment"># 从github clone最新版本的juicer</span><span class="token builtin class-name">cd</span> /home/xxx/package<span class="token function">git</span> clone https://github.com/aidenlab/juicer.git<span class="token comment"># 此时，juicer包被下载到package文件夹中，路径为/home/xxx/package/juicer</span><span class="token comment"># 我们要建立，自己创建的juicer文件夹和juicer包中，scripts的链接关系</span><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/juicer<span class="token function">ln</span> -s /home/xxx/package/juicer/CPU scripts<span class="token builtin class-name">cd</span> ./scripts/commonwegt https://hicfiles.tc4ga.com/public/juicer/juicer_tools.1.9.9_jcuda.0.8.jar<span class="token function">ln</span> -s juicer_tools.1.9.9_jcuda.0.8.jar juicer_tools.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>至此，juicer的安装就完成了。</p><h3 id="2-使用"><a href="#2-使用" class="headerlink" title="2. 使用"></a>2. 使用</h3><p>在之前的步骤中，我们建立了<code>references</code>，<code>work</code>，<code>restriction_sites</code>三个文件夹，这三个文件夹的作用分别是：<br><pre class="line-numbers language-none"><code class="language-none">&#x2F;juicer&#x2F;references # 存放参考基因组相关文件的文件夹&#x2F;juicer&#x2F;work # 存放样本的序列文件，和分析结果的文件夹&#x2F;juicer&#x2F;restriction_sites # 存放参考基因组酶切图谱的文件夹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>在使用juicer进行数据处理之前，我们需要先准备相关的<code>/references</code>和<code>restriction_sites</code>文件夹。</p><h4 id="准备references"><a href="#准备references" class="headerlink" title="准备references"></a>准备references</h4><p>我们要处理的数据是<a href="https://link.springer.com/article/10.1186/s13059-022-02774-z#availability-of-data-and-materials">3dvi</a>文中提到过的<a href="https://www.nature.com/articles/s41592-019-0502-z">Li2019</a>数据集，下载地址如图：<br><span id = "jump"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221031105227.png" alt="Li2019"></span></p><p>这是一个小鼠的数据集，因此，我们去ucsc上下载小鼠的参考基因组的序列文件，下载地址在<a href="https://hgdownload.soe.ucsc.edu/downloads.html">这里</a>。</p><p>ucsc提供了fasta文件，我们需要使用bwa为参考基因组文件建立索引。</p><p>bwa的安装和使用可以参考这篇<a href="https://zhuanlan.zhihu.com/p/342250758">博客</a>。</p><p>服务器上的bwa已经安装好了，从fasta文件，我们需要得到<code>bwa index</code>的输出文件，即<code>*.amb</code>，<code>*.ann</code>，<code>*.bwt</code>，<code>*.pac</code>，<code>*.sa</code>这五个文件。</p><p>此时，<code>mm9.fasta</code>已经在<code>references</code>中准备好了。打开终端，执行以下命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bwa index mm9.fasta<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="准备restriction-sites"><a href="#准备restriction-sites" class="headerlink" title="准备restriction_sites"></a>准备restriction_sites</h4><p>参考李国强等人的<a href="https://www.nature.com/articles/s41592-019-0502-z">论文</a>，他们在实验中所使用的酶是<code>DpnII</code>，<code>juicer</code>中支持直接输出这种内切酶的酶切图谱，因此，我们只需要运行以下命令：</p><p>按照博客中的说法，我们只需要执行以下命令：<br><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ./referencespython /home/penglab/package/juicer/misc/generate_site_positions.py DpnII mm9 mm9.fasta <span class="token comment"># 三个参数分别为 内切酶名称，参考基因组名称，参考基因组序列文件的路径</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>此时，<code>mm9_DpnII.txt</code>已经在<code>references</code>中准备好了。</p><p>另一个需要准备的文件是<code>mm9.chrom.sizes</code>，这个文件是参考基因组的染色体长度文件，可以从<a href="https://hgdownload.soe.ucsc.edu/downloads.html">这里</a>下载。</p><h4 id="准备work"><a href="#准备work" class="headerlink" title="准备work"></a>准备work</h4><p>需要处理的文件从<a href="#jump">上图</a>所示的路径中下载(此链接已经失效，如有需要可以找<a href="https://www.nature.com/articles/s41592-019-0502-z">论文</a>原作者进行询问)<br>软件运行时对样本文件的存放位置也有要求，必须位于work目录下，以样本名作为一个子目录，序列文件存放于fastq目录下。</p><p>这里，我仅从下载下来的数据中选择了一组进行验证性的操作。<br>将<code>JL_392_1.ACTTGA.mm9.calmd.bam.mapQ10.noDup.bam.mapQ20.sam2juice.filter.gz</code>移动到<code>work</code>目录下，新建<code>JL_392_1</code>文件夹，将上述文件解压至<code>JL_392_1</code>文件夹。</p><p>此时，全部的准备工作都已经完成了，我们可以开始运行<code>juicer</code>了。<br>此时，juicer文件夹下的文件结构如下图所示。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221031163510.png" alt="准备工作完成之后的文件结构"></p><h4 id="开始处理"><a href="#开始处理" class="headerlink" title="开始处理"></a>开始处理</h4><p><del>juicer的用法如下：</del></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ./scripts<span class="token function">bash</span> juicer.sh <span class="token punctuation">\</span>-z /home/xxx/juicer/references/mm9.fasta -p /home/xxx/juicer/restriction_sites/mm9.chrom.sizes <span class="token punctuation">\</span>-y /home/xxx/juicer/restriction_sites/mm9_DpnII.txt <span class="token punctuation">\</span>-d /home/xxx/juicer/work/JL_392_1 <span class="token punctuation">\</span>-D /home/xxx/juicer <span class="token punctuation">\</span><span class="token comment"># -z参数指定参考基因组fasta所在路径,在该路径下必须同时存在对应的bwa索引；</span><span class="token comment"># -p参数指定染色体长度文件；</span><span class="token comment"># -y指定基因组酶切图谱的路径；</span><span class="token comment"># -d指定样本原始文件存放的路径；</span><span class="token comment"># -D指定软件的安装路径</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第一次跑踩了个坑，没有<code>samtools</code>。参考<a href="https://www.jianshu.com/p/6b7a442d293f">博客</a>安装<code>samtools</code>。</p><p>这种做法不太适合我们的数据，使用下边的方法。</p><hr><p>经过跟3dvi的作者进行讨论，发现可能是不需要使用juicer.sh对文件进行处理，直接使用juicer_tools进行处理即可。<br>参考<a href="https://github.com/aidenlab/juicer/wiki/Pre">这里</a>的说明</p><p>我们使用下边的命令，可以得到全分辨率所有染色体的原始接触矩阵的<code>.hic</code>文件。<br><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># "Create index for data at all resolutions, all chromosomes"</span>java -Xmx8g -jar /home/penglab/juicer/scripts/common/juicer_tools.jar pre -v -q <span class="token number">1</span> JL_392_1.ACTTGA.mm9.calmd.bam.mapQ10.noDup.bam.mapQ20.sam2juice.filter test.hic mm9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>对每个文件都进行同样的操作即可，参考<code>juicer</code>作者给出的实例，可能在进行转化之前不解压也是可行的。</p><h4 id="使用juicer将-hic文件转为-txt文件"><a href="#使用juicer将-hic文件转为-txt文件" class="headerlink" title="使用juicer将.hic文件转为.txt文件"></a>使用juicer将.hic文件转为.txt文件</h4><p>此时，我们已经得到了<code>.hic</code>文件，使用<code>juicer</code>工具将其转化为我们熟悉的<code>.txt</code>文件。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">java -jar /home/penglab/juicer/scripts/common/juicer_tools.jar dump observed NONE test.hic <span class="token number">1</span>:0:200000000 <span class="token number">1</span>:0:200000000 BP <span class="token number">10000</span> ./test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其他参数不用修改，每次修改<code>BP</code>后的参数，得到不同分辨率的稀疏矩阵。</p><p>在得到<code>.txt</code>文件之后，这时他的坐标值还需要除以我们选取的分辨率，得到真实的矩阵坐标，这个可以用任意语言完成。</p><h4 id="对比实验"><a href="#对比实验" class="headerlink" title="对比实验"></a>对比实验</h4><p>按照<code>juicer</code>作者的说法，<code>long format</code>格式的文件也可以直接<code>bin</code>以得到不同分辨率的接触矩阵。</p><pre class="line-numbers language-none"><code class="language-none">&lt;str1&gt; &lt;chr1&gt; &lt;pos1&gt; &lt;frag1&gt; &lt;str2&gt; &lt;chr2&gt; &lt;pos2&gt; &lt;frag2&gt; &lt;mapq1&gt; &lt;cigar1&gt; &lt;sequence1&gt; &lt;mapq2&gt; &lt;cigar2&gt; &lt;sequence2&gt; &lt;readname1&gt; &lt;readname2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>我们需要用到的是<code>&lt;chr1&gt; &lt;pos1&gt; &lt;frag1&gt; &lt;str2&gt; &lt;chr2&gt; &lt;pos2&gt; &lt;frag2&gt;</code>，将这六列提取出来，其他的操作与对其他数据集的操作大同小异。</p><p>将这样直接从<code>long format</code>bin的结果和由<code>juicer</code>工具处理得到的结果进行对比。</p><h4 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h4><ul><li>熟悉<code>juicer</code>的使用，熟悉<code>hic</code>矩阵的格式；</li><li>得到<code>Li2019</code>数据集不同分辨率的接触矩阵，感兴趣的主要为<code>25k</code>，<code>40k</code>和<code>50k</code>。</li></ul><h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h3><ul><li><a href="https://www.sciencedirect.com/science/article/pii/S2405471216302198">Juicer Provides a One-Click System for Analyzing Loop-Resolution Hi-C Experiments</a></li><li><a href="https://blog.csdn.net/weixin_43569478/article/details/108079488">Juicer软件的安装详解</a></li><li><a href="https://zhuanlan.zhihu.com/p/341206245">「Workshop」第二十五期：HiC 数据处理简介</a></li><li><a href="https://link.springer.com/article/10.1186/s13059-022-02774-z#availability-of-data-and-materials">Normalization and de-noising of single-cell Hi-C data with BandNorm and scVI-3D</a></li><li><a href="https://www.nature.com/articles/s41592-019-0502-z">Joint profiling of DNA methylation and chromatin architecture in single cells</a></li><li><a href="https://zhuanlan.zhihu.com/p/342250758">BWA使用详解</a></li><li><a href="https://github.com/aidenlab/juicer/wiki/Pre">Juicer Pre Wiki</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 论文总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3dvi</title>
      <link href="/2022/10/24/3dvi/"/>
      <url>/2022/10/24/3dvi/</url>
      
        <content type="html"><![CDATA[<p>论文名：<a href="https://link.springer.com/article/10.1186/s13059-022-02774-z">Normalization and de-noising of scHi-C data with BandNorm and scVI-3D</a></p><h4 id="introduction"><a href="#introduction" class="headerlink" title="introduction"></a>introduction</h4><p>主要使用了两种方法，BandNorm和scVI-3D。分别解决了scHi-C数据的normalization和de-noising问题。我们关心的主要的还是scVI-3D模型。</p><ul><li>数据</li></ul><p>Hi-C的数据天生的具有一些bias和noise，比如systematic genomic distance bias，这些噪声由测序的实验引起，很难改进，给下游的分析任务带来很大的困扰。而single cell数据相对于集群细胞的数据而言，又天生的具有稀疏性和噪声。相对于其他的single cell数据，scHi-C数据由于使用了基因组的绝对坐标作为基本的研究单元，所以更加的稀疏。</p><ul><li>方法</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221023105951.png" alt="论文的fig 1"></p><p>fig-1a介绍了bandnorm方法。在进行bandnorm之前，首先将接触矩阵拆分成band-specific cell 和 基因座矩阵（感觉意思就是把数据拆成每个细胞）。然后再每个细胞的每条染色体上分别进行bandnorm，将原始的接触系数$Y_{r}^{cv}$(r:基因座；v:Band，感觉意思就是bin后的接触矩阵的坐标；c:cell)。bandnorm的公式是：</p><script type="math/tex; mode=display">C_{r}^{cv} = \frac{Y_{r}^{cv}}{L^{cv}}\alpha(v)</script><p>fig-1b介绍了scVI-3D模型。将$Y<em>{r}^{cv}$投射为隐层变量$z</em>{cv}$…说是让看后边的详细介绍，最关心的就是这一部分，但是这部分最语焉不详。</p><p>fig-1c和fig-1d介绍了几种方法的对比，<code>CellScale</code>, <code>BandScale</code>, <code>BandNorm</code>, <code>scHiCluster</code>, <code>scHiC Topics</code>, <code>Higashi</code>, <code>CellScale+CNN</code>, <code>scVI-3D</code>。分别在<code>Ramani2017</code>, <code>Lee2019</code>, <code>Li2019</code>, <code>Kim2020</code>数据集上进行了测试。不是我们关心的部分。</p><p>接下来直接跳到论文的第23页看他的<code>scVI-3D</code>模型。</p><h4 id="scVI-3D模型"><a href="#scVI-3D模型" class="headerlink" title="scVI-3D模型"></a><code>scVI-3D</code>模型</h4><p><code>scVI-3D</code>模型将基因座之间的交互频率建模为从<a href="#jump">零膨胀负二项分布</a>(zero-inflated negative binomial distribution)中得到的采样，同时考虑library size和batch effect。</p><p>整体上跟用于<code>scRNA-seq</code>的<code>scVI</code>差距不大，模型的本质是一个<code>VAE</code>模型。原始的<code>VAE</code>模型中认为变量服从高斯分布，使用神经网络学习$\mu和\sigma$。这里的<code>scVI</code>认为输入的数据服从的是零膨胀负二项分布，使用神经网络学习$\theta, r和p$。</p><hr><h4 id="零膨胀负二项分布"><a href="#零膨胀负二项分布" class="headerlink" title="零膨胀负二项分布"></a><span id = "jump">零膨胀负二项分布</span></h4><p>在介绍零膨胀负二项分布之前，首先介绍一下为什么要使用这样一个分布对交互频率进行建模。之前介绍过，single cell数据天然的具有很高的稀疏性，而且，由于测序数据事实上就是基因座之间的交互频率，这些数据的取值必然是非负整数。很自然的，我们就可以想到使用Poisson分布对<code>scHiC</code>数据进行建模。</p><ul><li>泊松分布<br>泊松分布的概率密度函数如下所示：<script type="math/tex; mode=display">f(k;\lambda) = P(X = k) = \frac{\lambda^{k}e^{-\lambda}}{k!}</script></li></ul><p>使用泊松分布描述<code>scHiC</code>数据的问题在于，对于一个泊松分布来说，他的期望和方差是相等的，即$E(X) = Var(X) = \lambda$。但是对于实际的单细胞数据而言，随着基因的表达水平的越高，其样本方差和样本均值的差就越大。即所谓的过度分散性。所以使用泊松分布是不合时宜的。参考scRNA-seq的一些<a href="https://www.jianshu.com/p/aa948e1be21c">相关解释</a>。引入Gamma分布。</p><ul><li>Gamma分布<br>Gamma分布的概率密度函数如下所示：</li></ul><script type="math/tex; mode=display">f(x ; \alpha, \beta)=\frac{\beta^{\alpha} x^{\alpha-1} e^{-\beta x}}{\Gamma(\alpha)} \quad \text { for } x>0 \quad \alpha, \beta>0</script><p>Poisson分布的$\lambda$是不变的，但是，这样的Poisson分布不能满足我们的要求，因此，我们引入一个先验，即：</p><script type="math/tex; mode=display">\lambda \sim \Gamma(r, \frac{1-p}{p})</script><p>不知道为什么要这样做，但是这时，问题可以描述为：</p><script type="math/tex; mode=display">X \sim Poisson(\lambda) \\\lambda \sim \Gamma(r, \frac{1-p}{p}) \quad r>0,0<p<1</script><ul><li>负二项分布<br>这时，可以证明X服从负二项分布(negative binomial distribution)。<script type="math/tex; mode=display">\begin{aligned}P(X=x) &=\int_{0}^{\infty} P(x \mid \lambda) P(\lambda) d \lambda \\&=\int_{0}^{\infty} \frac{\lambda^{x} e^{-\lambda}}{x !} \frac{\left(\frac{1-p}{P}\right)^{r}}{\Gamma(r)} \lambda^{r-1} e^{-\frac{\lambda(1-p)}{p}} d \lambda \\&=\frac{\left(\frac{1-p}{p}\right)^{r}}{x ! \Gamma(r)} \int_{0}^{\infty} \lambda^{x+r-1} e^{-\frac{\lambda}{p}} d \lambda \\&=\frac{\left(\frac{1-p}{p}\right)^{r}}{x ! \Gamma(r)}(p)^{x+r} \Gamma(x+r) \\&=\frac{\Gamma(x+r)}{\Gamma(r) x !}(1-p)^{r} p^{x} \\&=\frac{(x+r-1) !}{(r-1) ! x !} p^{x}(1-p)^{r} \\&=N B(r, p)\end{aligned}</script></li></ul><p>这样的分布其实已经可以满足<code>scHiC</code>数据的离散特性和过度分散性。但是，实际的<code>scHiC</code>数据还具有稀疏性，因此在NB的基础上，进一步的发展出ZINB，即零膨胀负二项分布。</p><ul><li>零膨胀负二项分布<br>定义一个示性函数$I_0(x)$:<script type="math/tex; mode=display">I_0(x) = \left\{\begin{aligned}1 & & x = 0 \\0 & & x = 1 \end{aligned}\right.</script>零膨胀负二项分布的概率密度函数为：<script type="math/tex; mode=display">f_{Z I N B}(m \mid \theta, r, p)=\theta \cdot I_{0}(m)+(1-\theta) \cdot f_{N B}(m \mid r, p)</script></li></ul><p>式中，$\theta$可以认为是真实的基因表达值被观测为0的概率。</p><h4 id="reference"><a href="#reference" class="headerlink" title="reference:"></a>reference:</h4><p><a href="https://zhuanlan.zhihu.com/p/95299303">单细胞RNA-seq数据分布的选择</a><br><a href="https://blog.csdn.net/goodljq/article/details/117118810">单细胞数据分析工具scvi介绍</a></p>]]></content>
      
      
      <categories>
          
          <category> 论文总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一年啦</title>
      <link href="/2022/10/13/%E4%B8%80%E5%B9%B4%E5%95%A6/"/>
      <url>/2022/10/13/%E4%B8%80%E5%B9%B4%E5%95%A6/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=115502&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><hr><p>今天收到了腾讯云催我续费服务器的短信，意识到这个博客开办到现在已经有一年时间啦！虽然现在还不是严格到了一年的时间，先占个坑，陆陆续续的写一些，减少一些后边的工作量。</p><hr><p>一年的时间，写了十几篇文章，大概字数也能勉强的过万。</p><p>去年在开办这个博客的时候，我的第一想法是能够用一个相对很低的成本在互联网上留下自己的足迹，拥有一个属于自己的域名像是有了一个秘密基地，这太酷了。而且，也可以记录一下自己的生活，不管他是好还是坏，同时记录一下自己的学习过程，不管他是快还是慢。</p><p>如今一年过去了。从研一到研二，从21岁到22岁，年龄更加迅猛的冲着30岁往前跑。总的来说，在过去的一年里还是有很多事情发生的。也许能从之前的文章里边看个大概。这些事情很少HE，偶尔BE，大多数时候都是无疾而终。生活也许就是这样，偶尔快乐，偶尔失落，大多数时候平平淡淡。</p><hr><p>复盘这一年所有的事情，按照惯例应该是在新年才做的事情。在临近生日的时候，我想谈一谈过去一年的经历给我的一些启发。</p><p>过去的一年发生的很多事情，即使是以我过去二十几年的人生经历作为背景也完全称得上是波澜壮阔。而所有的一切事情给我的最大的启发就是千万别硬凑。这个硬凑不是说我们不要将就，在达不到自己的标准之前一定不要接受什么事物。某种程度上，这里的硬凑大概是不将就的反义词，我想告诫自己的是，在不达到某些事情的标准之前，不要硬凑。走到今天，很大一部分焦虑都是来自于同龄人的状况——朋友圈中实在是很容易得知同龄人的各种喜讯，不自觉地就多了几分焦虑。时代的滚滚浪潮不断，看着别人在浪花翻滚中走向潮头，而我的浪在哪里？当他真的来临，我是否已经做好了准备？几次碰的头破血流的经历让我明白了，在积蓄好力量等到自己的浪潮之前，不必硬凑。莫听穿林打叶声，何妨吟啸且徐行。竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生。</p><p>如果说还有什么其他的启示的话，那就是与我无关和与你无关。这两句话真的可以迅速地减少各种庸人自扰。社交真的是一件很难的事情。人与人的悲欢并不相同，裸猿之间很难做到真正的感同身受，而与我无关可以迅速的减少各种因为好奇，亦或者是礼貌等因素造成的无用的交流和情感消耗，而这与真正的亲密关系并不冲突，因为常常无需多说。同时，与你无关则极大的减少了因为其他人的注视而带来的压力，这种压力往往是不必要的，即使人有自己的社会属性，也应保有属于自己的个性，而这些个性所发挥的角落不应受别人的窥探和横加指责，与你无关则清楚的告诉了那些审视的目光，你越过了我的私人边界，这些事情我不希望你发表意见。</p><hr><p>时间越来越临近生日这天，可是学校还在封校。几乎可以确定地，今年的生日要在宿舍吃盒饭度过了。买了高大师的艾尔和拉格，到时候在宿舍一醉方休呀。哦，还怀旧的买了好利来的半熟芝士当生日蛋糕，可是我不是当年那个小逼崽子咧，也回不到十八岁那个生日咧。</p><hr><p>命运总是曲折离奇，像红日之火，点燃真的我，结伴行千山也定能踏过。生活总是在继续向前，新的一岁，继续珍惜生活中每个熠熠发光的瞬间，像夏花一样绚烂的绽放。</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>位运算与正则表达式</title>
      <link href="/2022/09/26/%E4%BD%8D%E8%BF%90%E7%AE%97%E4%B8%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2022/09/26/%E4%BD%8D%E8%BF%90%E7%AE%97%E4%B8%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><p>位运算是一种计算机对于二进制数据的运算。</p><h4 id="位运算的几种运算符"><a href="#位运算的几种运算符" class="headerlink" title="位运算的几种运算符"></a>位运算的几种运算符</h4><p>位运算的几种运算符：下边写的很多二进制数处于方便都只写了一个字节，8位，因为大多数运算的举例都是按照正数举例的，所以对运算结果没什么影响，但实际上，int类型在c++中占四个字节，32位。</p><ul><li>$\And$:  与运算，当两位都为1时，运算的结果为1，否则为0。 例: $3 \And 5$，计算机在计算时先将其转化为二进制，即$0000 \; 0011 \And 0000 \; 0101$，与运算的结果就是二进制数对于每一位相与后的结果，即$0000 \; 0001$，转化为十进制就是$1$。</li><li>$ | $ ：或运算，当两位同时为0时，结果为0，否则运算的结果为1。 同样的例子: $3 \; | \; 5$，还是先将十进制转换为二进制，在每一位上做或运算。最后得到的结果是$0000 \; 0111$，转化为十进制就是$7$。</li><li>^ ：异或运算，当两位相同时，结果为0，否则结果为1。例: $3 \; $ ^ $ \; 5$，转化为二进制后，异或运算的结果是$0000 \; 0110$，转化为十进制就是$6$。</li><li>~：取反运算，将二进制数的每一位取反。例: $~3$，转化为二进制后，取反运算的结果是$1111 \; 1100$，转化为十进制就是$-4$。</li><li>‘&lt;&lt;’：左移，将二进位全部左移若干位，高位丢弃，低位补0。例: $3 \; &lt;&lt; \; 2$，转化为二进制后，左移两位的结果是$0000 \; 1100$，转化为十进制就是$12$。</li><li>‘&gt;&gt;’: 右移，将二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移）。例: $3 \; &gt;&gt; \; 2$，转化为二进制后，右移两位的结果是$0000 \; 0000$，转化为十进制就是$0$。而对于负数来说，就根据编译器的不同有所不同了，在c++中，右移是以补码形式参与运算，正数左右移、负数左移均以补 0 操作（符号位保持不变），负数右移以补 1 操作（符号位不变）。对于$-3 \; &gt;&gt; \; 2$，先取-3的补码，即$1111 \; 1111 \; 1111 \; 1111 \; 1111 \; 1111 \; 1111\; 1101$，算数右移两位直接在补码的前边补1，运算的的结果是$1111 \; 1111$(中间省略掉了很多组1)，由补码转换为原码，即$1000 \; 0001$，转化为十进制就是$-1$。逻辑补码则是在补码的前边补0，运算的结果是$0011 \; 1111$(中间同样省略掉了很多组1)，转化为十进制就是$1073741823$，就是2。</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/*在c++中，逻辑右移和算数右移公用一个运算符，>>，由编译器决定使用逻辑右移还是算术右移，当运算数的类型为unsigned时，使用逻辑右移，当运算数的类型为signed时，使用算数右移。*/</span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;bitset></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0b11</span><span class="token punctuation">;</span> <span class="token keyword">int</span> logit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span>a <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">int</span> cal <span class="token operator">=</span> a <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">bitset</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">bitset</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>logit<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>logit<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 逻辑右移</span> cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">bitset</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>cal<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>cal<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 算数右移</span> cout <span class="token operator">&lt;&lt;</span> logit <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> cout <span class="token operator">&lt;&lt;</span> cal <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* out: 11111111111111111111111111111101     -3     00111111111111111111111111111111     11111111111111111111111111111111     1073741823     -1 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="bit-xor，bit-or和bit-and"><a href="#bit-xor，bit-or和bit-and" class="headerlink" title="bit_xor，bit_or和bit_and"></a>bit_xor，bit_or和bit_and</h4><p><code>bit_xor</code>，<code>bit_or</code>和<code>bit_and</code>是c++20的新特性，作用是对两个数组进行迭代的异或，或和与运算，并返回结果，与<code>transform</code>函数结合返回一个新的数组，新数组的每个元素是对应元素的异或，或和与运算结果。用法如下:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;functional></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">c</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">transform</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">bit_xor</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* out: 0 1 0 0 0 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>bit_and</code>和<code>bit_or</code>的用法相同：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;functional></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">c</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">transform</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">bit_and</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* out: 1 0 3 4 5 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>bit_xor</code>同样也可以与<code>accumulate</code>函数结合，统计数组中出现次数为奇数次的元素，用法如下:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;functional></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;numeric></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">bit_xor</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* out: 5 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上边的这段代码等价于：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        res <span class="token operator">^=</span> i<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样，我们就可以秒了leetcode的136题<a href="https://leetcode.cn/problems/single-number/">只出现一次的数字</a></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220926111707.png" alt="只出现一次的数字"></p><p>这道题一眼看上去可以用哈希表来做：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">singleNumber</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">auto</span> iter <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>iter <span class="token operator">==</span> mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                mp<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                iter<span class="token operator">-></span>second <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> mp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>second <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> p<span class="token punctuation">.</span>first<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>但是哈希表额外的占用了$O(n)$的空间，如果使用位运算，我们可以这样做：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">singleNumber</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">bit_xor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样，时间复杂度为$O(n)$，而且不用使用额外的空间。</p><p>另一道可以使用位运算解决的题目是<a href="https://leetcode.cn/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/">二进制中1的个数</a>。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221018093410.png" alt="二进制中1的个数"></p><p>这道题第一眼看上去的话，思路就是把二进制数转化为字符串，然后遍历字符串去找到其中1的个数。但是，一个实际的问题是，<code>to_string()</code>存入字符串的是十进制的数字。而这样做显然也不够优雅，背离了题目的本意。因此，考虑使用位运算的方法来解决。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">hammingWeight</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            res<span class="token operator">++</span><span class="token punctuation">;</span>            n <span class="token operator">=</span> n <span class="token operator">&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种做法是比较容易想到的做法，每次将n减1与n相与，都可以消去最右边的1，这样循环直至将n变为0，就可以得到1的个数。这种做法的时间复杂度是$O(1)$，因为最多循环32次。</p><p><a href="https://leetcode.cn/problems/k-th-symbol-in-grammar/">第k个语法符号</a>也是一道需要使用位运算来解决的题目。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020094305.png" alt="第k个语法符号"></p><p>这道题可以看作是一个完全二叉树的构造：</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020094812.png" alt="图解"></p><p>从图中，我们可以看出，一个节点的值取决于它的父节点的值，而当这个节点为父节点的左子节点时，它的值与父节点的值相同，当这个节点为父节点的右子节点时，它的值与父节点的值相异。这样我们只需要判断这个节点是左子节点还是右子节点，以及它的父节点的值即可。因此，我们可以使用递归的方法来解决这道题。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">kthGrammar</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 右子节点</span>            <span class="token keyword">return</span> <span class="token function">kthGrammar</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 左子节点</span>            <span class="token keyword">return</span> <span class="token function">kthGrammar</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用位运算可以简化这个代码，<code>kthGrammar(n - 1, (k + 1) / 2) == 0 ? 0 : 1</code>这个三元运算符可以直接使用异或运算来代替。简化后的代码如下。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">kthGrammar</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>k <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token function">kthGrammar</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>正则表达式是另一种奇技淫巧，用来检查一个串中是否含有某种子串，将匹配的子串替换或从某个串中取出符合要求的子串。</p><h4 id="怎么去写一个正则表达式"><a href="#怎么去写一个正则表达式" class="headerlink" title="怎么去写一个正则表达式"></a>怎么去写一个正则表达式</h4><h5 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h5><ol><li><code>[ABC]</code> 表示匹配<code>[ABC]</code>中的所有字符。</li><li><code>[^ABC]</code> 表示匹配除了<code>[ABC]</code>之外的所有字符。</li><li><code>[A-Z]</code> 表示匹配一个区间，匹配所有的大写字母。</li><li><code>.</code> 表示匹配除了换行符之外的所有字符。</li><li><code>[\s\S]</code> 表示匹配所有的字符。其中，<code>[\s]</code>表示匹配所有空白符，包括换行，<code>[\S]</code>表示匹配所有非空白符，不包括换行。</li><li><code>[\w]</code> 表示匹配所有的字母，数字和下划线。</li></ol><h5 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h5><ol><li><code>*</code>表示匹配前面的字符0次或多次。</li><li><code>+</code>表示匹配前面的字符1次或多次。</li><li><code>?</code>表示匹配前边的字符0次或1次。</li><li><code>|</code>指明两项之间的一个选择，例如<code>a|b</code>表示匹配a或b。</li><li><code>$</code>表示匹配输入字符串的结尾位置。</li><li><code>()</code>表示一个子表达式的开始和结束位置。</li><li><code>\</code> 转义字符，在表示特殊字符时统统要使用转义字符加以修饰。</li></ol><h5 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h5><ol><li><code>*</code>表示匹配前面的字符0次或多次。</li><li><code>+</code>表示匹配前面的字符1次或多次。</li><li><code>?</code>表示匹配前边的字符0次或1次。</li><li><code>&#123;n&#125;</code>表示匹配前面的字符n次。</li><li><code>&#123;n,&#125;</code>表示匹配前面的字符至少n次。</li><li><code>&#123;n,m&#125;</code>表示匹配前面的字符至少n次，至多m次。</li></ol><h4 id="正则表达式在python的基本用法"><a href="#正则表达式在python的基本用法" class="headerlink" title="正则表达式在python的基本用法"></a>正则表达式在python的基本用法</h4><p>python中提供了使用正则表达式的re模块。</p><ul><li><code>re.match()</code>函数：尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。若匹配成功，返回模式所占的区间。<pre class="line-numbers language-python" data-language="python"><code class="language-python">re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># pattern: 匹配的正则表达式</span><span class="token comment"># string: 要匹配的字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><code>re.search()</code>函数：扫描整个字符串并返回第一个成功的匹配。<pre class="line-numbers language-python" data-language="python"><code class="language-python">re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># pattern: 匹配的正则表达式</span><span class="token comment"># string: 要匹配的字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><code>re.sub()</code>函数：替换字符串中的匹配项。<pre class="line-numbers language-python" data-language="python"><code class="language-python">re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> repl<span class="token punctuation">,</span> string<span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># repl: 替换的字符串</span><span class="token comment"># count: 模式匹配后的最大替换次数，默认0表示替换所有的匹配</span><span class="token comment"># 返回替换后的字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>re.compile()</code>函数：用于编译正则表达式生成一个正则表达式的对象，供match()和search()这两个函数使用。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># pattern: 正则表达式的字符串或原生字符串表示</span><span class="token comment"># flags: 可选，表示匹配模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>上文所述的<code>flags</code>的具体参数如下：</p><ol><li><code>re.I</code> 忽略大小写</li><li><code>re.M</code> 多行模式</li><li><code>re.S</code> 即为<code>.</code>并且包括换行符在内的任意字符（<code>.</code>不包括换行符）</li><li><code>re.L</code> 表示特殊字符集 <code>\w, \W, \b, \B, \s, \S</code> 依赖于当前环境</li><li><code>re.U</code> 表示特殊字符集 <code>\w, \W, \b, \B, \d, \D, \s, \S</code> 依赖于Unicode字符属性数据库</li><li><code>re.X</code> 为了增加可读性，忽略空格和<code>#</code>后面的注释</li></ol></li></ul><hr><p>突然发现正则表达式这个坑比我想象的要大上不少，先干活，接下来有时间再慢慢看。</p>]]></content>
      
      
      <categories>
          
          <category> 日常技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指offer</title>
      <link href="/2022/09/22/%E5%89%91%E6%8C%87offer/"/>
      <url>/2022/09/22/%E5%89%91%E6%8C%87offer/</url>
      
        <content type="html"><![CDATA[<p>刷题到现在，稍微有了一点点手感，所以从今天开始，重点要刷一刷<a href="https://leetcode.cn/problem-list/xb9nqhhg/">剑指offer</a>了。这里将记录在刷剑指offer的过程中，一些自己的题解。</p><h4 id="1-5"><a href="#1-5" class="headerlink" title="1 - 5"></a>1 - 5</h4><ul><li><a href="https://leetcode.cn/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/">剑指offer03. 数组中重复的数字</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922144755.png" alt="数组中重复的数字"></p><ul><li>题解：</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">findRepeatNumber</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">auto</span> iter <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>iter <span class="token operator">!=</span> mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> p<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            mp<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>没什么好说的，直接构建哈希表就可以秒了。<br>但是思考一下是不是还有更节省空间开销的方法呢。是有的。直接在原地对数组进行修改，因为数组中的数字一定在$(0, n-1)$范围内，所以，可以用数组中数字的下标进行映射，这样就节省了构建哈希表所需的空间开销。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">findRepeatNumber</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 时间复杂度On,空间复杂度On</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/">剑指offer04.二维数组的查找</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922145520.png" alt="二维数组的查找"></p><ul><li>题解：</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">bool</span> <span class="token function">findNumberIn2DArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> matrix<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span>  <span class="token number">0</span> <span class="token operator">||</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 确定在这个区间中进行二分查找</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这题主要考的是二分法，从头遍历二维数组的行，每次判断一下要找的数是否就在这一行。确定行之后用二分查找就行。这里的二分，是要查找是否值存在，对于找左边界，右边界，和值是否存在，二分都有不同的写法，如下所示。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 坚持左闭右开</span><span class="token keyword">int</span> <span class="token function">binary_search</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">left_bound</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> left<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">right_bound</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> right <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// 这里返回 right - 1 是因为左闭右开</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>实现左右边界的查找，区别只在于，找到一个跟目标值相等的值之后，是要将区间向左收缩还是向右收缩，若是寻找右边界，就向右收缩，改变left的值，若是寻找左边界，就向左收缩，改变right的值。<br>二分查找还有一种类型，就是找到数组中距目标值最近的那个下标。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">nearest</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> left<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">==</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">-</span> target<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">abs</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> target<span class="token punctuation">)</span> <span class="token operator">?</span> left <span class="token operator">:</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其实还是原汁原味的二分查找，只是在最后返回的时候，如果没有找到target，返回我们最终收缩到的那个区间即可。</p><ul><li><a href="https://leetcode.cn/problems/ti-huan-kong-ge-lcof/">剑指offer05.替换空格</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922152358.png" alt="替换空格"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    string <span class="token function">replaceSpace</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        string res<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                res <span class="token operator">+=</span> <span class="token string">"%20"</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                res <span class="token operator">+=</span> p<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>首先想到的不容易翻车的解决方案是用一个新的字符串，遍历老字符串，不是空格就复制，如果检测到空格则在新字符串加入”%20”。这样的时间复杂度为$O(n)$，空间复杂度是$O(n)$。为了节省空间复杂度，想一下原地修改的方案，借鉴自代码随想录。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    string <span class="token function">replaceSpace</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 在原字符串上进行修改,从后往前修改</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> o_size <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 扩充原字符串的空间</span>        s<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> n_size <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> o_size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> n_size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">,</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span>                s<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>                s<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'%'</span><span class="token punctuation">;</span>                j <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/cong-wei-dao-tou-da-yin-lian-biao-lcof/">剑指offer06.从尾到头打印链表</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922153201.png" alt="从尾到头打印链表"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">reversePrint</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// if(head == nullptr) return &#123;&#125;;</span>        <span class="token comment">// stack&lt;ListNode*> s;</span>        <span class="token comment">// vector&lt;int> res;</span>        <span class="token comment">// while(head != nullptr) &#123;</span>        <span class="token comment">//     s.push(head);</span>        <span class="token comment">//     head = head->next;</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// while(!s.empty()) &#123;</span>        <span class="token comment">//     auto node = s.top();</span>        <span class="token comment">//     s.pop();</span>        <span class="token comment">//     res.push_back(node->val);</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// return res;</span>        <span class="token comment">// 递归 后序遍历</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res<span class="token punctuation">;</span>        <span class="token function">reversePrint</span><span class="token punctuation">(</span>head<span class="token operator">-></span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>        res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>head<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>常规思路，栈或者递归。没什么好说的。</p><ul><li><a href="https://leetcode.cn/problems/zhong-jian-er-cha-shu-lcof/">剑指offer07.重建二叉树</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922153348.png" alt="重建二叉树"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    TreeNode<span class="token operator">*</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> preorder<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> inorder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> inorder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>        <span class="token comment">// 找到根节点</span>        TreeNode<span class="token operator">*</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TreeNode</span><span class="token punctuation">(</span><span class="token operator">*</span>preorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 利用中序数组找到左子树和右子树,指针以左是左子树,右是右子树</span>        <span class="token keyword">auto</span> iter <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>inorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inorder<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> root<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">iLeft</span><span class="token punctuation">(</span>inorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iter<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">iRight</span><span class="token punctuation">(</span>iter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> inorder<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 划分前序数组</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> iLeft<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">pLeft</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> preorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">pRight</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">,</span> preorder<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 递归重建左子树和右子树</span>        root<span class="token operator">-></span>left <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>pLeft<span class="token punctuation">,</span> iLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>        root<span class="token operator">-></span>right <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>pRight<span class="token punctuation">,</span> iRight<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> root<span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这题确实是把我难到了。。。复习一下前序遍历和中序遍历的顺序，前序遍历是根左右，中序遍历是左右根。主要是通过前序遍历找到当前的根节点，然后再通过中序遍历划分出左子树和右子树，再用划分出的左子树和右子树的大小在前序遍历的数组中划分出左子树和右子树，最后递归的解决问题。</p><h4 id="6-10"><a href="#6-10" class="headerlink" title="6 - 10"></a>6 - 10</h4><ul><li><a href="https://leetcode.cn/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/">剑指offer09.用两个栈实现队列</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922160412.png" alt="用两个栈实现队列"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">CQueue</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span><span class="token operator">:</span>    stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> in<span class="token punctuation">,</span> out<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">in2out</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            out<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            in<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">CQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">appendTail</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        in<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">deleteHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">in2out</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> value <span class="token operator">=</span> out<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        out<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> value<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ez题，重要的是快速读题。这题的意思是用两个栈实现队列，队列是先进先出，栈是先进后出，所以我们可以用一个栈来存储数据，另一个栈来输出数据，当输出栈为空时，将输入栈的数据全部倒入输出栈，这样输出栈的数据就是先进先出的顺序了。</p><ul><li><a href="https://leetcode.cn/problems/fei-bo-na-qi-shu-lie-lcof/">剑指offer10.斐波那契数列 青蛙跳</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922160846.png" alt="斐波那契数列"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res <span class="token operator">%</span> <span class="token number">1000000007</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>陈年老题了，直接递归，好吧，吃了个tl。<br>正经的用dp做一下，时间复杂度为$O(n)$,空间复杂度为$O(1)$。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> pre <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> cur<span class="token punctuation">;</span>            cur <span class="token operator">=</span> <span class="token punctuation">(</span>cur <span class="token operator">+</span> pre<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000000007</span><span class="token punctuation">;</span>            pre <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">return</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922162429.png" alt="青蛙跳"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">numWays</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>        <span class="token keyword">int</span> pre <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> cur<span class="token punctuation">;</span>            cur <span class="token operator">=</span> <span class="token punctuation">(</span>pre <span class="token operator">+</span> cur<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000000007</span><span class="token punctuation">;</span>            pre <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="11-15"><a href="#11-15" class="headerlink" title="11 - 15"></a>11 - 15</h4><ul><li><a href="https://leetcode.cn/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/">剑指offer11.旋转数组的最小数字</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220922163349.png" alt="旋转数组的最小数字"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">minArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> numbers<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> numbers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>看评论区说，似乎还可以用二分法。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">minArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> numbers<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                right <span class="token operator">=</span> mid<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> numbers<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                right<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> numbers<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里用二分法主要是为了表示自己知道可以利用部分有序的特性降低时间复杂度，好吧，面向面试编程和面向ac编程。</p><hr><ul><li><a href="https://leetcode.cn/problems/design-linked-list/">T707.设计链表</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220923101553.png" alt="设计链表"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyLinkedList</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">struct</span> <span class="token class-name">_ListNode</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> val<span class="token punctuation">;</span>        _ListNode<span class="token operator">*</span> next<span class="token punctuation">;</span>        <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">,</span> _ListNode<span class="token operator">*</span> next<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    _ListNode<span class="token operator">*</span> _dummy<span class="token punctuation">;</span>    <span class="token keyword">int</span> _size<span class="token punctuation">;</span>    <span class="token function">MyLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        _dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">>=</span> _size<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> cur<span class="token operator">-></span>val<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">addAtHead</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> o_head <span class="token operator">=</span> _dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>        _dummy<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        _dummy<span class="token operator">-></span>next<span class="token operator">-></span>next <span class="token operator">=</span> o_head<span class="token punctuation">;</span>        _size<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">addAtTail</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        cur<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        _size<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">addAtIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">></span> _size<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">auto</span> buffer <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        cur<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        cur<span class="token operator">-></span>next<span class="token operator">-></span>next <span class="token operator">=</span> buffer<span class="token punctuation">;</span>        _size<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">deleteAtIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">>=</span> _size<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        cur<span class="token operator">-></span>next <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>        _size<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>插播一道每日一题设计链表，我觉得这个题还是很有意思的，每当自信满满提交的时候总会因为各种想不到的边界条件吃一发wa。</p><hr><p>再插播一道不同的二叉搜索树，这道题既有树又有回溯，第一时间没什么思路。</p><ul><li>T95 .<a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">不同的二叉搜索树2</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220929161411.png" alt="不同的二叉搜索树2"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>start <span class="token operator">></span> end<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token keyword">nullptr</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                vector<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> allTrees<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 获取所有的左子树</span>            vector<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> left_trees <span class="token operator">=</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 获取所有的右子树</span>            vector<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> right_trees <span class="token operator">=</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 拼接</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> left <span class="token operator">:</span> left_trees<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> right <span class="token operator">:</span> right_trees<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    TreeNode<span class="token operator">*</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TreeNode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                    root<span class="token operator">-></span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>                    root<span class="token operator">-></span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>                    allTrees<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> allTrees<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    vector<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> <span class="token function">generateTrees</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><ul><li><a href="https://leetcode.cn/problems/jian-sheng-zi-lcof/">剑指offer14.剪绳子</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020103321.png" alt="剑指offer14.剪绳子"></p><p>找规律题，最优的拆分方案一定是尽可能多的拆出3来。</p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">cuttingRope</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>                <span class="token comment">//尽可能多的将拆成3</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> n <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>m <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>m <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> n <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/">剑指offer15.二进制中1的个数</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020103552.png" alt="剑指offer15.二进制中1的个数"></p><p>使用位运算。每次将n减1与n相与，都可以消去最右边的1，这样循环直至将n变为0，就可以得到1的个数。这种做法的时间复杂度是$O(1)$，因为最多循环32次</p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">hammingWeight</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            res<span class="token operator">++</span><span class="token punctuation">;</span>            n <span class="token operator">=</span> n <span class="token operator">&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="16-20"><a href="#16-20" class="headerlink" title="16 - 20"></a>16 - 20</h4><ul><li><a href="https://leetcode.cn/problems/shu-zhi-de-zheng-shu-ci-fang-lcof/">剑指offer16.数值的整数次方</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020103739.png" alt="剑指offer16.数值的整数次方"></p><ul><li>题解</li></ul><p>最容易想到的那一定是：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">double</span> <span class="token function">myPow</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>但是这样容易找不到工作。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">double</span> <span class="token function">quickPow</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token function">quickPow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> y <span class="token operator">*</span> y <span class="token operator">:</span> y <span class="token operator">*</span> y <span class="token operator">*</span> x<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">double</span> <span class="token function">myPow</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function">quickPow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token function">quickPow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用递归的思想可以减小一定的问题规模，快速幂在不考虑大数的情况下还是很好实现的。</p><ul><li><a href="https://leetcode.cn/problems/da-yin-cong-1dao-zui-da-de-nwei-shu-lcof/">剑指offer17.打印从1到最大的n位数</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104123.png" alt="剑指offer17.打印从1到最大的n位数"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">printNumbers</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">int</span> max_n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            max_n <span class="token operator">+=</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// res.push_back(max_n);</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max_n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/shan-chu-lian-biao-de-jie-dian-lcof/">剑指offer18.删除链表的节点</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104332.png" alt="剑指offer18.删除链表的节点"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * Definition for singly-linked list. * struct ListNode &#123; *     int val; *     ListNode *next; *     ListNode(int x) : val(x), next(NULL) &#123;&#125; * &#125;; */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    ListNode<span class="token operator">*</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        ListNode<span class="token operator">*</span> dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dummy<span class="token operator">-></span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">auto</span> pre <span class="token operator">=</span> dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>val <span class="token operator">==</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                pre<span class="token operator">-></span>next <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>                <span class="token keyword">return</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>                cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-25"><a href="#21-25" class="headerlink" title="21 - 25"></a>21 - 25</h4><ul><li><a href="https://leetcode.cn/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/">剑指offer21.调整数组顺序使奇数位于偶数前面</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104457.png" alt="剑指offer21.调整数组顺序使奇数位于偶数前面"></p><ul><li>题解</li></ul><p>可以使用双数组，也可以使用双指针。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">exchange</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 双数组</span>        <span class="token comment">// vector&lt;int> even;</span>        <span class="token comment">// vector&lt;int> odd;</span>        <span class="token comment">// for(int i = 0; i &lt; nums.size(); i++) &#123;</span>        <span class="token comment">//     if(nums[i] % 2 == 0) &#123;</span>        <span class="token comment">//         even.push_back(nums[i]);</span>        <span class="token comment">//     &#125;</span>        <span class="token comment">//     else &#123;</span>        <span class="token comment">//         odd.push_back(nums[i]);</span>        <span class="token comment">//     &#125;</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// for(int i = 0; i &lt; even.size(); i++) &#123;</span>        <span class="token comment">//     odd.push_back(even[i]);</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// return odd;</span>        <span class="token comment">// 双指针</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                right<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>                right<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof/">剑指offer22.链表中倒数第k个节点</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104606.png" alt="剑指offer22.链表中倒数第k个节点"></p><ul><li>题解</li></ul><p>双指针的经典应用——快慢指针。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * Definition for singly-linked list. * struct ListNode &#123; *     int val; *     ListNode *next; *     ListNode(int x) : val(x), next(NULL) &#123;&#125; * &#125;; */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    ListNode<span class="token operator">*</span> <span class="token function">getKthFromEnd</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> left <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">auto</span> right <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            right <span class="token operator">=</span> right<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            left <span class="token operator">=</span> left<span class="token operator">-></span>next<span class="token punctuation">;</span>            right <span class="token operator">=</span> right<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> left<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/fan-zhuan-lian-biao-lcof/">剑指offer24.反转链表</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104724.png" alt="剑指offer24.反转链表"></p><ul><li>题解</li></ul><p>栈的方式太常规，而且要使用额外的存储空间，这里就不再赘述。写一种遍历的方式。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    ListNode<span class="token operator">*</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        ListNode<span class="token operator">*</span> pre <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">auto</span> buffer <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>            cur<span class="token operator">-></span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>            pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>            cur <span class="token operator">=</span> buffer<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> pre<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/he-bing-liang-ge-pai-xu-de-lian-biao-lcof/">剑指offer25.合并两个排序的链表</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020104858.png" alt="剑指offer25.合并两个排序的链表"></p><ul><li>题解</li></ul><p>同样是经典的双指针问题。好多链表题都可以用双指针来做。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    ListNode<span class="token operator">*</span> <span class="token function">mergeTwoLists</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> l1<span class="token punctuation">,</span> ListNode<span class="token operator">*</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        ListNode<span class="token operator">*</span> dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ListNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> dummy<span class="token punctuation">;</span>        <span class="token comment">// 双指针</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l1 <span class="token operator">||</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>l1 <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">&amp;&amp;</span> l2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                cur<span class="token operator">-></span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>                <span class="token keyword">return</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>l1 <span class="token operator">&amp;&amp;</span> l2 <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                cur<span class="token operator">-></span>next <span class="token operator">=</span> l1<span class="token punctuation">;</span>                <span class="token keyword">return</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>l1<span class="token operator">-></span>val <span class="token operator">&lt;=</span> l2<span class="token operator">-></span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                cur<span class="token operator">-></span>next <span class="token operator">=</span> l1<span class="token punctuation">;</span>                l1 <span class="token operator">=</span> l1<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                cur<span class="token operator">-></span>next <span class="token operator">=</span> l2<span class="token punctuation">;</span>                l2 <span class="token operator">=</span> l2<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="26-30"><a href="#26-30" class="headerlink" title="26 - 30"></a>26 - 30</h4><ul><li><a href="https://leetcode.cn/problems/shu-de-zi-jie-gou-lcof/">剑指offer26.树的子结构</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020105052.png" alt="剑指offer26.树的子结构"></p><ul><li>题解</li></ul><p>整体逻辑就是，先判断A和B的根节点是否相同，若不同，则判断B是否是A的左子树或者右子树的子结构，若相同，则判断B的左子树和右子树是否和A的左子树和右子树相同，若不同，则继续判断B是否是A的左子树或者右子树的子结构。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * Definition for a binary tree node. * struct TreeNode &#123; *     int val; *     TreeNode *left; *     TreeNode *right; *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125; * &#125;; */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> A<span class="token punctuation">,</span> TreeNode<span class="token operator">*</span> B<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>B <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>A <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> A<span class="token operator">-></span>val <span class="token operator">==</span> B<span class="token operator">-></span>val <span class="token operator">&amp;&amp;</span> <span class="token function">dfs</span><span class="token punctuation">(</span>A<span class="token operator">-></span>left<span class="token punctuation">,</span> B<span class="token operator">-></span>left<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">dfs</span><span class="token punctuation">(</span>A<span class="token operator">-></span>right<span class="token punctuation">,</span> B<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">bool</span> <span class="token function">isSubStructure</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> A<span class="token punctuation">,</span> TreeNode<span class="token operator">*</span> B<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>A <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">||</span> B <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isSubStructure</span><span class="token punctuation">(</span>A<span class="token operator">-></span>left<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isSubStructure</span><span class="token punctuation">(</span>A<span class="token operator">-></span>right<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/er-cha-shu-de-jing-xiang-lcof/">剑指offer27.二叉树的镜像</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020105430.png" alt="剑指offer27.二叉树的镜像"></p><ul><li>题解</li></ul><p>前序遍历，交换左右子树即可。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    TreeNode<span class="token operator">*</span> <span class="token function">mirrorTree</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> root<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">traverse</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>root<span class="token operator">-></span>right<span class="token punctuation">,</span> root<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/dui-cheng-de-er-cha-shu-lcof/">剑指offer28.对称的二叉树</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020105557.png" alt="剑指offer28.对称的二叉树"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> l<span class="token punctuation">,</span> TreeNode<span class="token operator">*</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">&amp;&amp;</span> r <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">||</span> r <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> l<span class="token operator">-></span>val <span class="token operator">==</span> r<span class="token operator">-></span>val <span class="token operator">&amp;&amp;</span> <span class="token function">dfs</span><span class="token punctuation">(</span>l<span class="token operator">-></span>left<span class="token punctuation">,</span> r<span class="token operator">-></span>right<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">dfs</span><span class="token punctuation">(</span>l<span class="token operator">-></span>right<span class="token punctuation">,</span> r<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">bool</span> <span class="token function">isSymmetric</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left<span class="token punctuation">,</span> root<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/shun-shi-zhen-da-yin-ju-zhen-lcof/">剑指offer29.顺时针打印矩阵</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020105701.png" alt="剑指offer29.顺时针打印矩阵"></p><ul><li>题解</li></ul><p>主站的mid，到剑指就成easy了。模拟，主要是划定边界，每次走完一条边之后都要收缩边界，同时判断是否会越界。若越界，则退出循环。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">spiralOrder</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 检查边界,每走一次，将相对应的边界向内缩</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res<span class="token punctuation">;</span>        <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> bottom <span class="token operator">=</span> matrix<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> right <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> left<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>top <span class="token operator">></span> bottom<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> top<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> bottom<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">--</span>right <span class="token operator">&lt;</span> left<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> right<span class="token punctuation">;</span> i <span class="token operator">>=</span> left<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">--</span>bottom <span class="token operator">&lt;</span> top<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> bottom<span class="token punctuation">;</span> i <span class="token operator">>=</span> top<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>left <span class="token operator">></span> right<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/bao-han-minhan-shu-de-zhan-lcof/">剑指offer30.包含min函数的栈</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221020102408.png" alt="剑指offer30.包含min函数的栈"></p><p>设计类的题目，这题如果可以使用标准库的<code>stack</code>的话将十分简单，每次<code>push</code>之前，将之前的最小值放进去，<code>pop</code>的时候也一起<code>pop</code>，这样就可以保证每次<code>min</code>的时候都是$O(1)$的时间复杂度。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MinStack</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span><span class="token operator">:</span>    stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> elements<span class="token punctuation">;</span>    <span class="token keyword">int</span> min_element <span class="token operator">=</span> INT_MAX<span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">/** initialize your data structure here. */</span>    <span class="token function">MinStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>      <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>min_element<span class="token punctuation">)</span><span class="token punctuation">;</span>        min_element <span class="token operator">=</span> min_element <span class="token operator">></span> x <span class="token operator">?</span> x <span class="token operator">:</span> min_element<span class="token punctuation">;</span>        elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        elements<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        min_element <span class="token operator">=</span> elements<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        elements<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> elements<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> min_element<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/** * Your MinStack object will be instantiated and called as such: * MinStack* obj = new MinStack(); * obj->push(x); * obj->pop(); * int param_3 = obj->top(); * int param_4 = obj->min(); */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>但是显然我们在面试的时候不应该向面试官展示强大的api调用能力。所以我们尝试用链表实现。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MinStack</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">struct</span> <span class="token class-name">_ListNode</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> val<span class="token punctuation">;</span>        <span class="token keyword">int</span> min<span class="token punctuation">;</span>        _ListNode<span class="token operator">*</span> next<span class="token punctuation">;</span>        <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    _ListNode<span class="token operator">*</span> _dummy<span class="token punctuation">;</span>    <span class="token keyword">int</span> _size<span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">/** initialize your data structure here. */</span>    <span class="token function">MinStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        _dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> INT_MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>        _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        cur<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">_ListNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>min<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        _size<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        cur<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>        _size<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> cur<span class="token operator">-></span>val<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> cur <span class="token operator">=</span> _dummy<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> cur<span class="token operator">-></span>min<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/** * Your MinStack object will be instantiated and called as such: * MinStack* obj = new MinStack(); * obj->push(x); * obj->pop(); * int param_3 = obj->top(); * int param_4 = obj->min(); */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>自定义一个链表节点的结构体，每个节点中储存当前节点的值和当前节点之前的最小值，保证<code>min</code>的时间复杂度为$O(1)$。</p><h4 id="31-35"><a href="#31-35" class="headerlink" title="31 - 35"></a>31 - 35</h4><ul><li><a href="https://leetcode-cn.com/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/">剑指offer31.栈的压入、弹出序列</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221024104452.png" alt="剑指offer31.栈的压入、弹出序列"></p><p>这道题目的思路很简单，简单的模拟一下就好。我们维护一个栈，每次将<code>pushed</code>中的元素压入栈中，然后判断栈顶元素是否等于<code>popped</code>中的元素，如果相等则弹出，否则继续压入，直到<code>pushed</code>中的元素全部压入栈中，然后判断栈是否为空即可。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">bool</span> <span class="token function">validateStackSequences</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> pushed<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> popped<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> s<span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> pushed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> popped<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/">剑指offer32 - I.从上到下打印二叉树I</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221024105245.png" alt="剑指offer32 - I.从上到下打印二叉树I"></p><p>不懂为啥这题是个中等。<br>简单的层序遍历。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 层序遍历 </span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">auto</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-ii-lcof/">剑指offer32 - II.从上到下打印二叉树 II</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221024105535.png" alt="剑指offer32 - II.从上到下打印二叉树 II"></p><p>跟上一道题差不多吧。只是在最后返回的时候把每一层的结果放到一个<code>vector</code>中。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> res<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> buffer<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">auto</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                buffer<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof/">剑指offer32 - III.从上到下打印二叉树 III</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221024111406.png" alt="剑指offer32 - III.从上到下打印二叉树 III"></p><p>还是上道题的升级版，把原来的<code>queue</code>换成<code>deque</code>，然后每次处理一层时判断一下是奇数层还是偶数层就好。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> res<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> buffer<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                TreeNode<span class="token operator">*</span> cur<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    buffer<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>                    q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                    buffer<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>                    q<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                   <span class="token punctuation">&#125;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>剑指offer33.二叉搜索树的后序遍历序列</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221109104037.png" alt="剑指offer33.二叉搜索树的后序遍历序列"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">bool</span> <span class="token function">help</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> j<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> p<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> p<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> p<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> p <span class="token operator">==</span> j <span class="token operator">&amp;&amp;</span> <span class="token function">help</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">help</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> m<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">bool</span> <span class="token function">verifyPostorder</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> postorder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">help</span><span class="token punctuation">(</span>postorder<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> postorder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>剑指offer34.二叉树中和为某一值的路径</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221109104159.png" alt="剑指offer34.二叉树中和为某一值的路径"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> res<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> path<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        path<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>root<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">&amp;&amp;</span> root<span class="token operator">-></span>right <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">&amp;&amp;</span> target <span class="token operator">-</span> root<span class="token operator">-></span>val <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left<span class="token punctuation">)</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left<span class="token punctuation">,</span> target <span class="token operator">-</span> root<span class="token operator">-></span>val<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">-></span>right<span class="token punctuation">)</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token operator">-></span>right<span class="token punctuation">,</span> target <span class="token operator">-</span> root<span class="token operator">-></span>val<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>     vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">pathSum</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> path<span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> target<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>剑指offer35.复杂链表的复制</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221109160902.png" alt="剑指offer35.复杂链表的复制"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    Node<span class="token operator">*</span> <span class="token function">copyRandomList</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>                Node<span class="token operator">*</span> dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Node<span class="token operator">*</span> cur <span class="token operator">=</span> dummy<span class="token punctuation">;</span>        Node<span class="token operator">*</span> pre <span class="token operator">=</span> head<span class="token punctuation">;</span>         <span class="token keyword">while</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            Node<span class="token operator">*</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>pre<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>            cur<span class="token operator">-></span>next <span class="token operator">=</span> pre<span class="token punctuation">;</span>            pre <span class="token operator">=</span> pre<span class="token operator">-></span>next<span class="token punctuation">;</span>            cur<span class="token operator">-></span>next<span class="token operator">-></span>next <span class="token operator">=</span> buffer<span class="token punctuation">;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        cur <span class="token operator">=</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>random <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                cur<span class="token operator">-></span>next<span class="token operator">-></span>random <span class="token operator">=</span> cur<span class="token operator">-></span>random<span class="token operator">-></span>next<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            cur <span class="token operator">=</span> cur<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 错误的思路 修改了原链表</span>        <span class="token comment">// cur = dummy->next->next;</span>        <span class="token comment">// while(cur) &#123;</span>        <span class="token comment">//     if(cur->next) &#123;</span>        <span class="token comment">//         cur->next = cur->next->next;</span>        <span class="token comment">//     &#125;</span>        <span class="token comment">//     else &#123;</span>        <span class="token comment">//         break;</span>        <span class="token comment">//     &#125;</span>        <span class="token comment">//     cur = cur->next;</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// 正确的做法是，在两个链表拆开时，同时也要把原链表归位</span>        Node<span class="token operator">*</span> node1 <span class="token operator">=</span> dummy<span class="token operator">-></span>next<span class="token punctuation">;</span>        Node<span class="token operator">*</span> ans <span class="token operator">=</span> dummy<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>        Node<span class="token operator">*</span> node2 <span class="token operator">=</span> ans<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>node1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            Node<span class="token operator">*</span> buffer <span class="token operator">=</span> node2<span class="token operator">-></span>next <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token operator">?</span> node2<span class="token operator">-></span>next<span class="token operator">-></span>next <span class="token operator">:</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>            node1<span class="token operator">-></span>next <span class="token operator">=</span> node1<span class="token operator">-></span>next<span class="token operator">-></span>next<span class="token punctuation">;</span>            node2<span class="token operator">-></span>next <span class="token operator">=</span> buffer<span class="token punctuation">;</span>            node1 <span class="token operator">=</span> node1<span class="token operator">-></span>next<span class="token punctuation">;</span>            node2 <span class="token operator">=</span> node2<span class="token operator">-></span>next<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bfs</title>
      <link href="/2022/09/06/bfs/"/>
      <url>/2022/09/06/bfs/</url>
      
        <content type="html"><![CDATA[<h3 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h3><p>BFS即广度优先搜索，是一种图论算法，用于在图中寻找两个节点之间的最短路径。它的基本思想是，从起始节点开始，沿着树的宽度遍历树的节点。如果所有节点均被访问，则算法中止。如果目标节点被发现，则算法中止。广度优先搜索是一种盲目搜索，它并不试图找到最优解，而是以较低的代价找到可行解。广度优先搜索算法的时间复杂度为O(V+E)，其中V是顶点的数量，E是边的数量。</p><h4 id="BFS的框架"><a href="#BFS的框架" class="headerlink" title="BFS的框架"></a>BFS的框架</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">,</span> Node<span class="token operator">*</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    queue<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span>    set<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">></span> visited<span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将起始节点加入队列</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> size <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            Node<span class="token operator">*</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 判断是否到达终点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 如果已经访问过，跳过</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            visited<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 将cur的相邻节点加入队列</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span> next <span class="token operator">:</span> cur<span class="token operator">-></span>neighbors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        step<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 增加步数</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>若bfs的对象为二叉树，仅有父节点指向子节点的指针而没有子节点指向父节点的指针时，不需要担心会走回头路的问题，可以不需要visited数组。若有子节点指向父节点的指针，则需要visited数组来记录已经访问过的节点，避免走回头路。</p><h4 id="BFS的应用"><a href="#BFS的应用" class="headerlink" title="BFS的应用"></a>BFS的应用</h4><ul><li><a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/">leetcode 111. 二叉树的最小深度</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220906102003.png" alt="111. 二叉树的最小深度"></p><p>题解：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">int</span> <span class="token function">minDepth</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                TreeNode<span class="token operator">*</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left <span class="token operator">==</span> <span class="token keyword">nullptr</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-></span>right <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> res<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            res<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>这道题的题解完全套用上文的bfs框架，只需要设置合理的终止条件：当遍历到的节点的左右子节点都为空时，返回当前的步数。（同时由于你扣的优秀测例还需要考虑根节点为空的情况。。。）</p><ul><li><a href="https://leetcode.cn/problems/open-the-lock/">leetcode 752. 打开转盘锁</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220906112215.png" alt="752. 打开转盘锁"></p><p>题解：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    string <span class="token function">up</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'9'</span><span class="token punctuation">)</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    string <span class="token function">down</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9'</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">openLock</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token operator">&amp;</span> deadends<span class="token punctuation">,</span> string target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> us<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> deadends<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">"0000"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            us<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span>string<span class="token operator">></span> q<span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> visited<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"0000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span><span class="token string">"0000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                string cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 判断是否到达终点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> res<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 将相邻节点加入队列,若相邻节点是死结点或者已经遍历过的节点则不加入</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    string u <span class="token operator">=</span> <span class="token function">up</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    string d <span class="token operator">=</span> <span class="token function">down</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>us<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">==</span> us<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">==</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                        visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                                        <span class="token keyword">if</span><span class="token punctuation">(</span>us<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">==</span> us<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">==</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>                        visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            res <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>这题的题解也是完全套用上文的bfs框架，字符串的变化相当于字符串的相邻节点，需要注意在保证相邻节点不是已经遍历过的之外还需要保证相邻节点不是死结点。（再吐槽一次你扣的优秀测例”0000”放在deadends里边）<br>使用vector find和unordered_set find效率完全不同，使用vector find时直接测例超时不能通过，unordered_set的查找效率更高，因此使用unordered_set来存储死结点和访问过的节点。</p><p>这道题还可以使用双向bfs来优化，参考<a href="https://leetcode.cn/problems/open-the-lock/solution/gong-shui-san-xie-yi-ti-shuang-jie-shuan-wyr9/">这里</a>。bfs的时间复杂度常常与图的边和节点数有关，而图的边和节点在一定情况下可能出现指数级的扩大，因此使用双向bfs可以大幅度的减少时间复杂度。这里给出一个c++的双向bfs的模板：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">,</span> Node<span class="token operator">*</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    queue<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">></span> q1<span class="token punctuation">;</span>    queue<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">></span> q2<span class="token punctuation">;</span>    unordered_set<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">></span> visited<span class="token punctuation">;</span>    q1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将起始节点加入队列1</span>    q2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将终止节点加入队列2</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>q2<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 从节点数较少的队列开始遍历,尽可能的降低复杂度</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>q1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> q2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>q1<span class="token punctuation">,</span> q2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> sz <span class="token operator">=</span> q1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            Node<span class="token operator">*</span> cur <span class="token operator">=</span> q1<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q1<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 判断是否到达终点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q2<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> q2<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> step<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> cur<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">==</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    q1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                    visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        step <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于这道题，也可以使用双向bfs来优化：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    string <span class="token function">up</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'9'</span><span class="token punctuation">)</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    string <span class="token function">down</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9'</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">openLock</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token operator">&amp;</span> deadends<span class="token punctuation">,</span> string target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> us<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> deadends<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">"0000"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            us<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> q1<span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> q2<span class="token punctuation">;</span>        unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> visited<span class="token punctuation">;</span>        q1<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span><span class="token string">"0000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q2<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>        visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span><span class="token string">"0000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>q2<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            unordered_set<span class="token operator">&lt;</span>string<span class="token operator">></span> temp<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>q1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> q2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>q1<span class="token punctuation">,</span> q2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> cur <span class="token operator">:</span> q1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 判断是否是死节点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>us<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> us<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 判断是否到达终点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>q2<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> q2<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> res<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 将相邻节点加入队列,若相邻节点已经遍历过的节点则不加入</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    string u <span class="token operator">=</span> <span class="token function">up</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    string d <span class="token operator">=</span> <span class="token function">down</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">==</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> temp<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">==</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> temp<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            q1 <span class="token operator">=</span> q2<span class="token punctuation">;</span>            q2 <span class="token operator">=</span> temp<span class="token punctuation">;</span>            res <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>运行结果如下所示，双向bfs的性能相对于单向bfs有了极大的提升。虽然本质上，传统的bfs和双向bfs的时间复杂度都是一样的，但是双向bfs往往可以增快算法运行的速度，因此在一些情况下，双向bfs是一个很好的选择。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220906151506.png" alt="运行结果"></p><hr><p>2022.9.21更新、</p><p>今天的每日一题是一道bfs，但是我发现我好像已经把bfs忘了，并不会做。。。再复习一下。</p><ul><li><a href="https://leetcode.cn/problems/k-similar-strings/">leetcode 854. 相似度为k的字符串</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220921152553.png" alt="20220921152553"></p><p>题解：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">kSimilarity</span><span class="token punctuation">(</span>string s1<span class="token punctuation">,</span> string s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// bfs</span>        queue<span class="token operator">&lt;</span>string<span class="token operator">></span> q<span class="token punctuation">;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> visited<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">auto</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 是否到达终点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> step<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 是否曾经访问过</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 将所有邻居入队</span>                <span class="token keyword">auto</span> neighbors <span class="token operator">=</span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> neighbors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            step<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这道题直接使用上边的bfs框架显然是十分正确的。但是，时间复杂度太高了，单单是找邻居这一步就是$O(n^2)$的复杂度，别说个步骤在bfs中被反复的使用了。果不其然，提交了就是超时。</p><p>这样子超时之后最直观的想法就是优化一下找邻居这一步，所以，借鉴别人的思路，将find_neighbor这一步优化。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> string s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> s2<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样就可以通过了。这里将找邻居的过程变成了一个贪心的过程，每次都找一个最起码向target靠近一位的邻居，这样就可以减少很多邻居的数量。但是不是很明白为什么这样可以找得到最优的结果。</p><p>优化后总体的代码如下：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> string s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> s2<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">kSimilarity</span><span class="token punctuation">(</span>string s1<span class="token punctuation">,</span> string s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// bfs 超时</span>        queue<span class="token operator">&lt;</span>string<span class="token operator">></span> q<span class="token punctuation">;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> visited<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">auto</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 是否到达终点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> step<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 是否曾经访问过</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 将所有邻居入队</span>                <span class="token keyword">auto</span> neighbors <span class="token operator">=</span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> neighbors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            step<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来尝试一些比较常规的想的明白的优化吧。比如上文说过的双向bfs。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span>string<span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">kSimilarity</span><span class="token punctuation">(</span>string s1<span class="token punctuation">,</span> string s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 双向bfs</span>        <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> q1<span class="token punctuation">;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> q2<span class="token punctuation">;</span>        set<span class="token operator">&lt;</span>string<span class="token operator">></span> visited<span class="token punctuation">;</span>        q1<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>        q2<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>        visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q1<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>q2<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            set<span class="token operator">&lt;</span>string<span class="token operator">></span> temp<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>q1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> q2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">swap</span><span class="token punctuation">(</span>q1<span class="token punctuation">,</span> q2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// int sz = q1.size();</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> cur <span class="token operator">:</span> q1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 是否到达终点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>q2<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">!=</span> q2<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> step<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                visited<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 邻居节点入队</span>                <span class="token keyword">auto</span> neighbors <span class="token operator">=</span> <span class="token function">find_neighbor</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> neighbors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">!=</span> visited<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">continue</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    temp<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            q1 <span class="token operator">=</span> q2<span class="token punctuation">;</span>            q2 <span class="token operator">=</span> temp<span class="token punctuation">;</span>            step<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>好吧还是超时。。。看来双向bfs的优化作用实在是很有限呀。</p>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>梦</title>
      <link href="/2022/08/22/%E6%A2%A6/"/>
      <url>/2022/08/22/%E6%A2%A6/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=1446654517&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><h3 id="一"><a href="#一" class="headerlink" title="一"></a>一</h3><h4 id="婚后"><a href="#婚后" class="headerlink" title="婚后"></a>婚后</h4><p>秋风瑟瑟，梧桐树的叶子飘转着从树上落下。枝桠繁盛交错着，像运动员们虬结的肌肉，一缕缕阳光从树杈的缝隙中穿过，衬着高远的天空。<br>在一个像是勤政路和银杏路口，也可能是少林路和少室路口的十字路口，陆陆续续碰到了几个和老婆一块匆匆走过的男人。<br>看不到他们的脸，但是能很清楚的听到他们在说什么。</p><p>你天天除了干家务还能干什么。<br>我刚把公积金取了给娃报了个辅导班。<br>新开业的超市大米一块钱一斤。</p><p>那些男人的面孔抽动着，扭曲着，最后都变成了我的脸。<br>我开始害怕的往前跑。</p><hr><h4 id="期中考试"><a href="#期中考试" class="headerlink" title="期中考试"></a>期中考试</h4><p>我一路的往前跑啊跑啊跑，身边的景色扭曲着，变换着。<br>场景逐渐的稳定了下来<br>冥冥中，我知道这是要期中考试了。<br>跌跌撞撞的，似乎摔倒在了一个女生怀里。<br>她说，怎么这么不小心。<br>我抬头看她一眼，似乎是高中的后桌lzh，又好像是那个笑得很好看的sjq，一愣神又变成了czr。<br>再回身，站在我面前的已经是几个熟悉的大学同学了。<br>7导问，最近怎么样，我毫不犹豫的回呛，总好过要考期中考试的人。<br>鸽子精皱了皱眉，你跑得过他们吗，我想了想，仔细对比了一下敌我实力，我似乎不用跑吧。<br>当他们带着不友善站在我面前时，我真的没有跑。<br>我站在原地，看着他们，看着他们的脸，看着他们的眼睛。<br>闹钟响了，这光怪陆离的梦。</p><hr><h3 id="二"><a href="#二" class="headerlink" title="二"></a>二</h3><div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=355992&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><h4 id="很狂的人"><a href="#很狂的人" class="headerlink" title="很狂的人"></a>很狂的人</h4><p>你好！素未谋面的人，很久不见你出现在我的梦中。早已忘记你在梦中叮嘱了我些什么，拖延的人就是这般下场，早上明明还能记得清楚。但若是忘了，那一定是这叮嘱不太重要，你瞧，你昨夜来我梦中的事我是记得一清二楚。</p><p>你知道的，我最近总是觉得自己很累，其实也不是最近，我一直以来都是这般的丧气。生活对我来说就是上紧了发条的钟，一下不漏的往前走，明明秒针已经和钟表的底盘摩擦出了火花，还是要循规蹈矩的分秒不差。这发条的力量是如此之大。我在同龄人的裹挟之下一路跌跌撞撞的走到了现在，做了很多不想做的选择，去了不想去的地方。</p><p>有时候觉得自己在被裹挟着走，而有时候又觉得事在人为，觉得乘风破浪正当时。往往是没脑子的莽了一波弄得鸡飞狗跳，事后复盘还要替自己找补两句说自己是青春年少，还来日方长。</p><p>好想让时间停一停，就一下，就休息一下。</p><p>可惜时间不会停下。同龄人不会停下。审视的目光不会停下。</p><p>昨晚你又入了我的梦，真的很难记得起来你到底叫什么，长什么样，又叮嘱了我什么。而就是梦中那一时片刻的难辨真假的相伴，就让我沉浸其中不愿醒来。</p><p>未曾谋面的你，是我生活的一个小插曲。我会为了看不清记不得你的脸而着急焦虑。但是跟现下的一些事相比，终究都是一些离更远一点儿的焦虑了。</p><p>你知道吗，毕业和就业带来的焦虑，如何取得一个很好的work life banlance—这些事情像石头一样压在我的心里。总是想实现既要又要还要，可是这世上哪有这么多美事，最终多半是贪心不成。一地鸡毛之后再从言语上给自己找补。</p><p>素未谋面的你啊，我多想现在可以下定一些决心，可又不甘心就此定死自己的未来—此刻的我大抵又是已经被浪潮裹挟而不自知了。</p><p>想做一个很狂的人，狂妄不自知的去挑战风车。</p><p>可是终究还是像上紧了发条的秒针，一时不停的往前转动。</p><p>素未谋面的你，希望当我转到我们相遇的那个时刻，我们都能有一个瞬间的如释重负。</p><hr><h3 id="三"><a href="#三" class="headerlink" title="三"></a>三</h3><div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=1944898673&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>2022.9.29 更新</p><h4 id="更新这个系列的目的和意义"><a href="#更新这个系列的目的和意义" class="headerlink" title="更新这个系列的目的和意义"></a>更新这个系列的目的和意义</h4><p>最近似乎找回了一些睡眠的技巧，不至于总是被失眠给打倒。<br>那些有时绮丽，有时诡谲的梦境。是平淡生活中的调味剂。<br>这样想，反而不再追求那些高质量的无梦睡眠。波澜不惊的生活需要一些梦中的冒险来给自己惊喜。<br>壮阔的梦境，不该被丢进记忆角落的故纸堆里。记录下来，偶尔也能回味那些美妙的滋味。</p><hr><h3 id="四"><a href="#四" class="headerlink" title="四"></a>四</h3><div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=1959667345&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>2022.10.05更新</p><h4 id="剑与魔法与少年"><a href="#剑与魔法与少年" class="headerlink" title="剑与魔法与少年"></a>剑与魔法与少年</h4><p>我站在一座高山上，看着远处的一座城堡。<br>很久不见的高中同学<br>顺风漂流到我的陋居<br>不知你是否还在看剑与魔法<br>又为何漂流时随身带着洗衣机<br>可惜洗衣机的排水管子漏了水<br>你也不得不停下了你流浪的脚步<br>我帮你修好了排水的阀门<br>把新管子的价格砍到了21一根<br>可惜只是我单方面砍的——五金店老板不同意卖<br>那你只能去下一个站点<br>可惜啊我的老朋友<br>不能让你满意的带着完好的洗衣机继续流浪<br>但愿你在下一站流浪的时候<br>能有一个好用的洗衣机</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前缀和与差分数组</title>
      <link href="/2022/08/17/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84/"/>
      <url>/2022/08/17/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p>今天在看东哥的算法笔记时学习了两个以空间换时间的算法技巧，前缀和和差分数组。但是在刷题的时候不以为然，多层for循环走天下，直到测例超时才幡然醒悟，悔之晚矣呀！<br>但是还是不得不吐槽一下，leetcode的某些测试用例……</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/9c4c145a8cb580454498db4bb05b1f6.png" alt="想得出这种测例的人生活一定很不幸吧"></p><h5 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h5><p>前缀和适用于需要快速，频繁的计算一个索引区间内的元素之和的场景。<br>对于一个长度为n的一维数组nums，维持一个长度为n+1的前缀和数组presum，其中，</p><script type="math/tex; mode=display">presum[i] = \sum_{a=0}^{i-1} nums[a]</script><p>这样，我们在计算nums数组的一个索引区间内的元素之和时，只需要使用presum中的相应元素进行一次加减法运算即可。</p><script type="math/tex; mode=display">\begin{align*}sum(nums[i], nums[j]) &= presum[j+1] - presum[i] = \sum_{a=0}^{j} nums[a] - \sum_{a=0}^{i-1} nums[a] \\&=\sum_{a=i}^{j} nums[a]\end{align*}</script><p>这种做法在仅需进行少量计算时，不如直接用for循环进行遍历求和，但当需要进行多次快速检索时，前缀和数组的优越性就体现出来了。</p><h6 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h6><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220817155959.png" alt="[leetcode 303题](https://leetcode.cn/problems/range-sum-query-immutable/)"></p><ul><li>题解：</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">NumArray</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> preSum<span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">NumArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        preSum <span class="token operator">=</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            preSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> preSum<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> <span class="token function">sumRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> preSum<span class="token punctuation">[</span>right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> preSum<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/** * Your NumArray object will be instantiated and called as such: * NumArray* obj = new NumArray(nums); * int param_1 = obj->sumRange(left,right); */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同样的，前缀和的方法也适用于二维数组。</p><h5 id="差分数组"><a href="#差分数组" class="headerlink" title="差分数组"></a>差分数组</h5><p>类似与前缀和技巧，差分数组的思想是额外的维持一个长度为n的差分数组differ。</p><script type="math/tex; mode=display">differ[i] = nums[i] - nums[i-1]</script><p>差分数组中的元素表示了原数组中相应位置上的元素与其前一个元素之间的差。差分数组的适用于我们需要频繁的对nums进行批量操作时。比如，场景要求我们对区间nums[2…6]全部加1，做一次这样的操作，只需要for循环遍历即可，但是，若是操作的太多，效率将极为低下。而若是使用差分数组，每次对区间i，j进行操作，只需要在差分数组的对应位置进行两次加减法操作即可，前者的时间复杂度为$O(n)$，而后者的时间复杂度仅为$O(1)$。</p><h6 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h6><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220817161307.png" alt="[leetcode 1109题](https://leetcode.cn/problems/corporate-flight-bookings/)"></p><ul><li>题解：</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">corpFlightBookings</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> bookings<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 超时</span>        <span class="token comment">// vector&lt;int> ans(n, 0);</span>        <span class="token comment">// for(auto p : bookings)&#123;</span>        <span class="token comment">//     for(int i = p[0]; i &lt;= p[1]; i++)&#123;</span>        <span class="token comment">//         ans[i-1] += p[2];</span>        <span class="token comment">//     &#125;</span>        <span class="token comment">// &#125;</span>        <span class="token comment">// return ans;</span>                <span class="token comment">// 构建差分数组</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">differ</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> bookings<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            differ<span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+=</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> differ<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                differ<span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-=</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 从差分数组恢复出原数组</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">ans</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> differ<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> differ<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ans<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> differ<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gated PixelCNN小结</title>
      <link href="/2022/08/15/Gated-PixelCNN%E5%B0%8F%E7%BB%93/"/>
      <url>/2022/08/15/Gated-PixelCNN%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h4 id="Gated-PixelCNN"><a href="#Gated-PixelCNN" class="headerlink" title="Gated PixelCNN"></a>Gated PixelCNN</h4><p>论文中提出的模型结合了PixelRNN和PixelCNN的优点。<br>主体结构还是PixelCNN，因为PixelCNN使用卷积运算，可以节省运算时间和运算资源。<br>相比于PixelCNN，PixelRNN的优点是使用了门控单元，且没有感受野盲区。分别针对这两点对PixelCNN进行了针对性的改进。</p><h5 id="Gated-activation"><a href="#Gated-activation" class="headerlink" title="Gated activation"></a>Gated activation</h5><p>首先，使用门激活函数代替PixelCNN中的线性激活函数。有助于建模更加复杂的interactions。门激活函数的数学表达式如下所示：</p><script type="math/tex; mode=display">y = \tanh (W_{k, f} * \mathrm {x} ) \odot \sigma(W_{k, g}* \mathrm {x})</script><p>式中的参数分别表示：</p><p>$\sigma$:sigmoid函数</p><p>$k$:卷积的层数</p><p>$\odot$:逐元素点乘</p><p>*:卷积操作</p><p>$W_{k, f}$:第k层的卷积核</p><p>$W_{k, g}$:第k层的卷积核</p><h5 id="解决Blind-spot"><a href="#解决Blind-spot" class="headerlink" title="解决Blind spot"></a>解决Blind spot</h5><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220815105923.png" alt="上图为original pixelcnn的感受野，随着卷积核的叠加，感受野盲区的范围也不断地扩大，下图为本文的解决方案，将masked conv filter分为vertical stack和horizontal stack，完美的解决了感受野盲区的问题"></p><p>Gated PixelCNN的输入被分为了两个部分，一部分是vertical，一部分是horizontal。vertical包含了现在行之上的所有行，而horizontal包含了现在行之前的所有的像素点。<br>github上已经有了完整的<a href="https://github.com/kkleidal/GatedPixelCNNPyTorch/blob/master/note-on-conv-masking.ipynb">验证代码</a>。<br>在每一层结束之后，都将这两个stack的输出结合起来。<br>两者的结合方式如图所示，使用简单的卷积。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220815151441.png" alt="一个简单的Gated PixelCNN单元"></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220815152247.png" alt="堆叠起来的Gated PixelCNN模型，绿色为vertival部分，蓝色为horizontal部分"></p><h5 id="Conditional-PixelCNN"><a href="#Conditional-PixelCNN" class="headerlink" title="Conditional PixelCNN"></a>Conditional PixelCNN</h5><p>Gated PixelCNN在给定一些先验条件的情况下也可以成为一个条件图片生成器。<br>原始版的PixelCNN建模的对象为：</p><script type="math/tex; mode=display">P(X) = \prod_{i=1}^{n^2} p(x_i|x_1, x_2, ... ,x_{i-1})</script><p>在加入先验条件$h$之后，建模的对象变成了:</p><script type="math/tex; mode=display">P(X) = \prod_{i=1}^{n^2} p(x_i|x_1, x_2, ... ,x_{i-1},h)</script><p>此时，Gated激活函数的表达式也需要变化：</p><script type="math/tex; mode=display">y = \tanh (W_{k, f} * \mathrm {x} + V_{k,f} * \mathrm s) \odot \sigma(W_{k, g}* \mathrm {x} + V_{k,g} * \mathrm s)</script><p>式中：<br>$\mathrm{s}$: h在频域上的表示，$\mathrm{s} = m(\mathrm{h})$<br>$V_{k,f}$: $1\times 1$的卷积</p><h4 id="PixelSnail"><a href="#PixelSnail" class="headerlink" title="PixelSnail"></a>PixelSnail</h4><p>为了保证网络的设计可以满足能够轻松的推断出序列的前部分的要求，可能有以下几种做法。</p><ul><li>传统的RNN，LSTM和GRU</li><li>因果卷积</li><li>自注意力机制</li></ul><p>因果卷积可以在有限的上下文中提供高带宽的访问方式，attention机制可以在很大的上下文中应用causal attention，使网络学习到挑出聚集到的哪些信息，以及如何更好地表现这些信息。snail(simple neural attentive meta-learner)便是由两个卷积和attention交错而成。</p><p>为了在二维的图片上保证卷积的因果性，只能使用masked convolution(最原始的pixelcnn的做法)或者shift-based convlution(上文中介绍的gated-pixelcnn中将masked conv kernel分块的做法)。</p><p>但是，卷积操作只能提取到局部的信息，为了保证能够使用到全局的信息，必须进行卷积层的堆叠。在这个过程中，通常使用到的操作时dilated convolution和strided convolution，通过膨胀系数的选取实现感受野的指数级扩增。</p><p>尽管使用了dilated convolution和strided convolution，但是边缘处的像素信息依然是受限的—由于每次卷积仅能提取到有限的上下文中的信息，这些信息往往要通过一系列的中继。</p><p>大多数pixelCNN中都使用了raster scan的方式，即从左到右，再从上到下扫描。这样扫描大多数的上下文都被浪费在了距离要推断的点比较远的部分，比如说右上角的点。因此本文使用了zigzag ordering。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220818173438.png" alt="两种不同的扫描顺序"></p><p>但是，使用这种扫描的顺序会导致blind spot的出现，为了解决这个问题，提出了pixelSNAIL—使用了更大更灵活的感受野。</p><p>pixelSNAIL的主要做法是引入attention模块。</p>]]></content>
      
      
      <categories>
          
          <category> 论文总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无题的信</title>
      <link href="/2022/08/06/%E6%97%A0%E9%A2%98%E7%9A%84%E4%BF%A1/"/>
      <url>/2022/08/06/%E6%97%A0%E9%A2%98%E7%9A%84%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/3pxh8Z4hb3kTdZ3vxTEMLT?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>高中的时候就很喜欢写信。但是又从来没写过信，只是喜欢一些很随意的小纸条上的碎碎念，小纸条用料实在是过于的随意，也许是某次周考用剩下的演草纸——语文考试和英语考试的时长实在是过于冗长让人觉得无聊，除了用来满足不太够的睡眠还可以写一些故弄玄虚的文字，有时是从不知哪里混来的小小明信片——这便足够重视了，有了一点信的模样。那些赤裸裸的表达自己爱意的文字毫不加掩饰，绝对算不得朦朦胧胧的<a href="https://music.163.com/#/song?id=1954879007">青春期的诗</a>，只是一些中了恋爱脑病毒的青春猪头少年对言情小说的拙劣模仿。</p><p>上了大学之后也曾经写过信，但终究是被智能手机打败了。在智能手机面前我彻底一败涂地，不仅仅是很难再饱含感情的在纸上写下抒情的文字，连从小培养的看书的习惯也被电子书给取代了。抒情的文字从那些纸上和明信片上转移到了QQ和微信。这些能够及时发出的文字更多的考验及时应变的能力；那些往往不怎么经过思考便发出的文字，经常没有构思，也不能留下时间去思索收信人收到信之后的反应。事情变得无趣起来。</p><p>但是，时代的潮流就是在如此变化。于是，当年对言情小说的一些拙劣模仿变成了对互联网情感大师的拙劣模仿。在资讯浪潮的冲刷之下，集百家之所长的一些技巧被广泛的应用——如何引起一个女孩儿的兴趣，如何跟一个女孩儿聊天，如何使用一些微信和QQ聊天的little tricks，如何准确的把握与女生相处的阶段。这些技巧确实是卓有成效的，似乎，把追女生的过程简化成了一个简单的galgame，玩家只需要准确的判断哪种选择可以得到好感度+10，以及什么时候已经有了一个合适的好感度的基础，可以A上去了。事情更加无趣了。</p><p>年龄更加的增长，心中的焦虑跟着增长。总是羡慕身边同学朋友们的爱情，也常常因为总是有缘无份而心中懊恼。此时便再也不想什么写信，什么明信片之类的事了。遇到了一段自以为是的缘分就总想试试。谈恋爱这事儿到了这时变成了一件急待完成的主线任务。事情已经完全变质了。</p><p>这时候，想再写封信，却不知如何落笔了。</p><p>那个在数学课上笑着说我不知道的女孩儿已经失联多年，十六岁喜欢过的姑娘也早已是陌路人，二十一岁的初恋更是一团乱麻。</p><p>现在应该怎么反思？或许我也没做错什么。只是不知道再给谁写一封信，应该以何为题，信中写些什么。</p><hr><p>许下的承诺，或许在多年以后<br>我还在漂泊，你是错过的烟火<br>等风沙过后，才知道失去什么</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>排序算法</title>
      <link href="/2022/08/04/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
      <url>/2022/08/04/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h4 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h4><p>平均时间复杂度为$O(n^2)$，在最好情况下的时间复杂度为$O(n)$，在最坏情况下的时间复杂度为$O(n^2)$，在原地修改，所以空间复杂度为$O(1)$。<br>代码实现如下所示：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">pop_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">></span>nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                T buffer <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> buffer<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h4><p>选择排序整体思路与冒泡排序的思路相似，都是在依次排序之后将最小的元素放在最前面，不同的是，冒泡排序是两个相邻元素之间的比较，而选择排序进行的是整体的选择，即在每一趟都查出无序区的最小元素，将最小的元素追加至有序区的末尾。<br>选择排序的平均时间复杂度为$O(n^2)$，在最好情况下的时间复杂度为$O(n^2)$，在最坏情况下的时间复杂度为$O(n^2)$，在原地修改，所以空间复杂度为$O(1)$。<br>代码实现如下：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> min<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        min <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                min <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        T buffer <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">;</span>        nums<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">=</span> buffer<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h4><p>插入排序的思路是构建一个有序数列，对于未排序的数据，在已排序的序列中从前往后扫描，找到正确的位置并插入。<br>平均时间复杂度为$O(n^2)$，在最好情况下的时间复杂度为$O(n)$，在最坏情况下的时间复杂度为$O(n^2)$，在原地修改，所以空间复杂度为$O(1)$。<br>代码实现如下：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> key <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>j<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> key<span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            j<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h4><p>希尔排序是对插入排序的一种修改。希尔排序的基本思想是将待排序的数据分为若干个子序列进行插入排序，等到整个序列都基本有序时，在对整个序列直接进行插入排序。<br>希尔排序的时间复杂度与子序列的选取有关，当子序列的步长设为1时，希尔排序退化为插入排序，时间复杂度为$O(n^2)$。希尔排序的平均时间复杂度为$O(n \log n)$<br>代码实现如下：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">shell_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 步长，将原序列分为l个子序列</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>h<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span>l<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        h <span class="token operator">=</span> l <span class="token operator">*</span> h <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>h<span class="token operator">>=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j<span class="token operator">>=</span>h <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token operator">-</span>h<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">-=</span> h<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                T buffer <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token operator">-</span>h<span class="token punctuation">]</span><span class="token punctuation">;</span>                nums<span class="token punctuation">[</span>j<span class="token operator">-</span>h<span class="token punctuation">]</span> <span class="token operator">=</span> buffer<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        h <span class="token operator">=</span> h <span class="token operator">/</span> l<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h4><p>归并排序是一种建立在归并操作上的有效的排序算法。是一种使用分治法思想的典型应用。基本步骤为，将$n$个元素分成含$\frac{n}{2}$个元素的子序列，用合并排序法对两个子序列递归的排序，合并两个已排序的子序列得到排序的结果<br>归并排序的实现由两种方法：自上而下的递归；自下而上的迭代。<br>归并排序的时间复杂度为$O(n \log n)$，由于使用了额外的内存空间，空间复杂度为$O(n)$。<br>代码实现如下：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//1、使用自上而下的递归的实现</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">merge</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> left<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>T<span class="token operator">></span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span>T<span class="token operator">></span> res<span class="token punctuation">;</span>    size_t l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>l<span class="token operator">&lt;</span>left<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> r<span class="token operator">&lt;</span>right<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>r<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> left<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> right<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">,</span> right<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> right<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> left<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> l<span class="token punctuation">,</span> left<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">merge_sort_recursion</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token keyword">const</span> size_t mid <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">left</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">right</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> mid<span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">merge_sort_recursion</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">></span></span></span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">merge_sort_recursion</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">></span></span></span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token comment">//2、使用自下而上的迭代的实现</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">merge_sort_interation</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 枚举步长</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> seg <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> seg<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> seg <span class="token operator">+=</span> seg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// 合并两个相邻的区间</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> seg <span class="token operator">+</span> seg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            vector<span class="token operator">&lt;</span>T<span class="token operator">></span> temp<span class="token punctuation">;</span>            <span class="token keyword">int</span> low <span class="token operator">=</span> i<span class="token punctuation">,</span> mid <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>i <span class="token operator">+</span> seg<span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> high <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>i <span class="token operator">+</span> seg <span class="token operator">+</span> seg<span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> start1 <span class="token operator">=</span> low<span class="token punctuation">,</span> end1 <span class="token operator">=</span> mid<span class="token punctuation">;</span>            <span class="token keyword">int</span> start2 <span class="token operator">=</span> mid<span class="token punctuation">,</span> end2 <span class="token operator">=</span> high<span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>start1 <span class="token operator">&lt;</span> end1 <span class="token operator">&amp;&amp;</span> start2 <span class="token operator">&lt;</span> end2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>start1<span class="token punctuation">]</span><span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>start2<span class="token punctuation">]</span><span class="token operator">?</span> nums<span class="token punctuation">[</span>start1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">:</span> nums<span class="token punctuation">[</span>start2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token keyword">while</span><span class="token punctuation">(</span>start1 <span class="token operator">&lt;</span> end1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>start1<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>start2 <span class="token operator">&lt;</span> end2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>start2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> temp<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                nums<span class="token punctuation">[</span>low <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h4><p>快速排序也是分治思想在排序中的一种应用，快速排序是在冒泡排序的基础上的递归分治法。快速排序是处理大数据的最快的排序算法。<br>快排的基本算法步骤为：从数列中挑出一个元素，成为基准；重新排序数列，将所有元素中比基准值小的放在基准的前面，将所有元素中比基准值大的放在基准的后边；递归的将小于基准值元素的子数列和大于基准值元素的子数列进行排序。<br>快速排序的时间复杂度为$O(n \log n)$，空间复杂度为$O(\log n)$。<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 1、迭代实现</span><span class="token keyword">struct</span> <span class="token class-name">Range</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> start<span class="token punctuation">,</span> end<span class="token punctuation">;</span>    <span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> e <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        start <span class="token operator">=</span> s<span class="token punctuation">,</span> end <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Range<span class="token operator">></span> <span class="token function">r</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    r<span class="token punctuation">[</span>p<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        Range <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>start <span class="token operator">>=</span> range<span class="token punctuation">.</span>end<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        T mid <span class="token operator">=</span> nums<span class="token punctuation">[</span>range<span class="token punctuation">.</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> range<span class="token punctuation">.</span>start<span class="token punctuation">,</span> right <span class="token operator">=</span> range<span class="token punctuation">.</span>end<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;</span> mid <span class="token operator">&amp;&amp;</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">>=</span> mid <span class="token operator">&amp;&amp;</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> right<span class="token operator">--</span><span class="token punctuation">;</span>            T temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">>=</span> nums<span class="token punctuation">[</span>range<span class="token punctuation">.</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            T temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>range<span class="token punctuation">.</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>range<span class="token punctuation">.</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> left<span class="token operator">++</span><span class="token punctuation">;</span>        r<span class="token punctuation">[</span>p<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Range</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>start<span class="token punctuation">,</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        r<span class="token punctuation">[</span>p<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Range</span><span class="token punctuation">(</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> range<span class="token punctuation">.</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 2、 递归实现</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>begin <span class="token operator">></span> end<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    T temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>begin<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> begin<span class="token punctuation">,</span> j <span class="token operator">=</span> end<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> temp <span class="token operator">&amp;&amp;</span> j <span class="token operator">></span> i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            j<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> temp <span class="token operator">&amp;&amp;</span> j <span class="token operator">></span> i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">></span> i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            T t <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    nums<span class="token punctuation">[</span>begin<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token function">quick_sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">quick_sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h4><p>堆排序是指，利用堆数据结构的排序算法。堆积是一个近似完全二叉树的结构，同时满足堆积的性质，即子节点的键值或索引总是小于或大于它的父节点，分为两种方法：</p><ul><li>大顶堆(最大堆)：每个节点的值都大于或等于其子节点的值，在堆排序算法中用于升序排列；</li><li>小顶堆(最小堆)：每个节点的值都小于或等于其子节点的值，在堆排序算法中用于降序排列。</li></ul><p>堆排序的平均时间复杂度为$O(n \log n)$，空间复杂度为$O(1)$。</p><p>代码实现如下：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">max_heapify</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>nums<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> dad <span class="token operator">=</span> start<span class="token punctuation">;</span>    <span class="token keyword">int</span> son <span class="token operator">=</span> dad <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>son <span class="token operator">&lt;=</span> end<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>son <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> end <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>son<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>son <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            son<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>dad<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>son<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>dad<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>son<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            dad <span class="token operator">=</span> son<span class="token punctuation">;</span>            son <span class="token operator">=</span> dad <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">heap_sort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>nums<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> len <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">max_heapify</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">max_heapify</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划</title>
      <link href="/2022/07/18/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
      <url>/2022/07/18/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
      
        <content type="html"><![CDATA[<h4 id="动态规划的基础类题目"><a href="#动态规划的基础类题目" class="headerlink" title="动态规划的基础类题目"></a>动态规划的基础类题目</h4><ul><li>斐波那契数列</li><li>背包问题</li><li>爬楼梯</li><li>……</li><li>股票问题</li><li>子序列问题</li></ul><h4 id="使用动态规划解题时需要注意的点："><a href="#使用动态规划解题时需要注意的点：" class="headerlink" title="使用动态规划解题时需要注意的点："></a>使用动态规划解题时需要注意的点：</h4><p>1.DP数组的定义和下标的含义<br>2.递推公式<br>3.DP数组的初始化<br>4.遍历顺序<br>5.打印DP数组</p><h4 id="动态规划的尝试"><a href="#动态规划的尝试" class="headerlink" title="动态规划的尝试"></a>动态规划的尝试</h4><ul><li><a href="https://leetcode.cn/problems/climbing-stairs/">T70.爬楼梯（斐波那契数列）</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220507102150.png" alt="爬楼梯"></p><ul><li>题解：</li></ul><p>第n级台阶有几种走法，只与第n-1级和第n-2级有关</p><p>1.dp数组：dp[i]表示到达i级台阶有dp[i]种方法，<br>2.递推公式：dp[i] = dp[i-1] + dp[i-2]，<br>3.dp数组的初始化：dp[0] = 1, dp[1] = 1，<br>4.遍历顺序：从第n级台阶开始。</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//直接使用dp数组</span><span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> dp<span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//节省部分空间开销的写法</span><span class="token keyword">int</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> dp1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> dp2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> dp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>T    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        dp <span class="token operator">=</span> dp1 <span class="token operator">+</span> dp2<span class="token punctuation">;</span>        buffer <span class="token operator">=</span> dp2<span class="token punctuation">;</span>        dp2 <span class="token operator">=</span> dp1<span class="token punctuation">;</span>        dp1 <span class="token operator">=</span> dp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> dp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/house-robber/">T198.打家劫舍</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220509142502.png" alt="打家劫舍"></p><ul><li>题解：</li></ul><ol><li>dp数组：dp[i]表示到达i房间时，最大盗取金额，</li><li>状态方程：dp[i] = max(dp[i-2] + nums[i], dp[i-1])，意思是，在到达i房间时偷不偷取决于是在这偷了赚的多还是在上一间偷了赚的多，在这一间偷了，赚的钱表示为dp[i-2] + nums[i]，在这一间没偷，赚的钱表示为dp[i-1]，</li><li>dp数组的初始化：dp[0] = 0, dp[1] = nums[0]，</li><li>遍历顺序：从第1房间开始。<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//当然也可以为了节省内存开销，只储存上一家偷的钱和上上家偷的钱。</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li><a href="https://leetcode.cn/problems/house-robber-ii/">T213.打家劫舍II</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220509183819.png" alt="打家劫舍II"></p><ul><li>题解：</li></ul><ol><li>dp数组：dp[i]表示到达i房间时，最大盗取金额，</li><li>状态方程：dp[i] = max(dp[i-2] + nums[i], dp[i-1])，意思是，在到达i房间时偷不偷取决于是在这偷了赚的多还是在上一间偷了赚的多，在这一间偷了，赚的钱表示为dp[i-2] + nums[i]，在这一间没偷，赚的钱表示为dp[i-1]，</li><li>dp数组的初始化：这是本题与上题区别较大的地方，在上题中，我们默认在第一间房间偷不偷只取决于在第二间房偷不偷，在这题中，在第一间房偷不偷取决于在最后一间房偷不偷和在上一间房偷不偷，从dp[2]到dp[n-1]的计算方式并不发生变化，存在两种情况，第一间房子不偷，此时最大金额为从第二间偷到第n间的最大金额，最后一间房子偷，此时最大金额为从第一间偷到第n-1间的最大金额， </li><li>遍历顺序：从第1房间开始。</li></ol><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> _0<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> max <span class="token operator">=</span> <span class="token function">max_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span>max<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//从1偷到n-1</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> dp1 <span class="token operator">=</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    dp1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//从2偷到n</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp1<span class="token punctuation">[</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">T309.买卖股票的最佳时机含冷冻期</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220514151824.png" alt="买卖股票的最佳时机含冷冻期"></p><p>题解：<br><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> prices<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> f0 <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> f1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> f2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> newf0 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f0<span class="token punctuation">,</span> f2<span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> newf1 <span class="token operator">=</span> f0 <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> newf2 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f2<span class="token punctuation">,</span> f1<span class="token punctuation">)</span><span class="token punctuation">;</span>            f0 <span class="token operator">=</span> newf0<span class="token punctuation">;</span>            f1 <span class="token operator">=</span> newf1<span class="token punctuation">;</span>            f2 <span class="token operator">=</span> newf2<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span> f2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>写在回家的前一夜</title>
      <link href="/2022/07/18/%E5%86%99%E5%9C%A8%E6%94%BE%E5%81%87%E5%89%8D%E7%9A%84%E4%B8%80%E5%A4%9C/"/>
      <url>/2022/07/18/%E5%86%99%E5%9C%A8%E6%94%BE%E5%81%87%E5%89%8D%E7%9A%84%E4%B8%80%E5%A4%9C/</url>
      
        <content type="html"><![CDATA[<p>到了回家前的最后一晚。按照惯例打扫了宿舍，收拾了行李，把充电宝充上电。</p><p>西安近来的天气很不怎么样。闷热天气像极了南京的夏天。兴华永远不新鲜的西瓜也像极了教超。每天苦闷的永远就是那么几事，导师，论文，工作。有时候觉得自己像祥林嫂一样啰嗦——可能是比祥林嫂还不堪，祥林嫂每天哭诉阿毛之死，我的这些小小的苦闷又哪里丝毫抵得上祥林嫂丈夫死于风寒儿子殒命狼口的悲凉。</p><p>有时希望有一处能倾诉所有苦恼和痛苦的地方。可这终究是煎水成冰，痴人说梦。人与人之间连设身处地尚且需要努力才能做到，遑论感同身受。</p><p>下午跟老师请假时是很有几分紧张的，暑假前总会想想自己这半年究竟做了什么。自我审视的结果似乎是什么都没做，但是每天又忙忙碌碌的。碌碌无为：我们的祖先为我们留下了丰富的词库用来形容人的各种窘境。得到老师的回复可以回家，但是下周就要回来，回家之后还要继续推进论文。又是满心的槽想吐。更加确定了自己就是一个情绪垃圾桶。</p><p>好久没有睡过不做梦的觉了——在成功入睡都成困难的时候还奢求睡眠质量实在是贪心。明天回家就能吃到烩面刀削面，能见到几个想见的朋友了，这点宽慰似乎是今晚可以安心入眠的保障。</p><p>干什么，干什么啊朋友，明天就回家了今天高兴点！还好还有上周没喝完的库存科罗娜。酒精的催发似乎也是入眠的保障之一。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/33edcf1c930946e19adf93f4f8f3466.jpg" alt="只顾着喝了没拍照，图是前几天喝的福佳"></p><p>天气预报说西安今晚会下雨耶，乌云密布囤积了小半个月的水汽可以倾盆而下了。那么我的小小烦恼，又该找谁去倾倒？</p><hr><p>少年不识愁滋味，爱上层楼，爱上层楼，为赋新词强说愁；<br>而今识尽愁滋味，欲说还休，欲说还休，却道天凉好个秋。</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回溯算法</title>
      <link href="/2022/07/16/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/"/>
      <url>/2022/07/16/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h5 id="回溯算法"><a href="#回溯算法" class="headerlink" title="回溯算法"></a>回溯算法</h5><p>是一种类似于深搜的穷举类型的算法，回溯算法在遍历树的树枝，而深搜则是在遍历树的节点<br>在解决回溯算法时需要注意的几个问题是：</p><ul><li>路径：即当前已做出的选择</li><li>选择列表：即站在当前节点上，可以做出的选择</li><li>结束条件： 即如何判断已经到达了树的底部，无法再做选择</li></ul><h5 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h5><p>主要的核心操作是在递归调用之前做出选择，将选择从选择列表中删除，在递归之后再撤销已做出的选择。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> option <span class="token keyword">in</span> options<span class="token punctuation">:</span>    <span class="token comment"># 做出选择</span>    将该选择从选择列表中移除    路径<span class="token punctuation">.</span>add<span class="token punctuation">(</span>option<span class="token punctuation">)</span>    backtrack<span class="token punctuation">(</span>路径<span class="token punctuation">,</span> 选择列表<span class="token punctuation">)</span>    <span class="token comment"># 撤销选择</span>    路径<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>option<span class="token punctuation">)</span>    将该选择重新加入选择列表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="回溯算法应用"><a href="#回溯算法应用" class="headerlink" title="回溯算法应用"></a>回溯算法应用</h5><ul><li><a href="https://leetcode.cn/problems/permutations/">T46 全排列</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220629092430.png" alt="全排列"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> temp<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> ans<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span><span class="token operator">&amp;</span> used<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>used<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">permute</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> ans<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> temp<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">used</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://leetcode.cn/problems/combination-sum/">T39 组合总和</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220629160803.png" alt="组合总和"></p><ul><li>题解<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> temp<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> ans<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> <span class="token keyword">int</span> startIndex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            target <span class="token operator">-=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> target<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 撤销选择</span>            target <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">combinationSum</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> temp<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> ans<span class="token punctuation">;</span>        <span class="token function">backtrack</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><a href="https://leetcode.cn/problems/combination-sum-ii/">T40 组合总和2</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220629154746.png" alt="组合总和2"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> nums<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> temp<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&amp;</span> ans<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span><span class="token operator">&amp;</span> used<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> <span class="token keyword">int</span> startIndex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// 去重</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> used<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token comment">// if(nums[i] > target) continue;</span>            temp<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            target <span class="token operator">=</span> target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> used<span class="token punctuation">,</span> target<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 撤销选择</span>            target <span class="token operator">+=</span> temp<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            temp<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">combinationSum2</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> temp<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> ans<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">used</span><span class="token punctuation">(</span>candidates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>candidates<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> candidates<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">backtrack</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> ans<span class="token punctuation">,</span> used<span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>9.20更新，最近又刷了一些回溯算法的题目，感觉难度还是比较大的。写一个回溯算法框架本身不是很难，但是困难的是要怎么用这种相对笨重的算法通过测例。重点还是在于<strong>撤销选择</strong>和<strong>剪枝</strong>这两个操作上。之后再做题的话会把这两个操作单独的注释出来。<br>撤销选择是回溯算法的核心思想，所谓回溯就是撤销选择。<br>剪枝则是因为回溯算法本质上是dfs遍历，这样导致时间复杂度往往是极高的，就是暴力搜索，很多时候不能直接通过测试，因此使用剪枝来规避一些没有必要的遍历，从而降低时间复杂度。</p><ul><li><a href="https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/">T698 划分为k个相等的子集</a></li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20220920100545.png" alt="划分为k个相等的子集"></p><ul><li>题解</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> bucket<span class="token punctuation">;</span>    <span class="token keyword">bool</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token keyword">int</span> cur<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 剪枝</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> bucket<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">||</span> bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> nums<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">>=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 把当前的数放进第i个桶中</span>                bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-=</span> nums<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> k<span class="token punctuation">,</span> cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token comment">// 在这里回溯，不行的话就拿出来</span>                bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> nums<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">bool</span> <span class="token function">canPartitionKSubsets</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">%</span> k <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> target <span class="token operator">=</span> sum <span class="token operator">/</span> k<span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">buffer</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>        bucket<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> k<span class="token punctuation">,</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 刷题赎罪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>朝北的房子也有阳光</title>
      <link href="/2022/06/01/%E6%9C%9D%E5%8C%97%E7%9A%84%E6%88%BF%E5%AD%90%E4%B9%9F%E6%9C%89%E9%98%B3%E5%85%89/"/>
      <url>/2022/06/01/%E6%9C%9D%E5%8C%97%E7%9A%84%E6%88%BF%E5%AD%90%E4%B9%9F%E6%9C%89%E9%98%B3%E5%85%89/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="//music.163.com/outchain/player?type=2&id=1937146355&auto=1&height=66" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>很久不写博客，可能有两个月的时间。<br>两个月中的头一个月不写博客是忙着和师妹谈恋爱。<br>两个月中的后一个月不写博客是忙着从失恋中走出来。</p><p>今天晚上吃完饭回工位就没来由的一阵累，然后是一阵心悸，焦虑又找上了门。很久没有这种感觉了，这学期过来之后我以为自己已经将自己的心态调整的足够的强大，不仅是因为谈了一段很好的恋爱，还因为对自己的人生有了很明确的规划。研究生三年应该做什么，做到了会怎么样，没做到会怎么样，怎么补救，最坏的出路是什么，都想得一清二楚，念头无比的通达，自然不会焦虑，晚上也能一觉到天亮。</p><p>累了就回宿舍休息，极度疲惫的情况下，似乎走几步路都十分的艰难，挣扎着终于回到宿舍，打开门，一眼看到的是打在墙上的太阳（请大家忽略我的渣渣像素）。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/0E0B80B240869405D32399DE3EF6B002.png" alt="不常见的宿舍的阳光"></p><p>在北回归线以北的朝北的房间里，阳光事实上是一种罕见的景色，也难怪我会愣神。放空自己的一段时间，坐在床上静静的看着这难得一见的阳光。直到太阳落山，直到华灯初上。我又在窗前拍下了这样一张天空。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/80692051D4A694E7E5A472CD44AB0F8F.png" alt="治愈系天空"></p><p>多么华丽的语言也形容不了初见时的惊艳，只能在心中感叹一句，真好看啊。这么色彩层次分明鲜艳有好看的天空和云朵，上次注意到是在什么时候？</p><p>根据科学的常识，北回归线以北朝北的房间中怎么可能照的到阳光？根据生活的常识，一对很爱很爱刚谈了两个月的情侣又如何会分手？</p><p>人力终有穷，生活中有太多的突发情况了。我们永远无法预料到所有生活中可能遇到的各种突发情况。试图通过为所有的突发情况做预案来达到减缓焦虑的目的，只会让事情变得更糟。</p><p>应该怎么调整策略？坐在床上看看太阳可能是一个不错的选择。意外和惊喜在不断的出现，虽然生活中更多的还是平淡的没有阳光的日子，那这些珍贵的阳光的点缀才使得我们的生活熠熠生辉。</p><p>都会好的，朝北的房间中可以照的到太阳，还有什么不可能呢？</p><hr><p>经过考证，朝北的房间中可以照的到太阳的原理是因为创新港的房子并不是正南正北，我所在的这栋楼是坐东南面向西北。没有违背基本的科学原理。我们觉得朝北的房子不可能照的到太阳，有没有想过，房子本身可能不是严格的朝北呢？</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>写在寒假在家的最后一夜</title>
      <link href="/2022/02/18/%E5%86%99%E5%9C%A8%E5%AF%92%E5%81%87%E5%9C%A8%E5%AE%B6%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9/"/>
      <url>/2022/02/18/%E5%86%99%E5%9C%A8%E5%AF%92%E5%81%87%E5%9C%A8%E5%AE%B6%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<p>从上了大学开始，故乡就只有寒暑。</p><p>想到回学校就要五天三门考试；想到回学校就要面对一周一次组会；想到堆了一假期没写的各种大作业就很焦虑。甚至想到回学校就要面对导师分配给我做毕设的师弟都很焦虑（不是我毕业我焦虑个鸡毛）。</p><p>在家真的好舒服啊。每天睡醒吃饭，想看书就随便看会，不想看书就出去打打台球或者偷懒看看小说。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/c54c5bb167d8cb2b8e9a9705390669f.jpg" alt="每天高强度军事化训练开学直接把师兄干碎"></p><p>哦对了，在家想打牌就有人打牌，想打麻将就打麻将，想打双升级就打双升级，天天都打。还有初七来我家玩的可爱的小外甥女~真是把心都萌化了。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/1cbe55dcf25322267950861781ec8aa.jpg" alt="可爱的小外甥女~~"></p><p>寒假没在家呆很长时间，好像就是从22号到今天吧，一天一天的真是过得太快了，但是好像也已经适应了在家里边生活的这种节奏。甚至在某些程度上，这一个月的闲适生活就又改变了我的一些想法，我甚至开始觉得考个家里边的事业编也不错，去大数据局上班，钱少，但是事少离家近（甚至近到我家走路去上班只要两分钟，从西门出去过条马路就到）。</p><p>临走的前夜，心里边开始有些空落落的，似乎不仅是对家里边的留恋，还有对前路的恐惧和焦虑，但是，你还是需要穿过荆棘，踏过那些野草丛生的路，一点一点朝前走。你要勇敢的面对自己，面对接下来会接受的困难与挑战，因为那就是我，唯一要走的路啊。李垚啊李垚，振作起来啊！新学期加油吧！</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一无所有的年纪</title>
      <link href="/2022/01/11/%E4%B8%80%E6%97%A0%E6%89%80%E6%9C%89%E7%9A%84%E5%B9%B4%E7%BA%AA/"/>
      <url>/2022/01/11/%E4%B8%80%E6%97%A0%E6%89%80%E6%9C%89%E7%9A%84%E5%B9%B4%E7%BA%AA/</url>
      
        <content type="html"><![CDATA[<p>在这个一无所有的年纪，有很多事情说起来都特别的羞耻。</p><p>我本应该是一个很热爱生活的人。但是我不知道每天早上为什么要起床，就像不知道每天晚上为什么要睡觉。每天晚上睡前都怕自己长眠不起，似乎能听到心脑血管对熬夜的抗议，可是又一刻不敢停的把自己投入到碎片化的低廉的奶头乐中恨不得溺死其中，稍一抬头就感觉现实中的压力和不快扑面而来，做噩梦已经成了一种习惯，好像已经很久没有一个真正的好的睡眠了，所以你看，有的人活着，就像死了。<br>人是其一切社会关系的总和，活着活着，就没有了自我。之所以不想长眠不起，一定程度上因为还有关心我的爸爸妈妈，他们为我付出巨大然而还未得到我的丝毫回报。之所以不想长眠不起，还有可能是因为这个世界上还有很多很多我看不惯的人，一觉长眠不起未免遭人耻笑。之所以不想长眠不起，也有一部分是因为人的求生本能，活着很累，但是死亡的未知好像更让人害怕。</p><p>不知道自己在胡思乱想什么，就像不知道自己在忙忙碌碌的做什么。不知道自己还在期待什么，不知道自己应该期待什么。没有人给我一个模板化的人生，20多岁的大男孩应该干些什么，法理上的成年人，心理上，大概还是个没有断奶的巨婴。</p><p>20多岁的年龄，我好迷茫。</p><p>偶尔看见宿舍楼下耳鬓厮磨的情侣，会感叹爱情真好，20多岁的年纪正值青春年少应该有甜甜的恋爱；有时也会听说同学今年又发了多少年终奖，也会感叹有钱真好，20多岁的年纪正是年少有为应该在职场上大展身手；经常也会聊到隔壁组哪个大佬转博了或者发了什么顶会顶刊，又会感叹多学点知识真好，20多岁的年纪正是科研的黄金时期应该在这时候攒下科研路上的第一桶金。可我的20多岁除了怨天尤人别的什么都没有，好像很久都没有做过什么让自己满意的事情了，像烂在下水道里的一具腐臭的尸体。</p><p>有很多应该去做的事情啊，老板交待的活没干，作业没写，考试没复习，题也没刷。这样的我，又凭什么让自己满意呢。还有很多应该做的事情啊，好害怕，所以先看会小说麻痹一下自己吧。疫情只是借口，实则是像具尸体一样的自己身上散发着名为懒惰的腐臭味。这样的自己，凭什么能睡个好觉。</p><p>新的一年，希望能够对得起自己，也扎扎实实地做几件让自己满意的事情。或许也应该希望能有一个好的睡眠，希望能够多散发些温度。再不济，也应该接受自己平庸的20多岁，继续在这个一无所有的年纪里徘徊打转。</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新年快乐！</title>
      <link href="/2021/12/31/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90%EF%BC%81/"/>
      <url>/2021/12/31/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/7hb1I50OsWdxG9c6lOMaS8?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>新年快乐！年年有今日，岁岁有今朝！</p><h3 id="南航篇"><a href="#南航篇" class="headerlink" title="南航篇"></a>南航篇</h3><p>从头而论的话，今年的开始还是得从南航说起。今天晚上在宿舍跟室友一块吃饭突然想起来当时在南航跨年都是有篝火的，突然就好想念南航。</p><p>去年这个时候，应该是刚考完研？好像在宿舍摆烂。感觉自己考得不是很好，就还在纠结到底是去上班还是二战。稀里糊涂的在学校摆了几天烂，因为害怕被疫情困在本地过年，就赶紧回家了。回家之后的生活也没啥意思，就是每天吃吃喝喝睡睡。也算是度过了一个很快乐的春节吧。很快，过完了春节就是查分的日子，好像是正月十五当天，也是返校的日子，也是查分的日子。西交是早上八点钟公布分数，前一天晚上睡得出乎意料的好，但是第二天早上三点就醒了，一直听说小道消息说会提前放分，然后就一直紧张的不断刷新，好像是七点多钟？分数查出来了，397分。比我预估的高了二三十分吧，高兴的直接跳了起来。</p><p>但是没高兴多久，很快的，考研群里边发了一个投票，就发现这个分数好像也不是很高。更快的，发现好像只能排80名左右，但是只能录取40个人。只能说是寄了。但是，当时想考研群里边总是有水分。所以还是在忐忑不安的心情里边去了学校。在研友们的鼓励下（在此感谢肖维佳鑫，郭钊利，徐新雨等人，最后大家都有非常不错的前途，也都算是如愿以偿），还是积极的开始准备复试了。还好毕设老师叶老师人也是非常的好，跟我们说先去准备复试，复试完再来做毕设也可以。所以，就还是开始准备复试。从来没有学过信号与系统，但是当时就是拿着奥本海姆的那本大绿书默默的啃。西交的复试比较晚，学到最后，图书馆只剩我自己了。每天固定的坐三楼窗户前边，看着玉带河的水，刷着三一。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/6298dd074db6f41290cde76d6b3a916.jpg" alt="玉带河的水不脏的时候还是很干净的"></p><p>然后就去西安复试吧，上飞机前的一瞬间，接了一个之前联系的航院的老师的电话，说航院今年没有调剂名额了。说实话还是挺绝望的。但是也算是破釜沉舟吧，复试的发挥还算不错。虽然复试完直接灰溜溜的跑回家了。回家不到两天就放榜了，竟然逆袭了。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/e371125fa8207ff6f2df6af7ebac628.jpg" alt="复试完回家玩的时候拍的花"></p><p>然后就回学校了。回学校不到一周，就是毕设的中期答辩。所以直接被叶老师抓去实验室做毕设。（然而中期答辩的时候还是只有一百多行代码，开局一张图，后边的全靠编hhhh）在峰哥，吴哲学长和亲爱的叶老师的帮助下，也算是磕磕绊绊的完成了毕设的内容。在此也感谢叶老师对我的指导，包括学术上和人生上。做完毕设之后，突然就感觉自己好像要毕业了。匆匆忙忙的答辩完，吃了毕业饭，拍了毕业照，稀里糊涂的，就毕业了。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/e23b921d905da45bea5f1844d72b61b.jpg" alt="看我高超的摄影技巧"></p><p>大家也拉着行李箱，各奔东西啊。哲哥，朱施平和想响去上班了，杨建铧，肖维这些人留在了南航读研。天下没有不散的宴席啊，就，暂告一段落吧！</p><h3 id="暑假篇"><a href="#暑假篇" class="headerlink" title="暑假篇"></a>暑假篇</h3><p>感谢吕老师，没有暑假就把我叫去学校，给了我一个完整的长达三个月的暑假hhhh。</p><p>回家本来说是要学车，但是，先是7.20极端暴雨（真的是从小到大也没见过这么大的雨啊,嵩山上都直接挂起了瀑布）</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/CF44E3D773D24AB817B6EC56F5F12C96.png" alt="雨后的嵩山，见过的都说好看"></p><p>暴雨之后是新冠疫情的突然来袭，然后驾校就被停了，我的科三，我的驾照，他又没了。</p><p>很快啊，在家封闭的一个月，九月初就开学了，可能是人生中最后一个暑假？明年的年终总结就来解读一下是不是真的是人生中的最后一个暑假。</p><h3 id="创新港篇"><a href="#创新港篇" class="headerlink" title="创新港篇"></a>创新港篇</h3><p>开学就来到了创新港，单论生活条件的话，创新港的的确确是国内高校的顶级享受，吕老师对我还算不是很push，师兄师姐对我也很照顾，同门人也都很好。</p><p>生活在创新港的生活还是很闲适的，创新港在郊区，没有太多的课外生活，每天上上课，去工位学学习，跟师兄和同门一块吃饭，偶尔也去道科吃顿好的（其实也不算偶尔去，还是挺经常去的）</p><p>逐渐逐渐的，也适应了在创新港的这种生活。创新港的落日，创新港的月亮，也在创新港看了西安的第一场雪。</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/e7028b14719caf715ab59a0afcc7ad8.jpg" alt="创新港的落日"></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/f0ab7790db9b94bccdb39d3db1ddc82.jpg" alt="创新港的雪"></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/e804174f2986722d91d64fdebe9267f.jpg" alt="创新港的月"></p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/aeb7a291d9126d61bbdf4f3fb69d419.jpg" alt="还有创新港的鸽"></p><p>仓促间也不知道怎么描述在创新港的生活，就先写到这里吧！今年的跨年是很特殊的一年，在疫情中度过了2021年的最后一天，2021年的最后一天做了两次核酸。希望疫情尽快过去，能够回家过年吃上想吃的饭！也希望新的一年，能学到更多的知识，开开心心，平安顺遂！</p><p>再见了2021！你好2022！</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最近的生活碎片</title>
      <link href="/2021/12/03/%E6%9C%80%E8%BF%91%E7%9A%84%E7%94%9F%E6%B4%BB%E7%A2%8E%E7%89%87/"/>
      <url>/2021/12/03/%E6%9C%80%E8%BF%91%E7%9A%84%E7%94%9F%E6%B4%BB%E7%A2%8E%E7%89%87/</url>
      
        <content type="html"><![CDATA[<hr><p>2021.12.03更新</p><h4 id="第一件事"><a href="#第一件事" class="headerlink" title="第一件事"></a>第一件事</h4><p>读研真的是一件很考验心理素质的事情。<br>还好，偶尔的我也能去喂一喂鸽子放松一下。<br>尽管鸽子飞到手上的那一瞬间压力是直接拉满了的。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20211130_062649350_iOS.jpeg" alt="鸽鸽鸽鸽鸽"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20211130_062933461_iOS.jpeg" alt="鸽鸽鸽鸽鸽鸽鸽鸽鸽鸽"></p><p>最多的时候，我的一只胳膊上站了三只鸽子。但是他们竟然真的不咬人hhh。虽然他们尖利的爪子还是划伤了我稚嫩的皮肤。</p><h4 id="第二件事"><a href="#第二件事" class="headerlink" title="第二件事"></a>第二件事</h4><p>前天晚上跟师兄和同门一块去吃了火锅。在一个叫西张一村的繁华镇子。给我一种小时候镇上集市的感觉，这种奇怪的熟悉感是南京永远找不到的。十五块钱十斤的苹果更是南京不可能拥有的。从这方面来说好像来西安上学也是一个还不错的选择。88块钱两斤的鲜切羊肉吃不了上当，遂决定下周继续去吃。<br>现在的作息完全是很奇怪的，周五上课，周六开组会，周日上课，周一上课。每次周一上完课，虽然是在周一，但都有一种像周五一样如释重负的感觉。现在周二周三反而过的像周末一样。</p><h4 id="第三件事"><a href="#第三件事" class="headerlink" title="第三件事"></a>第三件事</h4><p>该死的机器学习课终于完事了。在周二从网上偷完最后一次作业的代码之后就有一种如释重负的感觉。仿佛便秘了一周终于拉了个干干净净。<br>没想到上了研究生也有这种课，这种老师。当然，上了研究生之后多的是让我惊讶的事情。就教学质量来说，或者单论起这个课的教学质量来说，还真是跟当时机电的那几个五毒老师差不多了。这老师一直在群里边发表一些奇怪言论，我真的好奇他是不是反串的啊。</p><h4 id="第四件事"><a href="#第四件事" class="headerlink" title="第四件事"></a>第四件事</h4><p>昨天跟师兄师姐聊天，他们说，你下一步要做什么，还是要看你要接着读博还是想找工作。</p><p>对这件事情完全是迷茫的。</p><p>因为我很羡慕在互联网大厂年薪零点几伯的师兄师姐，但是，另一方面，我觉得互联网寒冬很有可能就会在这几年中的某一天不期而至（就算不来，每天上班也是提心吊胆的；例如新东方，一纸文件就死的透透的），其次，我对自己能否接受996的工作制度表示十分的没有信心。</p><p>同时，我也很想能拿到最高的学术头衔。那可是博士啊。但是，这种想读博的意愿似乎不是因为对学术的热爱。也许仅仅是因为想要拿到那个学位。也许从某方面来讲似乎还是虚荣心作祟。读完博之后也不会特别正经的搞科研项目什么的，也许就是找个大中专院校当个不太忙的老师，躺平就好了。</p><p>想不明白。也不想想。想的太多落空的可能就越多。只能随波逐流，浪把我推到哪就是哪了。</p><hr><p>2021.12.9更新</p><h4 id="第一件事-1"><a href="#第一件事-1" class="headerlink" title="第一件事"></a>第一件事</h4><p>以后尽量把这个栏目办成周更的，每周五更新（好的，虽然这个文件周四就创建了，但是现在在写这篇文章的时候已经是周日了）。</p><h4 id="第二件事-1"><a href="#第二件事-1" class="headerlink" title="第二件事"></a>第二件事</h4><p>今天是十分倒霉的一天。早上起床有落枕的感觉，中午起床穿鞋的时候，腿又抽筋。。。（这句是周四写的）<br>现在总是经常性地感到累。我好累啊，仿佛已经成了一种习语没事就挂在嘴边说两句，我好累啊。但是仔细想想自己累吗。好像真的挺累的。但是在仔细想想，自己好像啥也没干啊，就好累了。我把这种事情归结于精力被很多不重要的琐事给占用了。每天睡到九点半起床到实验室，有效工作时间不到两个小时就去吃饭。中午吃完饭回宿舍不睡觉玩手机，导致下午到工位就很累啥也看不进去，于是安慰自己不如摸会鱼看会手机，看到五点钟去吃饭，吃完饭又去打球到晚上十点，回宿舍又觉得自己天天不在宿舍好累啊，自我感动，于是决定明天要晚点上班，然后第二天早上九点半起，周而复始。但是再想想这一天一天的，其实啥都没干，以后一定要减少不重要的事情的时间开支。<br>所以下周一定要开始改变了。</p><ul><li>[ ] 早上八点半起床，九点前到实验室</li><li>[ ] 晚上不要老是上去打球，每周只打两次</li><li>[ ] 坚持每天刷一道leetcode</li></ul><h4 id="第三件事-1"><a href="#第三件事-1" class="headerlink" title="第三件事"></a>第三件事</h4><p>鸡同鸭讲真是十分痛苦的事情。（本人此处并不针对某l老师）<br>周六开组会，周日从十点上课到晚上九点。就挺离谱的。更离谱的是周六晚上开组会也不听，周日上课还是不听。以后再开组会，就是好的好的好的，嗯嗯嗯。迅速结束组会。<br>万幸中的万幸，下下周数理统计就可以上完了。再熬两周！</p><h4 id="第四件事-1"><a href="#第四件事-1" class="headerlink" title="第四件事"></a>第四件事</h4><p>这周刚开始时疯狂想吃烧饼夹卤大肠。周中间非常想吃烤的大肠。现在就是非常想吃干煸肥肠。等于说这周就是跟大肠干上了。<br>创新港这边有两家麻辣烫，一家是杨国福，一家是张亮（可以把创新港换成中国任何一个地名，这句话也能成立）。杨国福的汤没有张亮好喝，张亮的麻酱没有杨国富好吃。于是，在这个寒冷，劳累，<del>充满了收获</del>（啥都没干）的周日，我和同门一块去吃了鸡公煲。教师公寓的鸡公煲还是很好吃的。希望下周推出新品肥肠煲，我一定去尝一下。</p><hr><p>2021.12.17更新</p><p>12.17号创建的文件拖到现在再写也真是没谁了……</p><h4 id="第一件事-2"><a href="#第一件事-2" class="headerlink" title="第一件事"></a>第一件事</h4><p>上周没有喊累，因为累了就休息。<br>一时休息一时爽，一直休息一直爽。<br>但是，代价就是作业全都没做。这周好像就做了一个数理统计的作业，老师上周说的文章也没看，感觉自己老是在忙一些奇奇怪怪的事情。不知道为什么。还是要好好看！<br>这周末要把作业全部搞定。然后下周一定好好看网络跑代码！说不摸鱼就不摸鱼。</p><h4 id="第二件事-2"><a href="#第二件事-2" class="headerlink" title="第二件事"></a>第二件事</h4><p>创新港封校了。离谱。还好在封校前一天出去跟师兄一块吃了一个川湘宴。大肘子永远的神！<br>感觉疫情之后好多事情都变化好大啊。以前根本不敢想，随时刷新毒圈，一个一线或者二线大城市，说封就封。这种随机来袭的事件是对中国基层治理能力的一次彻彻底底的检验。是骡子是马拉出来遛遛。有的地方发现疫情就能迅速控制迅速的将疫情扑杀，而有的则需要一直拖延到造成一定规模的社区传播不得不封城。</p><p>这里就不得不讲几个西安笑话：<br>建议广大市民非必要不展码，不亮码。——我没事自己整个健康吗在家扫着玩？<br>是否自愿放弃考研 本人已知晓可能带来的风险并愿意承担相应责任。——这有哪个字是人该说出来的话？ <img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/13abb0a5cc4b4d9e4a1457667fde50f.jpg" alt=""></p><p>但是还是祝福西安赶紧战胜疫情！虽然已经不敢奢望今年能回家过年了……可能是第一年不回家过年。 <img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/97f1794635f3caba0d64f932806049a.jpg" alt=""></p><h4 id="第三件事-2"><a href="#第三件事-2" class="headerlink" title="第三件事"></a>第三件事</h4><p>这周有好几个bigbig月亮，周日出去吃饭的时候正好是农历的十五，以为是2021年最后一轮圆月。没想到竟然幸运的遇上了蓝月亮，周一晚上的月亮也这么圆啊！ </p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/e804174f2986722d91d64fdebe9267f.jpg" alt="这个是周一的月亮"> </p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/7a5cefaeb6db0827c8da246bd9632ae.jpg" alt="这是周日的月亮"> </p><p>看星星看月亮真的是一件很震撼的事情，当你低着头往餐厅走去准备吃饭时，抬头一看，映入眼帘的是一轮巨型的月亮。还是会有一种江畔何人初见月，江月何年初照人的哲思？或者说隔千里兮共明月的相思？</p><h4 id="第四件事-2"><a href="#第四件事-2" class="headerlink" title="第四件事"></a>第四件事</h4><p>明天就是考研的日子了，好紧张啊。</p><p>现在想想，好像考研也是很久之前的事了，但好像也没多久，在家复习，在崇高路桥头复习，在图书馆复习的日子似乎还是历历在目。似乎还能闻得见咖啡的香味，闻得见跟某只🕊一块整的薯条和炸鸡……</p><p>今年还是有不少朋友考研的。祝福他们都能考上！</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>机器学习与数据挖掘考试复习</title>
      <link href="/2021/11/19/review-of-dmml/"/>
      <url>/2021/11/19/review-of-dmml/</url>
      
        <content type="html"><![CDATA[<h3 id="引言之前"><a href="#引言之前" class="headerlink" title="引言之前"></a>引言之前</h3><p>这门课谁选谁傻逼<br>如果你恨一个人，那就快让他来选zjk老师的机器学习与数据挖掘吧！<br>明年一定不选了</p><h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><h4 id="1-数据挖掘中知识发现的几个步骤。"><a href="#1-数据挖掘中知识发现的几个步骤。" class="headerlink" title="1.数据挖掘中知识发现的几个步骤。"></a>1.数据挖掘中知识发现的几个步骤。</h4><ul><li><p>确定知识发现的目标：确定知识发现的目的，要发现哪些知识。</p></li><li><p>数据采集： 从网络爬虫、数据库导出、CSV文件等数据源获取目标数据采集到指定的系统中。“数据质量决定数据挖掘的上限，而算法仅仅是逼近这个上限。”</p></li><li><p>数据探索：采集到的数据往往不可以直接使用，需用采用可视化技术，将数据的特征展现出来，探索数据特征的基本统计描述、数据特征间的相似性/相异性。</p></li><li><p>数据预处理：主要包括数据清理、数据集成、数据规约、数据变换和离散化等几个部分(1) 数据清理：主要包括缺失值与异常值的清理(2) 数据集成：将多种数据源集到一起，放在一个数据仓库的过程。在数据集成的过程中会出现实体识别（Entity Resolution）、冗余属性识别、数据值冲突等问题。(3) 数据规约：在保证原始数据信息不丢失的前提下，减少分析使用的数据量。数据规约中最常使用的方式是维归约。维归约的含义是将原先高维的数据合理地压缩成低维数据，而减少数据量，常用的方法为特征的提取，如线性判别分析LDA和主成分分析PCA。(4) 数据的变换：将原始的特征数据进行归一化和标准化的操作。(5) 数据的离散化可通过聚类、直方图、分箱等方法完成。</p></li><li><p>数据挖掘（模型选择）：对预处理后的数据进行挖掘的过程。传统的数据挖掘将算法大体分为有监督的学习与无监督的学习两种。</p></li><li><p>模型评估：对数据挖掘结果的评价，也是评价模型效果好与坏的标准，常见的评估指标有精度、召回率等。</p></li><li><p><a href="https://blog.csdn.net/Codeoh/article/details/108816809">原文链接</a></p></li></ul><h4 id="2-数据挖掘的应用"><a href="#2-数据挖掘的应用" class="headerlink" title="2.数据挖掘的应用"></a>2.数据挖掘的应用</h4><ul><li>目标检测</li><li>文本识别</li><li>语音识别</li><li>自动驾驶</li><li>疾病诊断</li><li>社交网络推荐</li><li>……</li></ul><h3 id="学习的可行性"><a href="#学习的可行性" class="headerlink" title="学习的可行性"></a>学习的可行性</h3><h4 id="1-Hoeffding不等式"><a href="#1-Hoeffding不等式" class="headerlink" title="1. Hoeffding不等式"></a>1. Hoeffding不等式</h4><p>Hoeffding不等式给出了随机变量的和(随机变量的和)与其期望值偏差的概率上限。</p><p>一般形式：<br>令$X_1,……,X_n$为独立的随机变量，且有$X_i\in [a,b]，i=1,……,n$。这些随机变量的和为：</p><script type="math/tex; mode=display">S_n=X_1+X_2+…+X_n</script><p>此时，霍夫丁不等式可表示为：</p><script type="math/tex; mode=display">\forall t>0,P(S_n-E[S_n]\geq t)\leq exp({-\frac{2t^2}{\sum_{i=1}^{n}(b_i-a_i)^2}})</script><h4 id="2-使用Hoeffing不等式说明学习的可行性"><a href="#2-使用Hoeffing不等式说明学习的可行性" class="headerlink" title="2. 使用Hoeffing不等式说明学习的可行性"></a>2. 使用Hoeffing不等式说明学习的可行性</h4><p>关键是从$h(x)$在训练样本上的错误率推导到对于全体样本的错误率。由霍夫丁不等式可知这两个错误率是PAC的，所以，当对于训练样本，$h(x)$的错误率可以接受时，对于全体样本，$h(x)$的错误率就也就还凑合。</p><p>假设有一个假设空间$H$，机器学习的任务可以抽象为从训练样本$D$中学习到一个函数$h(x)$，使得这个函数与目标函数$f(x)$相等，此训练样本中包括$N$个样本。当学习到的函数$h(x)=f(x)$时，认为是正确的。但是我们不关注正确的情况，我们关注的是错误率。在这里，定义两个错误率：<br>$E_{in}(h \neq f)$代表h在训练样本上的错误率；  </p><p>$E_{out}(h \neq f)$代表h在全体样本上的错误率。<br>由Hoeffding不等式：</p><script type="math/tex; mode=display">P[|E_{in}(h\neq f)-E_{out}(h\neq f)|\geq \epsilon]\leq 2exp(-2\epsilon^2N)</script><p>其中，$N$为训练样本集中的样本数。当$N$足够大时，有：</p><script type="math/tex; mode=display">P[ E_{in}(h\neq f)-E_{out}(h \neq f)  \geq \epsilon]\simeq 0</script><p>可以认为$h(x)$对于训练样本的错误率和对于全部样本的错误率是PAC的。此时，机器学习是可行的。</p><h3 id="数据与数据预处理"><a href="#数据与数据预处理" class="headerlink" title="数据与数据预处理"></a>数据与数据预处理</h3><h4 id="1-有哪四种不同的属性类型？分别可以进行什么操作？"><a href="#1-有哪四种不同的属性类型？分别可以进行什么操作？" class="headerlink" title="1.有哪四种不同的属性类型？分别可以进行什么操作？"></a>1.有哪四种不同的属性类型？分别可以进行什么操作？</h4><ul><li>标称属性：标称属性的值往往代表了物体的某种状态，不具有有意义的序而且不是定量的。如人类的头发颜色，可分为黑色，黄色，棕色，金色等；对标称属性的值一般进行众数，熵，列联相关，卡方检验操作。</li><li>序数属性：序数属性的值之间具有有意义的序，但是相继值之间的差未知。比如买衣服分为小号，中号和大号。对于序数属性的值，一般进行求中值，求百分位，秩相关，游程检验，符号检验等操作。</li><li>区间标度属性：区间标度属性首先是一种数值属性，可以用实数值表示，可以计算不同值之间的差值，但是，区间标度属性不做比例讨论，比如温度和日期；对于区间标度属性，我们一般采用均值，标准差，皮尔逊相关，t和F检验等操作。</li><li>比例标度属性：比例标度属性也是一种数值属性，但是这种属性的值可以描述一个值与另一个值之间的倍数关系，如货币，重量，高度等；对于比例标度属性的值，我们一般进行几何平均，调和平均，百分比变差等操作。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/3.png" alt="2"></li></ul><h4 id="2-非对称属性？"><a href="#2-非对称属性？" class="headerlink" title="2.非对称属性？"></a>2.非对称属性？</h4><p>非对称属性是指，只有非零数据属性重要的属性，比如二元属性就是一种非对称属性。</p><h4 id="3-数据对象之间的相似度和相异度计算。（可能会考计算？）"><a href="#3-数据对象之间的相似度和相异度计算。（可能会考计算？）" class="headerlink" title="3.数据对象之间的相似度和相异度计算。（可能会考计算？）"></a>3.数据对象之间的相似度和相异度计算。（可能会考计算？）</h4><p>相似度：评价两个数据对象之间有多相似，通常落在区间[0,1]上。<br>相异度：评价两个数据对象之间有多不同，最小值通常为0，最大值可能为$+\infty$<br>为了评价相似度和相异度，通常引入邻近性的概念。</p><h4 id="4-数据预处理的主要任务。"><a href="#4-数据预处理的主要任务。" class="headerlink" title="4.数据预处理的主要任务。"></a>4.数据预处理的主要任务。</h4><ul><li>数据清洗</li><li>数据整合</li><li>数据转化</li><li>数据约减</li><li>数据离散化</li><li>数据清理（data cleaning）例程通过填写缺失的值，光滑噪声数据，识别或删除利群点，并解决不一致性来清理数据。如果用户认为数据是脏的，则他们可能不会相信这些数据上的挖掘结果。此外，脏数据可能使挖掘过程陷入混乱，导致不可靠的输出。尽管大部分挖掘例程都有一些过程用来处理不完整数据或噪声数据，但是他们并非总是鲁棒的（Robust,系统的健壮性）。相反，他们更致力于避免被建模的函数过分拟合数据。因此，一个有用的预处理步骤旨在使用数据清理例程处理你的数据。分析使用来自多个数据源的数据，涉及集成多个数据库、数据立方体或文件，即数据集成（data integration）。代表同一概念的属性在不同的数据库中可能具有不同的名字，导致不一致性和冗余。命名的不一致还可能出现在属性值中。包含大量冗余数据可能降低知识发现过程的性能或使之陷入混乱。显然，除了数据清理之外，必须采取措施避免数据集成时的冗余。通常，在为数据仓库准备数据时，数据清理和集成将作为预处理步骤进行。还可以再次进行数据清理，检测和删去可能由集成导致的冗余。在为分析而选取的数据集是巨大的，这肯定会降低数据挖掘过程的速度。数据归约可以降低数据集的规模，而又不损害数据挖掘的结果。数据归约（data reduction）得到数据集的简化表示，它小得多，但能够产生同样的（或几乎同样的）分析结果。数据归约策略包括维归约和数值归约。在维归约中，使用数据编码方案，以便得到原始数据的简化或“压缩”表示。例子包括数据压缩技术（例如，小波变换和主成分分析），以及属性子集选择（例如，去掉不相关的属性）和属性构造（例如，从原来的属性集导出更有用的小属性集）。在数值归约中，使用参数模型（例如，回归和对数线性模型）或非参数模型（例如，直方图、聚类、抽样或数据聚集），用较小的表示取代数据。对于数据挖掘而言，离散化与概念分层产生是强有力的工具，因为它们使得数据的挖掘可以在多个抽象层上进行。规范化、数据离散化和概念分层产生都是某种形式的数据变换（data transformation）。数据变换操作是引导挖掘过程成功的附加的预处理过程。</li></ul><h4 id="5-处理缺失值的方法。"><a href="#5-处理缺失值的方法。" class="headerlink" title="5.处理缺失值的方法。"></a>5.处理缺失值的方法。</h4><ul><li>删除数据对象或者属性 一种简单而行之有效的方法就是直接删除具有遗漏值的数据对象。然而，即使是不完整的数据对象中也可能包含着一些有用的信息，并且，如果许多对象都有遗漏值，则很难甚至不可能进行可靠的分析。因此，在进行删除操作时应该谨慎的考虑是否合算。</li><li>估计遗漏值 有时，遗漏值何以可靠的估计。例如，考虑大致以平滑方式变化的，具有少量但分散遗漏值的时间序列时，可以通过其他存在的值对遗漏值进行插值操作。如果属性值是连续的，可以取平均值进行代替，如果属性是分类的，则可以使用最近邻中最经常出现的属性值。</li><li>在分析时忽略缺失值 直接将缺失值置零，除非遗漏值的数量很大，否则这样处理的误差并不大。</li></ul><h3 id="决策树学习"><a href="#决策树学习" class="headerlink" title="决策树学习"></a>决策树学习</h3><h4 id="1-决策树学习的基本思想"><a href="#1-决策树学习的基本思想" class="headerlink" title="1.决策树学习的基本思想"></a>1.决策树学习的基本思想</h4><p><a href="https://blog.csdn.net/uonele/article/details/87883111">原文链接</a><br>决策树又称为判定树，是运用于分类的一种树结构，其中的每个内部节点代表对某一属性的一次测试，每条边代表一个测试结果，叶节点代表某个类或类的分布。决策树的决策过程需要从决策树的根节点开始，待测数据与决策树中的特征节点进行比较，并按照比较结果选择选择下一比较分支，直到叶子节点作为最终的决策结果。<br>本质上，决策树算法就是不断地在数据集中寻找最优划分的过程，使划分后得到的子数据集的不确定性不断下降，直到分类完成。</p><h4 id="2-分类错误率，熵，信息增益，如何根据不同的度量选择最佳划分"><a href="#2-分类错误率，熵，信息增益，如何根据不同的度量选择最佳划分" class="headerlink" title="2.分类错误率，熵，信息增益，如何根据不同的度量选择最佳划分"></a>2.分类错误率，熵，信息增益，如何根据不同的度量选择最佳划分</h4><p>分类错误率：</p><script type="math/tex; mode=display">错误率=\frac{错误预测数}{预测总数}</script><p>熵：信息熵使度量样本集合纯度最常用的一种指标。假定当前样本集合$D$中第$k$类样本所占的比例为$p_k(k=1,2,3…,\lvert \gamma \rvert)$，则$D$当前的信息熵定义为：</p><script type="math/tex; mode=display">Ent(D)=-\sum_{k=1}^{|\gamma|}p_klog_2p_k</script><p>信息增益：假定离散属性$a$有$V$个可能的取值$\left\lbrace a^1,a^2,…,a^V \right\rbrace$，若使用$a$来对样本集$D$进行划分，则会产生$V$个分支节点，其中第$v$个分支节点包含了$D$在属性$a$上的所有取值为$a^v$的样本，记为$D^v$，计算$D^v$的信息熵，在考虑不同分支节点包含的样本数不同对分支节点赋予权重，即可计算出用属性$a$对样本集$D$进行划分得到的信息增益:</p><script type="math/tex; mode=display">Gain(D,a)=Ent(D)-\sum_{v=1}^{V}\frac{|D^v|}{|D|}Ent(D^v)</script><p>无论使用什么度量进行表述，我们都希望决策树的分支结点所包含的样本尽可能属于同一类别，即不纯度越低越好。</p><h4 id="3-缺失值对决策树的影响"><a href="#3-缺失值对决策树的影响" class="headerlink" title="3.缺失值对决策树的影响"></a>3.缺失值对决策树的影响</h4><p>缺失值对决策树的影响体现在三个方面：</p><ul><li>影响不纯度的计算</li><li>影响属性含有缺失值的实例向子结点的分类</li><li>影响属性含有缺失值的测试实例的分类</li></ul><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/4.png" alt="4"></p><h4 id="4-给定混淆矩阵，分类效果度量不同指标的含义和计算方法。"><a href="#4-给定混淆矩阵，分类效果度量不同指标的含义和计算方法。" class="headerlink" title="4.给定混淆矩阵，分类效果度量不同指标的含义和计算方法。"></a>4.给定混淆矩阵，分类效果度量不同指标的含义和计算方法。</h4><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/5.png" alt="5"></p><script type="math/tex; mode=display">Recall=\frac{TP}{TP+FN}</script><script type="math/tex; mode=display">Acurracy=\frac{TP+TN}{TP+FN+TN+FP}</script><h4 id="5-评估分类器性能的留一法和k折交叉验证"><a href="#5-评估分类器性能的留一法和k折交叉验证" class="headerlink" title="5.评估分类器性能的留一法和k折交叉验证"></a>5.评估分类器性能的留一法和k折交叉验证</h4><ul><li>留一法：假定数据集D中包含m个样本，若令k=m，则得到了交叉验证法的一个特例：留一法（Leave-One-Out，简称LOO）。显然，留一法不受随机样本划分方式的影响，因为m个样本只有唯一的方式划分为m个子集——每个子集包含一个样本；留一法使用的训练集与初始数据集相比只少了一个样本，这就使得在绝大多数情况下，留一法中被实际评估的模型与期望评估的用D训练出的模型很相似。因此，留一法的评估结果往往被认为比较准确。</li><li>k折交叉验证：首先，将数据集$D$划分为$k$个大小相等的部分，然后使用每种分类方法在$k-1$份数据上构建模型，并在剩余的划分上进行检验，将这个步骤重复$k$次，每次使用不同的划分进行检验。</li></ul><h4 id="6-过拟合和欠拟合"><a href="#6-过拟合和欠拟合" class="headerlink" title="6.过拟合和欠拟合"></a>6.过拟合和欠拟合</h4><p><a href="https://blog.csdn.net/qq_42012732/article/details/107318550">原文链接</a><br>过拟合：具体表现就是最终模型在训练集上效果好；在测试集上效果差。模型泛化能力弱。<br>欠拟合：欠拟合是指对训练样本的一般性质尚未学好。在训练集及测试集上的表现都不好。</p><h3 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h3><h4 id="1-神经网络如何学习-有何特点"><a href="#1-神经网络如何学习-有何特点" class="headerlink" title="1.神经网络如何学习 有何特点"></a>1.神经网络如何学习 有何特点</h4><ul><li>如何学习<br>神经网络的学习指的是从训练数据中自动获取最优权重参数的过程。学习的目的是以损失函数为基准，找出能使它的值达到最小的权重参数，采用函数斜率的梯度法可以找出使损失函数尽可能小的权重参数的值。</li></ul><ul><li>特点<ul><li>人工神经网络由许多相互连接的神经元模型构成，这些神经元模型之间通过加权互连。</li><li>人工神经网络具有并行结构和并行处理机制，人工神经网络不仅在结构上是并行的，在处理顺序上也是并行的。</li><li>人工神经网络可以通过调节神经元之间的连接权重来进行学习</li></ul></li></ul><h4 id="2-梯度下降算法"><a href="#2-梯度下降算法" class="headerlink" title="2.梯度下降算法"></a>2.梯度下降算法</h4><p><a href="https://zhuanlan.zhihu.com/p/68468520">原文链接</a><br>寻找损失函数的最低点，就像我们在山谷里行走，希望找到山谷里最低的地方。那么如何寻找损失函数的最低点呢？在这里，我们使用了微积分里导数，通过求出函数导数的值，从而找到函数下降的方向或者是最低点（极值点）。</p><p>损失函数里一般有两种参数，一种是控制输入信号量的权重(Weight, 简称 $w$ ），另一种是调整函数与真实值距离的偏差（Bias，简称 $b$ ）。我们所要做的工作，就是通过梯度下降方法，不断地调整权重 $w$ 和偏差$b$，使得损失函数的值变得越来越小。</p><p>假设某个损失函数里，模型损失值 $L$与权重 $w$ 有下图这样的关系。实际模型里，可能会有多个权重 $w$ ，这里为了简单起见，举只有一个权重 $w$ 的例子。权重$w$ 目前的位置是在A点。此时如果求出A点的梯度 $\frac{dL}{dw}$ ，便可以知道如果我们向右移动，可以使损失函数的值变得更小。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/5.jpg" alt="5"><br>公式太多了，好好看</p><h4 id="3-多层神经网络使用什么算法进行训练？"><a href="#3-多层神经网络使用什么算法进行训练？" class="headerlink" title="3.多层神经网络使用什么算法进行训练？"></a>3.多层神经网络使用什么算法进行训练？</h4><p><a href="https://www.jianshu.com/p/cc440fb27874">逆误差传播算法</a><br><pre class="line-numbers language-python" data-language="python"><code class="language-python">算法过程：<span class="token number">1</span>：在（<span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span>）区间内随机初始化网络中的所有连接权值和阈值<span class="token number">2</span>：repeat<span class="token number">3</span>：    <span class="token keyword">for</span> <span class="token builtin">all</span> <span class="token punctuation">(</span>xk<span class="token punctuation">,</span>yk<span class="token punctuation">)</span> ∈ D do<span class="token number">4</span>：        根据当前参数和公式计算输出<span class="token number">5</span>：        计算输出层神经元的梯度项gj<span class="token number">6</span>：        计算隐藏层神经元的梯度项eh<span class="token number">7</span>：        计算和更新连接权值ωhj、νih和阈值θj γh<span class="token number">8</span>：    end <span class="token keyword">for</span><span class="token number">9</span>：until 达到停止训练的条件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="贝叶斯学习"><a href="#贝叶斯学习" class="headerlink" title="贝叶斯学习"></a>贝叶斯学习</h3><h4 id="1-根据贝叶斯理论，如何计算一个假设-h-成立的后验概率"><a href="#1-根据贝叶斯理论，如何计算一个假设-h-成立的后验概率" class="headerlink" title="1.根据贝叶斯理论，如何计算一个假设$h$成立的后验概率"></a>1.根据贝叶斯理论，如何计算一个假设$h$成立的后验概率</h4><p>先验概率（prior probability）：指根据以往经验和分析。在实验或采样前就可以得到的概率。<br>后验概率（posterior probability）：指某件事已经发生，想要计算这件事发生的原因是由某个因素引起的概率。<br>由贝叶斯定理：</p><script type="math/tex; mode=display">P(B|A)=\frac{P(A|B)P(B)}{P(A)}</script><h4 id="2-极大后验概率假设和极大似然假设有何区别"><a href="#2-极大后验概率假设和极大似然假设有何区别" class="headerlink" title="2.极大后验概率假设和极大似然假设有何区别"></a>2.极大后验概率假设和极大似然假设有何区别</h4><p>最大后验概率假设即求参数$\theta$，使后验概率$P(\theta|X)$最大，由上文所述，</p><script type="math/tex; mode=display">P(\theta|X)=\frac{P(X|\theta)P(\theta)}{P(X)}</script><p>式中，$P(X)$已知，所以极大后验概率假设就是求取$P(X|\theta)P(\theta)$最大时参数$\theta$的值。<br>极大似然假设即求似然函数$P(X|\theta)$最大时参数$\theta$的值。<br>两种假设方法的不同之处在于极大后验概率假设在计算时考虑了先验概率参数$P(\theta)$，极大后验概率假设认为参数$\theta$的值是服从某种分布的，而极大似然假设认为参数$\theta$的值是一个定值。当参数$\theta$服从均匀分布时，可以认为这两种假设就是相同的。</p><h4 id="3-最小描述长度的基本思想"><a href="#3-最小描述长度的基本思想" class="headerlink" title="3.最小描述长度的基本思想"></a>3.最小描述长度的基本思想</h4><p>最小描述长度( MDL) 原理是 Rissane 在研究通用编码时提出的。其基本原理是对于一组给定的实例数据 D ， 如果要对其进行保存 ，为了节省存储空间， 一般采用某种模型对其进行编码压缩，然后再保存压缩后的数据。同时， 为了以后正确恢复这些实例数据，将所用的模型也保存起来。所以需要保存的数据长度( 比特数) 等于这些实例数据进行编码压缩后的长度加上保存模型所需的数据长度，将该数据长度称为总描述长度。最小描述长度( MDL) 原理就是要求选择总描述长度最小的模型。<br>如果将贝叶斯网络作为对实例数据进行压缩编码的模型， MDL原理就可以用于贝叶斯网络的学习。该度量被视为网络结构的描述长度和在给定结构下样本数据集的描述长度之和。一方面，用于描述网络结构的编码位随模型复杂度的增加而增加 ； 另一方面， 对数据集描述的编码位随模型复杂度的增加而下降。因此，贝叶斯网络的 MDL总是力求在模型精度和模型复杂度之间找到平衡。构建贝叶斯网络首先定义一个评分函数， 该评分函数描述了每个可能结构对观察到的数据拟合， 其目的就是发现评分最大的结构，这个过程连续进行到新模型的评分分数不再比老模型的高为止。</p><h4 id="4-贝叶斯最优分类器的基本思想"><a href="#4-贝叶斯最优分类器的基本思想" class="headerlink" title="4.贝叶斯最优分类器的基本思想"></a>4.贝叶斯最优分类器的基本思想</h4><p>贝叶斯决策论考虑在所有的相关概率已知的情况下，基于这些概率和误判损失来确定最优的类别标记。<br>假设有$N$种可能的类别标记，即<script type="math/tex">\mathcal{Y} = [ c_1,c_2,...,c_N]</script><br>$\lambda_{ij}$是将一个$c_i$错分为$c_j$产生的损失，则在样本$x$上产生的条件风险为：</p><script type="math/tex; mode=display">R(c_i|x)=\sum_{j=1}^{N}\lambda_{ij}P(c_j|x)</script><p>贝叶斯最优分类器的思想就是寻找一个判定准则$h:\mathcal{X}\mapsto\mathcal{Y}$，最小化总体风险：</p><script type="math/tex; mode=display">R(h)=\mathbb{E}_x[R(h(x)|x)]</script><p>对于每个样本$x$,若分类器$h$能够最小化条件风险$R(h(x)|x)$，则总体风险$R(h)$也将被最小化。这样就产生了贝叶斯判定准则：为最小化总体风险，只需在每个样本上选取那个能使条件风险最小的类别标记，即：</p><script type="math/tex; mode=display">h^*(x)=argmin_{c \in \mathcal{Y}}R(c|x)</script><p>此时，$h^*(x)$记为贝叶斯最优分类器。</p><p><img src="6.png" alt=""></p><h4 id="5-朴素贝叶斯分类算法"><a href="#5-朴素贝叶斯分类算法" class="headerlink" title="5.朴素贝叶斯分类算法"></a>5.朴素贝叶斯分类算法</h4><p>为了解决直接使用贝叶斯公式计算后验概率时，可能遇到的类条件概率难以计算问题朴素贝叶斯分类器采用了属性条件独立性假设：对已知类别，假设所有的属性都相互独立。此时后验概率将十分便于计算。</p><script type="math/tex; mode=display">P(c|x)=\frac{P(c)}{P(x)}\prod_{i=1}^{d}P(x_i|c)</script><p>式中:$d$为属性的个数，$x_i$为样本$x$在第$i$个属性上的取值。<br>此时，基于贝叶斯判定准则：</p><script type="math/tex; mode=display">h_{nb}(x)=argmax_{c \in \mathcal{Y}}P(c)\prod^d_{i=1}P(x_i|c)</script><p>这就是朴素贝叶斯分类器的表达式。</p><h4 id="6-贝叶斯信念网络的预测和诊断"><a href="#6-贝叶斯信念网络的预测和诊断" class="headerlink" title="6.贝叶斯信念网络的预测和诊断"></a>6.贝叶斯信念网络的预测和诊断</h4><p>直接使用贝叶斯网定义的联合概率分布来精确计算后验概率<br>但是，当贝叶斯网结点很多且连接稠密时，后验概率就很难以进行精确计算。<br>应该引入Gibbs采样算法（但是ppt上没有说怎么对贝叶斯网进行gibbs采样，猜测应该不考）。<br>基本上就是使用全概率公式结合贝叶斯网给出的CPT来计算吧，还是比较简单的<br>ppt上的几道计算：</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/7.png" alt="7"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/8.png" alt="8"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/9.png" alt="9"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/10.png" alt="10"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/11.png" alt="11"></p><h3 id="基于实例的学习"><a href="#基于实例的学习" class="headerlink" title="基于实例的学习"></a>基于实例的学习</h3><h4 id="1-K近邻学习算法"><a href="#1-K近邻学习算法" class="headerlink" title="1.K近邻学习算法"></a>1.K近邻学习算法</h4><p> k近邻算法是数据挖掘和机器学习中十分常用的一种学习算法，是一种无参数的懒惰学习算法，在学习阶段仅仅是将数据保存起来，训练时间的开销为0，待收到样本后再进行处理。这种算法的基本思想是找到距离样本最近的k个点，基于这k个邻居的标签进行投票。票数最多的标签即为预测结果。</p><ul><li>KNN的优点：<ul><li>knn算法原理十分简单，易于解释结果。</li><li>懒惰学习，在训练过程中不对基础的数据模式做出假设，训练过程的复杂度为O(n)。</li><li>既可用于分类，也可用于回归；既可用于数值型数据，也可用于离散性数据。</li><li>对异常值不敏感。</li></ul></li><li>KNN的缺点：<ul><li>计算复杂性高，空间复杂性高。</li><li>当样本不平衡时，有的类别的样本数量很多，其他样本的数量很少，可能会导致分类出错。</li><li>计算量较大，需要计算每个样本到所有点的距离，再对距离排序才能求得k个近邻点。</li></ul></li></ul><h4 id="2-为什么在使用K近邻算法时要对距离进行归一化"><a href="#2-为什么在使用K近邻算法时要对距离进行归一化" class="headerlink" title="2.为什么在使用K近邻算法时要对距离进行归一化"></a>2.为什么在使用K近邻算法时要对距离进行归一化</h4><p>当样本有多个特征值时，其中某个特征数量级比较大，其他特征较小时，分类结果会被数量级比较大的特征值所主导，而弱化了其他特征的影响，这是各个特征值的量纲不同所致，需要将数据归一化处理</p><h4 id="3-局部加权线性回归"><a href="#3-局部加权线性回归" class="headerlink" title="3.局部加权线性回归"></a>3.局部加权线性回归</h4><p>线性回归的一个问题是有可能出现欠拟合，因为它求的是具有最小均方误差的无偏估计，显然模型欠拟合将无法做出很好的回归预测，所以有些方法允许在估计中引入一些偏差，从而降低预测的均方误差。局部线性加权的思想是对待预测点附近的每个点赋予一个权重，然后在带权的样本上基于最小均方误差来进行回归.<br>对于一个数据点，与其靠近的点，权重大，与其相距较远的点，权重小，从而优化问题会有所偏倚，靠近的点对该数据点的回归拟合起较大作用，而相距较远的点由于权数很小，造成的影响基本可以忽略不计，这样就等同于每个点的回归都是基于与其相距较近的点为基础，而忽略了较远的点，这也就是局部加权线性回归局部的由来，因为它着重考虑目标点局部的数据点为回归基础.<br>局部加权回归在选择到合适的k时，回归拟合的效果比普通线性回归好很多，但是有一点需要注意，就是局部线性加权回归的计算量很大，因为对于每个数据点，都需要计算与其他数据点的距离矩阵θ，即遍历整个数据集，因此我们还需要探索更加高效简介的算法，减小时间空间开销.<br><a href="https://blog.csdn.net/BIT_666/article/details/80420946">原文链接</a></p><h4 id="4-懒惰学习和积极学习的区别"><a href="#4-懒惰学习和积极学习的区别" class="headerlink" title="4.懒惰学习和积极学习的区别"></a>4.懒惰学习和积极学习的区别</h4><ul><li><p>积极学习：这种学习方法是指在利用算法进行判断之前，首先通过训练集的数据训练得到一个目标函数，在需要进行判断是利用已经训练好的函数进行决策，这种方法需要在开始的时候进行一些工作，在后期使用时十分方便。</p></li><li><p>消极学习：这种学习方法在最开始的时候不会根据已有的样本数据构建目标函数，只是简单的把训练好的样本储存好，后期对新加入的样本进行判断时，才分析新进入样本与已存在样本之间的关系。据此确定新进入样本的目标函数值。</p></li></ul><h3 id="集成学习"><a href="#集成学习" class="headerlink" title="集成学习"></a>集成学习</h3><h4 id="1-集成学习的定义"><a href="#1-集成学习的定义" class="headerlink" title="1.集成学习的定义"></a>1.集成学习的定义</h4><p>集成学习就是说将多个 “单个学习器（Individual Learner）”用某种策略来结合起来，组成一个“学习委员会（committee）”，使得整体的泛化性能得到大大提高。</p><h4 id="2-集成学习的两个主要问题"><a href="#2-集成学习的两个主要问题" class="headerlink" title="2.集成学习的两个主要问题"></a>2.集成学习的两个主要问题</h4><p>准确性和多样性。<br>准确性：个体学习器不能太差，要有一定的准确度（即不能有一个太短的短板）<br>多样性：个体学习器之间的输出要具有差异性（各有所长的意思，不能所有的学习器的优点都是一样的）</p><h4 id="3-bagging基本思想和伪代码"><a href="#3-bagging基本思想和伪代码" class="headerlink" title="3.bagging基本思想和伪代码"></a>3.bagging基本思想和伪代码</h4><p>bagging方法：bagging方法是并行式集成学习方法中最著名的代表。给定包含$m$个样本的数据集，我们先随机的从中取出一个样本放入采样集中，再把该样本放回初始数据集。使得下次采样时该样本一九有可能被选中。这样，经过$m$次操作，我们就得到了含$m$个样本的采样集，初始训练集中有的样本在采样集中多次出现，有的则从未出现。基于每个采样集训练出一个基学习器，再将这些学习器进行结合。</p><h4 id="4-boosting基本思想和伪代码"><a href="#4-boosting基本思想和伪代码" class="headerlink" title="4.boosting基本思想和伪代码"></a>4.boosting基本思想和伪代码</h4><p>boosting方法：boosting方法是一种具有代表性的序列化方法。可以将弱学习器提升为强学习器。先从初始训练集中训练出一个基学习器，再根据基学习器的表现对训练样本分布进行调整，使得先前基学习器做错的样本在后续训练的过程中受到更多的关注，基于调整后的样本再训练下一个基学习器；如此重复，直到基学习器的数量达到事先指定值$T$，最终将这$T$个基学习器进行加权结合。（adaboost算法）<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/2.jpg" alt="2"></p><h4 id="5-为何集成学习有效"><a href="#5-为何集成学习有效" class="headerlink" title="5.为何集成学习有效"></a>5.为何集成学习有效</h4><p>当集成学习中集成的个体分类器数目足够多时，集成的错误率将指数级下降，趋向于0。<br>以简单的二分类问题为例：<br>考虑简单的二分类问题$y \in [ -1,+1 ]  $和真实函数$f$，假定基分类器的错误率为$\epsilon$,则对于每个基分类器$h_i$都有：</p><script type="math/tex; mode=display">P(h_i(x)\neq f(x))=\epsilon</script><p>集成学习通过简单投票法结合$T$个基分类器，若有超过半数的基分类器正确，则集成分类器就正确：</p><script type="math/tex; mode=display">H(x)=sign(\sum_{i=1}^{T}h_i(x))</script><p>假设基分类器的错误率之间相互独立，由Hoeffding不等式可知，集成分类器的错误率：</p><script type="math/tex; mode=display">\begin{align*}P(H(x)\neq f(x))&=\sum_{k=0}^{[T/2]}\begin{pmatrix} T\\ k \end{pmatrix}(1-\epsilon)^{k}\epsilon^{1-k}\\&\leq exp(-\frac{1}{2}T(1-2\epsilon)^2)\end{align*}</script><p>由上述公式可得，当集成学习中基分类器的数目$T$增大时，集成学习的错误率将指数级下降。因此，集成学习比单个模型更加有效。</p><h3 id="分类技术"><a href="#分类技术" class="headerlink" title="分类技术"></a>分类技术</h3><h4 id="1-基于规则的分类器有何优点，需要解决什么问题"><a href="#1-基于规则的分类器有何优点，需要解决什么问题" class="headerlink" title="1.基于规则的分类器有何优点，需要解决什么问题"></a>1.基于规则的分类器有何优点，需要解决什么问题</h4><p>规则集的表达能力等价于决策树<br>基于规则的分类器通常用于产生更易于解释的描述性模型，而模型的性能却可与决策树分类器相媲美。<br>很多基于规则的分类器（如RIPPER）采用的基于类的规则定序方法非常适用于处理类分布不平衡的数据集</p><p>在规则的增长过程中，需要一种评估度量来确定应该增加或者删除哪个规则。准确率就是一种很常用的选择。但是，在使用准确率作为评估度量时，算法可能会受到一些覆盖率较低，但是准确率十分高的规则的欺骗。在这时，我们常常使用统计检验剪除覆盖率较低的规则，或者转而采用一些考虑规则覆盖率的评估度量。</p><h4 id="2-序列覆盖算法"><a href="#2-序列覆盖算法" class="headerlink" title="2.序列覆盖算法"></a>2.序列覆盖算法</h4><p>算法开始时决策表R为空，接下来用函数提取类的覆盖当前训练记录集的最佳规则。在提取规则时，类的所有训练记录被看做是正例，而其他类的训练记录则被当成反例。如果一个规则覆盖大多数正例，没有或者仅覆盖极少数反例，那么该规则是可取的。一旦找到这样的规则，就删掉它所覆盖的训练记录，并把新规则追加到决策表R的尾部。重复这个过程直到满足终止条件。<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/12.png" alt="12"><br><a href="https://blog.csdn.net/TOMOCAT/article/details/82560908">原文链接</a></p><h4 id="3-支持向量机的基本原理"><a href="#3-支持向量机的基本原理" class="headerlink" title="3.支持向量机的基本原理"></a>3.支持向量机的基本原理</h4><p>SVM的一般做法是：将所有待分类的点映射到“高维空间”，然后在高维空间中找到一个能将这些点分开的“超平面”，这在理论上是被完全证明了是成立的，而且在实际计算中也是可行的。</p><h3 id="聚类分析"><a href="#聚类分析" class="headerlink" title="聚类分析"></a>聚类分析</h3><h4 id="1-聚类的定义"><a href="#1-聚类的定义" class="headerlink" title="1.聚类的定义"></a>1.聚类的定义</h4><p>无监督学习中，训练样本的信息是未知的，目标是通过对无标记训练样本的学习来揭示数据的内在性质及规律，为进一步的数据分析提供基础。应用最广也是研究最多的是——-聚类</p><p>聚类试图将数据集中的样本划分为若干个通常是不相交的子集，每个子集称为一个“簇”。聚类过程只能形成簇结构，而簇对应的概念语义需要由使用者来把握和命名。聚类既可以作为一个单独过程用来寻找数据内部的分布结构，也可以作为分类等其他学习任务的前驱过程。（西瓜书）</p><h4 id="2-聚类的类型"><a href="#2-聚类的类型" class="headerlink" title="2.聚类的类型"></a>2.聚类的类型</h4><ul><li>基于划分的聚类/基于层次的聚类</li><li>互斥的/重叠的/模糊的</li><li>完全的/部分的<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/13.png" alt="13"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/14.png" alt="14"></li></ul><h4 id="3-簇的类型"><a href="#3-簇的类型" class="headerlink" title="3.簇的类型"></a>3.簇的类型</h4><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/15.png" alt="15"></p><h4 id="4-层次聚类的两种主要类型"><a href="#4-层次聚类的两种主要类型" class="headerlink" title="4.层次聚类的两种主要类型"></a>4.层次聚类的两种主要类型</h4><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/16.png" alt="16"></p><h4 id="5-计算簇间相似性的单链和全链方法"><a href="#5-计算簇间相似性的单链和全链方法" class="headerlink" title="5.计算簇间相似性的单链和全链方法"></a>5.计算簇间相似性的单链和全链方法</h4><p>单链方法：该方法中两个簇的邻近度定义为两个不同簇中任意两点之间的最短距离。<br>全链方法：该方法中两个簇的邻近度定义为两个不同簇中任意两点之间的最长距离。</p><h4 id="6-K均值和K中心点算法"><a href="#6-K均值和K中心点算法" class="headerlink" title="6.K均值和K中心点算法"></a>6.K均值和K中心点算法</h4><ul><li>K均值算法：<br>给定样本集$D=\left{x_1,x_2,…x_m\right}$,k均值算法即针对聚类所得的簇$\mathcal{C}=\left{C_1,C_2,…,C_k\right}$划分最小化平方误差<script type="math/tex; mode=display">E=\sum^k_{i=1}\sum_{x \in C_i}||x-\mu_i||^2_2</script>最小化上式是NP难的，所以采用迭代方法进行求解。其步骤是，预将数据分为K组，则随机选取K个对象作为初始的聚类中心，然后计算每个对象与各个种子聚类中心之间的距离，把每个对象分配给距离它最近的聚类中心。聚类中心以及分配给它们的对象就代表一个聚类。每分配一个样本，聚类的聚类中心会根据聚类中现有的对象被重新计算。这个过程将不断重复直到满足某个终止条件。终止条件可以是没有（或最小数目）对象被重新分配给不同的聚类，没有（或最小数目）聚类中心再发生变化，误差平方和局部最小。</li><li>K中心点算法：<br>K-中心点算法也是一种常用的聚类算法，K-中心点聚类的基本思想和K-Means的思想相同，实质上是对K-means算法的优化和改进。在K-means中，异常数据对其的算法过程会有较大的影响。在K-means算法执行过程中，可以通过随机的方式选择初始质心，也只有初始时通过随机方式产生的质心才是实际需要聚簇集合的中心点，而后面通过不断迭代产生的新的质心很可能并不是在聚簇中的点。如果某些异常点距离质心相对较大时，很可能导致重新计算得到的质心偏离了聚簇的真实中心。<br>K-中心聚类算法计算的是某点到其它所有点的距离之和最小的点，通过距离之和最短的计算方式可以减少某些孤立数据对聚类过程的影响。从而使得最终效果更接近真实划分，但是由于上述过程的计算量会相对大于K-means，大约增加O（n）的计算量，因此一般情况下K-中心算法更加适合小规模数据运算。</li></ul><h4 id="8-聚类评估"><a href="#8-聚类评估" class="headerlink" title="8.聚类评估"></a>8.聚类评估</h4><ul><li>相似性矩阵</li><li>SSE</li><li>Cohesion &amp; Separation</li><li>SC</li><li>Entropy Purity</li></ul><p><a href="https://www.biaodianfu.com/cluster-score.html">链接</a></p><h3 id="关联分析"><a href="#关联分析" class="headerlink" title="关联分析"></a>关联分析</h3><h4 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h4><ul><li>项集： 一个或几个项目的集合</li><li>频繁项集：支持度大于或等于最小阈值的项集</li><li>支持度：项集出现的频率</li><li>置信度：置信度表示在先决条件X发生的情况下，由关联规则”X→Y“推出Y的概率。表示在发生X的项集中，同时会发生Y的可能性，即X和Y同时发生的个数占仅仅X发生个数的比例</li><li>最大频繁项集：如果频繁项集L的所有超集都是非频繁项集，那么称L为最大频繁项集或称最大频繁模式</li><li>闭频繁项集：所谓闭项集，就是指一个项集X，它的直接超集（最小的严格超集）的支持度计数都不等于它本身的支持度计数。如果闭项集同时是频繁的，也就是它的支持度大于等于最小支持度阈值，那它就称为闭频繁项集。</li></ul><h4 id="2-apriori算法"><a href="#2-apriori算法" class="headerlink" title="2.apriori算法"></a>2.apriori算法</h4><p>Apriori是一种常用的数据关联规则挖掘方法，它可以用来找出数据集中频繁出现的数据集合。找出这样的一些频繁集合有利于决策，例如通过找出超市购物车数据的频繁项集，可以更好地设计货架的摆放。需要注意的是它是一种逐层迭代的方法，先找出频繁项集L1，再利用L1找出频繁2项集，以此类推。<br><a href="https://zhuanlan.zhihu.com/p/341882260">原文链接</a></p><h4 id="3-FP增长算法"><a href="#3-FP增长算法" class="headerlink" title="3.FP增长算法"></a>3.FP增长算法</h4><p><a href="https://blog.csdn.net/qq_23100787/article/details/51790637">原文链接</a></p><h4 id="4-关联模式评估"><a href="#4-关联模式评估" class="headerlink" title="4.关联模式评估"></a>4.关联模式评估</h4><ul><li>使用interesting measures对派生模式进行修剪和排名</li><li>使用支持度和置信度对关联模式进行评估</li></ul><p><img src="17.png" alt=""></p><h3 id="维度约减"><a href="#维度约减" class="headerlink" title="维度约减"></a>维度约减</h3><h4 id="1-过滤法和包裹法"><a href="#1-过滤法和包裹法" class="headerlink" title="1.过滤法和包裹法"></a>1.过滤法和包裹法</h4><p>过滤法：过滤法就是按照发散性或者相关性对各个特征进行评分，设定阈值或者选择阈值的个数，完成特征选择。根据选择的评估标准不同，有方差法，相关系数法，互信息法。优点：不依赖于任何机器学习方法，且不需要交叉验证，计算效率比较高。缺点：没有考虑机器学习算法的特点</p><p>包裹法：包裹法是选择一种算法，然后再根据算法效果来选择特征集合。就是通过不断的启发式方法来搜索特征，主要分为如下两类。方法一：选择一些特征，逐步增加特征保证算法模型精度是否达标。方法二：删除一些特征，然后慢慢在保持算法精度的条件下，缩减特征。缺点1.需要对每一组特征子集训练一个模型，计算量很大2.样本不够充分的情况下容易过拟合3.特征变量较多时计算复杂度太高</p><h4 id="2-五种不同的特征搜索方法，基本思想和伪代码"><a href="#2-五种不同的特征搜索方法，基本思想和伪代码" class="headerlink" title="2.五种不同的特征搜索方法，基本思想和伪代码"></a>2.五种不同的特征搜索方法，基本思想和伪代码</h4><p>前向搜索，后向搜索，浮动搜索，双向搜索，增L去R搜索<br><a href="https://blog.csdn.net/zhangweijiqn/article/details/9109995">原文</a></p><h4 id="3-维度约减效果评估"><a href="#3-维度约减效果评估" class="headerlink" title="3.维度约减效果评估"></a>3.维度约减效果评估</h4><p>真的讲了吗？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？？</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次平平无奇的作业/练习markdown语法/决策树算法和模型评估标准</title>
      <link href="/2021/10/30/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B9%B3%E5%B9%B3%E6%97%A0%E5%A5%87%E7%9A%84%E4%BD%9C%E4%B8%9A/"/>
      <url>/2021/10/30/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%B9%B3%E5%B9%B3%E6%97%A0%E5%A5%87%E7%9A%84%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<p>记一次平平无奇的数据挖掘课的作业。<br>顺便练习使用markdown语法。<br>作业题：<br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/10_30_21_1_1.jpg" alt="10_30_21_1_1"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/10_30_21_1_2.jpg" alt="10_30_21_1_2"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/10_30_21_1_3.jpg" alt="10_30_21_1_3"><br><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/10_30_21_1_4.jpg" alt="10_30_21_1_4"></p><h2 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a>第五章</h2><h3 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h3><p>决策树是一种很常见的机器学习方法。常常用在样本的对象和属性值一一对应时；目标函数有离散的输出值；可能需要析取假设；训练数据集中可能有噪声或者样本中含有缺失属性值的情况下。</p><h3 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h3><p>剪枝处理是决策树学习算法解决过拟合的主要手段。决策树剪枝的基本策略可分为预剪枝和后剪枝。<br>预剪枝是指在决策树生成的过程中，对每个结点在划分前进行估计，若当前节点的划分不能带来决策树泛化性能的提升，则停止划分并将当前节点标记为叶结点。<br>后剪枝则是先从训练集生成一颗完整的决策树，然后自底向上的对非叶结点进行考察。若当前结点对应的子树替换为叶结点能带来决策树泛化性能的提升，则将该子节点替换为叶结点。</p><h3 id="第三题"><a href="#第三题" class="headerlink" title="第三题"></a>第三题</h3><p>缺失值将从三个方向给决策树的构建带来影响：</p><ul><li>在训练样本属性缺失的情况下，无法进行划分属性的选择</li><li>给定划分属性，若样本在该属性上的值是缺失的，导致无法对此样本进行划分</li><li>测试样本中属性有缺失值，可能导致测试出错</li></ul><h3 id="第四题"><a href="#第四题" class="headerlink" title="第四题"></a>第四题</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul><li>决策树学习为概念学习和其他离散值函数的学习提供了一种可供实践的方法。</li><li>具有可解释性，能够在相当短的时间内对大型的数据源做出可行且效果良好的结果，决策树分类的效率高。只需要进行一次构建，即可反复使用。</li><li>易于通过静态测试来对模型进行评测，可以测定模型可信度；如果给定一个观察的模型，那么根据所产生的决策树很容易推出相应的逻辑表达式。</li></ul><h4 id="分类过程中可能出现的问题"><a href="#分类过程中可能出现的问题" class="headerlink" title="分类过程中可能出现的问题"></a>分类过程中可能出现的问题</h4><ul><li>在决策树分类的过程中，很经常出现的一个问题就是过拟合问题。在决策树构建的过程中，为了尽可能正确的分类学习样本，常常会不断地对结点进行划分，导致决策树的分支过多，可能会导致错误的将样本集的一些特征当作所有数据都具有的特征从而出现过拟合问题。</li></ul><h3 id="第五题"><a href="#第五题" class="headerlink" title="第五题"></a>第五题</h3><p>集合中共含有十五个样本，其中6个拒绝，9个接受,计算集合的信息熵：</p><script type="math/tex; mode=display">Ent=-\sum_{k=1}^{y}p_klog_2p_k=-\frac{6}{15}log_2\frac{6}{15}-\frac{9}{15}log_2\frac{9}{15}=0.97</script><p>以属性“年龄”对集合进行划分，得到三个子集：$D^1(年龄=青年)，D^2(年龄=中年)，D^3(年龄=老年)$，分别计算三个子集的信息熵：</p><script type="math/tex; mode=display">Ent(D^1)=-\frac{3}{5}log_2\frac{3}{5}-\frac{2}{5}log_2\frac{2}{5}=0.97</script><script type="math/tex; mode=display">Ent(D^2)=-\frac{3}{5}log_2\frac{3}{5}-\frac{2}{5}log_2\frac{2}{5}=0.97</script><script type="math/tex; mode=display">Ent(D^3)=-\frac{4}{5}log_2\frac{4}{5}-\frac{1}{5}log_2\frac{1}{5}=0.721</script><p>由信息增益的计算公式，计算属性年龄对样本集$D$进行划分的信息增益：</p><script type="math/tex; mode=display">\begin{aligned}Gain(D,年龄)&=Ent(D)-\sum_{v=1}^{V}\frac{\lvert D^v \rvert}{\lvert D \rvert}Ent(D^v)\\&=0.97-(\frac{1}{3}\times0.97+\frac{1}{3}\times0.97+\frac{1}{3}\times0.721)\\&=0.089\end{aligned}</script><p>相似的，分别求取以工作情况划分样本集时，以房产情况划分样本集时，以信贷情况划分样本集时的信息增益：</p><script type="math/tex; mode=display">Gain(D,工作情况)=0.97-\frac{10}{15}\times0.97=0.33</script><script type="math/tex; mode=display">Gain(D,房产情况)=0.97-\frac{9}{15}\times0.917=0.419</script><script type="math/tex; mode=display">Gain(D,信贷情况)=0.97-\frac{5}{15}\times0.721-\frac{6}{15}\times0.917=0.362</script><p>比较可得，房产情况为最优特征。</p><h3 id="第六题"><a href="#第六题" class="headerlink" title="第六题"></a>第六题</h3><p>由上文第五题的求解，确定使用房产情况为根结点；</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221016201623.png" alt="20221016201623"></p><p>此时，有房产的样本已经到达叶节点；将无房产的样本单独划分为一个集合，共有九个样本，首先计算该子样本集的信息熵：</p><script type="math/tex; mode=display">Ent(D_1)=-\sum_{k=1}^{\lvert \gamma \rvert}p_klog_{2}p_k=-\frac{6}{9}log_2\frac{6}{9}-\frac{3}{9}log_2\frac{3}{9}=0.917</script><p>分别计算其他属性对于子样本集的信息增益：</p><script type="math/tex; mode=display">Gain(D_1|年龄)=Ent(D_1)-\sum_{v=1}^{V}\frac{\lvert D^v_1 \rvert}{\lvert D_1 \rvert}Ent(D^v_1)=0.917-0.36-0.305=0.252\\Gain(D_1|工作)=Ent(D_1)-\sum_{v=1}^{V}\frac{\lvert D^v_1 \rvert}{\lvert D_1 \rvert}Ent(D^v_1)=0.917-0=0.917\\Gain(D_1|信贷)=Ent(D_1)-\sum_{v=1}^{V}\frac{\lvert D^v_1 \rvert}{\lvert D_1 \rvert}Ent(D^v_1)=0.917-\frac{4}{9}=0.472</script><p>此时：工作情况为最优特征，决策树构建为；</p><p><img src="https://tuchuang-1307891532.cos.ap-nanjing.myqcloud.com/images/20221016201547.png" alt="20221016201547"></p><h3 id="第七题"><a href="#第七题" class="headerlink" title="第七题"></a>第七题</h3><p>python源代码：<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#ID3算法</span><span class="token keyword">import</span> math<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pylab <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> treePlotter <span class="token keyword">import</span> createPlot<span class="token keyword">def</span> <span class="token function">calcShannonent</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#计算信息熵</span>    numEntries<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>    labelCounts<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> featVec <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>        currentLabel <span class="token operator">=</span> featVec<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token comment">#判断这个标签在字典中是否存在，不存在就初始化</span>        <span class="token keyword">if</span> currentLabel <span class="token keyword">not</span> <span class="token keyword">in</span> labelCounts<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            labelCounts<span class="token punctuation">[</span>currentLabel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment">#统计不同类别的数量</span>        labelCounts<span class="token punctuation">[</span>currentLabel<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token comment">#初始化熵</span>    shannonent <span class="token operator">=</span> <span class="token number">0.0</span>    <span class="token comment">#计算熵</span>    <span class="token keyword">for</span> key <span class="token keyword">in</span> labelCounts<span class="token punctuation">:</span>        prob <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>labelCounts<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span>numEntries        shannonent <span class="token operator">-=</span> prob <span class="token operator">*</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>prob<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> shannonent<span class="token keyword">def</span> <span class="token function">SubDataset</span><span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>index<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#从总的数据集中选取出关心的数据组成新的数据集</span>    sub_dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>        current_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> example<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> value<span class="token punctuation">:</span>            current_list <span class="token operator">=</span> example<span class="token punctuation">[</span><span class="token punctuation">:</span>index<span class="token punctuation">]</span>            current_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>example<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            sub_dataset<span class="token punctuation">.</span>append<span class="token punctuation">(</span>current_list<span class="token punctuation">)</span>    <span class="token keyword">return</span> sub_dataset<span class="token keyword">def</span> <span class="token function">ChooseBestFeature</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#选择最优特征</span>    num_features<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>dataset<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>    current_Ent<span class="token operator">=</span>calcShannonent<span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>    bestFeatureGain<span class="token operator">=</span><span class="token number">0.0</span>    bestFeatureIndex<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_features<span class="token punctuation">)</span><span class="token punctuation">:</span>        values_features<span class="token operator">=</span><span class="token punctuation">[</span>example<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">]</span>        unique_value<span class="token operator">=</span><span class="token builtin">set</span><span class="token punctuation">(</span>values_features<span class="token punctuation">)</span>        new_ent<span class="token operator">=</span><span class="token number">0.0</span>        Gain<span class="token operator">=</span><span class="token number">0.0</span>        <span class="token keyword">for</span> value <span class="token keyword">in</span> unique_value<span class="token punctuation">:</span>            sub_dataset<span class="token operator">=</span>SubDataset<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>i<span class="token punctuation">,</span>value<span class="token punctuation">)</span>            p<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>sub_dataset<span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>            new_ent <span class="token operator">+=</span>p<span class="token operator">*</span>calcShannonent<span class="token punctuation">(</span>sub_dataset<span class="token punctuation">)</span>            Gain<span class="token operator">=</span>calcShannonent<span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token operator">-</span>new_ent        <span class="token keyword">if</span><span class="token punctuation">(</span>Gain<span class="token operator">></span>bestFeatureGain<span class="token punctuation">)</span><span class="token punctuation">:</span>            bestFeatureGain<span class="token operator">=</span>Gain            bestFeatureIndex<span class="token operator">=</span>i    <span class="token keyword">return</span> bestFeatureIndex       <span class="token keyword">return</span> <span class="token keyword">def</span> <span class="token function">TreeGenerate</span><span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>feature<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#通过递归调用创建决策树</span>    label_list<span class="token operator">=</span><span class="token punctuation">[</span>example<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">]</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>label_list<span class="token punctuation">.</span>count<span class="token punctuation">(</span>label_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token builtin">len</span><span class="token punctuation">(</span>label_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#设置递归结束条件，类别中所有的标签都相同时，递归结束，返回一个叶节点</span>        <span class="token keyword">return</span> label_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        best_index<span class="token operator">=</span>ChooseBestFeature<span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>    best_feature<span class="token operator">=</span>feature<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span>    decisionTree<span class="token operator">=</span><span class="token punctuation">&#123;</span>best_feature<span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">del</span><span class="token punctuation">(</span>feature<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span><span class="token punctuation">)</span>    values_best_feature<span class="token operator">=</span><span class="token punctuation">[</span>example<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">]</span>    dict_value<span class="token operator">=</span><span class="token builtin">set</span><span class="token punctuation">(</span>values_best_feature<span class="token punctuation">)</span>    <span class="token keyword">for</span> value <span class="token keyword">in</span> dict_value<span class="token punctuation">:</span>        new_feature<span class="token operator">=</span>feature        decisionTree<span class="token punctuation">[</span>best_feature<span class="token punctuation">]</span><span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">=</span>TreeGenerate<span class="token punctuation">(</span>SubDataset<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>best_index<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>new_feature<span class="token punctuation">)</span><span class="token comment">#递归调用自身不断生成子树</span>        <span class="token keyword">return</span> decisionTree<span class="token keyword">def</span> <span class="token function">GenerateDataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    features <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'有工作'</span><span class="token punctuation">,</span> <span class="token string">'有房子'</span><span class="token punctuation">,</span> <span class="token string">'信贷情况'</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> dataset<span class="token punctuation">,</span> features<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>    dataset<span class="token punctuation">,</span>feature<span class="token operator">=</span>GenerateDataset<span class="token punctuation">(</span><span class="token punctuation">)</span>    decision_tree<span class="token operator">=</span>TreeGenerate<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>feature<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>decision_tree<span class="token punctuation">)</span>    <span class="token comment"># 定义文本框和箭头格式</span>    decisionNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"round4"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#3366FF'</span><span class="token punctuation">)</span>  <span class="token comment">#定义判断结点形态</span>    leafNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"circle"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#FF6633'</span><span class="token punctuation">)</span>  <span class="token comment">#定义叶结点形态</span>    arrow_args <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">"&lt;-"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span>  <span class="token comment">#定义箭头</span>    mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>  <span class="token comment"># 指定默认字体</span>    mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># 解决保存图像时负号'-'显示为方块的问题</span>    createPlot<span class="token punctuation">(</span>decision_tree<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#绘制决策树</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># 定义文本框和箭头格式</span>decisionNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"round4"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#3366FF'</span><span class="token punctuation">)</span>  <span class="token comment">#定义判断结点形态</span>leafNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"circle"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#FF6633'</span><span class="token punctuation">)</span>  <span class="token comment">#定义叶结点形态</span>arrow_args <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">"&lt;-"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span>  <span class="token comment">#定义箭头</span><span class="token comment">#绘制带箭头的注释</span><span class="token keyword">def</span> <span class="token function">plotNode</span><span class="token punctuation">(</span>nodeTxt<span class="token punctuation">,</span> centerPt<span class="token punctuation">,</span> parentPt<span class="token punctuation">,</span> nodeType<span class="token punctuation">)</span><span class="token punctuation">:</span>    createPlot<span class="token punctuation">.</span>ax1<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>nodeTxt<span class="token punctuation">,</span> xy<span class="token operator">=</span>parentPt<span class="token punctuation">,</span> xycoords<span class="token operator">=</span><span class="token string">'axes fraction'</span><span class="token punctuation">,</span>                            xytext<span class="token operator">=</span>centerPt<span class="token punctuation">,</span> textcoords<span class="token operator">=</span><span class="token string">'axes fraction'</span><span class="token punctuation">,</span>                            va<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> bbox<span class="token operator">=</span>nodeType<span class="token punctuation">,</span> arrowprops<span class="token operator">=</span>arrow_args<span class="token punctuation">)</span><span class="token comment">#计算叶结点数</span><span class="token keyword">def</span> <span class="token function">getNumLeafs</span><span class="token punctuation">(</span>myTree<span class="token punctuation">)</span><span class="token punctuation">:</span>    numLeafs <span class="token operator">=</span> <span class="token number">0</span>    firstStr <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>myTree<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    secondDict <span class="token operator">=</span> myTree<span class="token punctuation">[</span>firstStr<span class="token punctuation">]</span>    <span class="token keyword">for</span> key <span class="token keyword">in</span> secondDict<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__name__ <span class="token operator">==</span> <span class="token string">'dict'</span><span class="token punctuation">:</span>            numLeafs <span class="token operator">+=</span> getNumLeafs<span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            numLeafs <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">return</span> numLeafs<span class="token comment">#计算树的层数</span><span class="token keyword">def</span> <span class="token function">getTreeDepth</span><span class="token punctuation">(</span>myTree<span class="token punctuation">)</span><span class="token punctuation">:</span>    maxDepth <span class="token operator">=</span> <span class="token number">0</span>    firstStr <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>myTree<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    secondDict <span class="token operator">=</span> myTree<span class="token punctuation">[</span>firstStr<span class="token punctuation">]</span>    <span class="token keyword">for</span> key <span class="token keyword">in</span> secondDict<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__name__ <span class="token operator">==</span> <span class="token string">'dict'</span><span class="token punctuation">:</span>            thisDepth <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> getTreeDepth<span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            thisDepth <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">if</span> thisDepth <span class="token operator">></span> maxDepth<span class="token punctuation">:</span>            maxDepth <span class="token operator">=</span> thisDepth    <span class="token keyword">return</span> maxDepth<span class="token comment">#在父子结点间填充文本信息</span><span class="token keyword">def</span> <span class="token function">plotMidText</span><span class="token punctuation">(</span>cntrPt<span class="token punctuation">,</span> parentPt<span class="token punctuation">,</span> txtString<span class="token punctuation">)</span><span class="token punctuation">:</span>    xMid <span class="token operator">=</span> <span class="token punctuation">(</span>parentPt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> cntrPt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">+</span> cntrPt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    yMid <span class="token operator">=</span> <span class="token punctuation">(</span>parentPt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> cntrPt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">+</span> cntrPt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    createPlot<span class="token punctuation">.</span>ax1<span class="token punctuation">.</span>text<span class="token punctuation">(</span>xMid<span class="token punctuation">,</span> yMid<span class="token punctuation">,</span> txtString<span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">plotTree</span><span class="token punctuation">(</span>myTree<span class="token punctuation">,</span> parentPt<span class="token punctuation">,</span> nodeTxt<span class="token punctuation">)</span><span class="token punctuation">:</span>    numLeafs <span class="token operator">=</span> getNumLeafs<span class="token punctuation">(</span>myTree<span class="token punctuation">)</span>    depth <span class="token operator">=</span> getTreeDepth<span class="token punctuation">(</span>myTree<span class="token punctuation">)</span>    firstStr <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>myTree<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    cntrPt <span class="token operator">=</span> <span class="token punctuation">(</span>plotTree<span class="token punctuation">.</span>xOff <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">+</span> <span class="token builtin">float</span><span class="token punctuation">(</span>numLeafs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">/</span> plotTree<span class="token punctuation">.</span>totalW<span class="token punctuation">,</span> plotTree<span class="token punctuation">.</span>yOff<span class="token punctuation">)</span>    plotMidText<span class="token punctuation">(</span>cntrPt<span class="token punctuation">,</span> parentPt<span class="token punctuation">,</span> nodeTxt<span class="token punctuation">)</span>  <span class="token comment">#在父子结点间填充文本信息</span>    plotNode<span class="token punctuation">(</span>firstStr<span class="token punctuation">,</span> cntrPt<span class="token punctuation">,</span> parentPt<span class="token punctuation">,</span> decisionNode<span class="token punctuation">)</span>  <span class="token comment">#绘制带箭头的注释</span>    secondDict <span class="token operator">=</span> myTree<span class="token punctuation">[</span>firstStr<span class="token punctuation">]</span>    plotTree<span class="token punctuation">.</span>yOff <span class="token operator">=</span> plotTree<span class="token punctuation">.</span>yOff <span class="token operator">-</span> <span class="token number">1.0</span> <span class="token operator">/</span> plotTree<span class="token punctuation">.</span>totalD    <span class="token keyword">for</span> key <span class="token keyword">in</span> secondDict<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__name__ <span class="token operator">==</span> <span class="token string">'dict'</span><span class="token punctuation">:</span>            plotTree<span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> cntrPt<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            plotTree<span class="token punctuation">.</span>xOff <span class="token operator">=</span> plotTree<span class="token punctuation">.</span>xOff <span class="token operator">+</span> <span class="token number">1.0</span> <span class="token operator">/</span> plotTree<span class="token punctuation">.</span>totalW            plotNode<span class="token punctuation">(</span>secondDict<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>plotTree<span class="token punctuation">.</span>xOff<span class="token punctuation">,</span> plotTree<span class="token punctuation">.</span>yOff<span class="token punctuation">)</span><span class="token punctuation">,</span> cntrPt<span class="token punctuation">,</span> leafNode<span class="token punctuation">)</span>            plotMidText<span class="token punctuation">(</span><span class="token punctuation">(</span>plotTree<span class="token punctuation">.</span>xOff<span class="token punctuation">,</span> plotTree<span class="token punctuation">.</span>yOff<span class="token punctuation">)</span><span class="token punctuation">,</span> cntrPt<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotTree<span class="token punctuation">.</span>yOff <span class="token operator">=</span> plotTree<span class="token punctuation">.</span>yOff <span class="token operator">+</span> <span class="token number">1.0</span> <span class="token operator">/</span> plotTree<span class="token punctuation">.</span>totalD<span class="token keyword">def</span> <span class="token function">createPlot</span><span class="token punctuation">(</span>inTree<span class="token punctuation">)</span><span class="token punctuation">:</span>    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>    fig<span class="token punctuation">.</span>clf<span class="token punctuation">(</span><span class="token punctuation">)</span>    axprops <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>xticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    createPlot<span class="token punctuation">.</span>ax1 <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> frameon<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token operator">**</span>axprops<span class="token punctuation">)</span>    plotTree<span class="token punctuation">.</span>totalW <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>getNumLeafs<span class="token punctuation">(</span>inTree<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotTree<span class="token punctuation">.</span>totalD <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>getTreeDepth<span class="token punctuation">(</span>inTree<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotTree<span class="token punctuation">.</span>xOff <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">/</span> plotTree<span class="token punctuation">.</span>totalW    plotTree<span class="token punctuation">.</span>yOff <span class="token operator">=</span> <span class="token number">1.0</span>    plotTree<span class="token punctuation">(</span>inTree<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="第八题"><a href="#第八题" class="headerlink" title="第八题"></a>第八题</h3><p>python源代码：<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#相较于ID3算法，CART算法并无本质上的区别，只是将选择最优特征的根据改为基尼系数</span><span class="token comment">#因此，修改原ID3算法中的计算信息熵函数为计算基尼系数函数，并同步修改选择最优特征函数即可</span><span class="token keyword">import</span> math<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pylab <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> treePlotter <span class="token keyword">import</span> createPlot<span class="token keyword">def</span> <span class="token function">calcGini</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">:</span>    numEntries <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span>    labelCounts <span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>     <span class="token keyword">for</span> featVec <span class="token keyword">in</span> dataSet<span class="token punctuation">:</span>        currentLabel <span class="token operator">=</span> featVec<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> currentLabel <span class="token keyword">not</span> <span class="token keyword">in</span> labelCounts<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            labelCounts<span class="token punctuation">[</span>currentLabel<span class="token punctuation">]</span> <span class="token operator">=</span><span class="token number">0</span>        labelCounts<span class="token punctuation">[</span>currentLabel<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>    Gini <span class="token operator">=</span><span class="token number">1.0</span>    <span class="token keyword">for</span> key <span class="token keyword">in</span> labelCounts<span class="token punctuation">:</span>        prob <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>labelCounts<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span>numEntries        Gini <span class="token operator">-=</span> prob <span class="token operator">*</span> prob    <span class="token keyword">return</span> Gini    <span class="token keyword">def</span> <span class="token function">SubDataset</span><span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>index<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#从总的数据集中选取出关心的数据组成新的数据集</span>    sub_dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>        current_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> example<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> value<span class="token punctuation">:</span>            current_list <span class="token operator">=</span> example<span class="token punctuation">[</span><span class="token punctuation">:</span>index<span class="token punctuation">]</span>            current_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>example<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            sub_dataset<span class="token punctuation">.</span>append<span class="token punctuation">(</span>current_list<span class="token punctuation">)</span>    <span class="token keyword">return</span> sub_dataset<span class="token keyword">def</span> <span class="token function">splitOtherDataSetByValue</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">,</span> index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>    retDataSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> featVec <span class="token keyword">in</span> dataSet<span class="token punctuation">:</span>        <span class="token keyword">if</span> featVec<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">!=</span> value<span class="token punctuation">:</span>            reduceFeatVec <span class="token operator">=</span> featVec<span class="token punctuation">[</span><span class="token punctuation">:</span>index<span class="token punctuation">]</span>  <span class="token comment"># 删除这一维特征</span>            reduceFeatVec<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>featVec<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            retDataSet<span class="token punctuation">.</span>append<span class="token punctuation">(</span>reduceFeatVec<span class="token punctuation">)</span>    <span class="token keyword">return</span> retDataSet<span class="token keyword">def</span> <span class="token function">ChooseBestFeature</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">:</span>    numFeatures <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>    bestGiniIndex <span class="token operator">=</span> <span class="token number">1000000.0</span>    bestSplictValue <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    bestFeature <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token comment"># 计算Gini指数</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numFeatures<span class="token punctuation">)</span><span class="token punctuation">:</span>        featList <span class="token operator">=</span> <span class="token punctuation">[</span>example<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataSet<span class="token punctuation">]</span>               uniqueVals <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>featList<span class="token punctuation">)</span>        bestGiniCut <span class="token operator">=</span> <span class="token number">1000000.0</span>        bestGiniCutValue <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>        Gini_value <span class="token operator">=</span><span class="token number">0.0</span>                <span class="token keyword">for</span> value <span class="token keyword">in</span> uniqueVals<span class="token punctuation">:</span>                        subDataSet <span class="token operator">=</span> SubDataset<span class="token punctuation">(</span>dataSet<span class="token punctuation">,</span>i<span class="token punctuation">,</span>value<span class="token punctuation">)</span>            prob <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>subDataSet<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">)</span>            Gini_value <span class="token operator">=</span> prob <span class="token operator">*</span> calcGini<span class="token punctuation">(</span>subDataSet<span class="token punctuation">)</span>                        otherDataSet <span class="token operator">=</span> splitOtherDataSetByValue<span class="token punctuation">(</span>dataSet<span class="token punctuation">,</span>i<span class="token punctuation">,</span>value<span class="token punctuation">)</span>            prob <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>otherDataSet<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>dataSet<span class="token punctuation">)</span><span class="token punctuation">)</span>            Gini_value <span class="token operator">=</span> Gini_value <span class="token operator">+</span> prob <span class="token operator">*</span> calcGini<span class="token punctuation">(</span>otherDataSet<span class="token punctuation">)</span>                       <span class="token keyword">if</span> Gini_value <span class="token operator">&lt;</span> bestGiniCut<span class="token punctuation">:</span>                bestGiniCut <span class="token operator">=</span> Gini_value                bestGiniCutValue <span class="token operator">=</span> value                GiniIndex <span class="token operator">=</span> bestGiniCut        <span class="token keyword">if</span> GiniIndex <span class="token operator">&lt;</span> bestGiniIndex<span class="token punctuation">:</span>            bestGiniIndex <span class="token operator">=</span> GiniIndex            bestSplictValue <span class="token operator">=</span> bestGiniCutValue            bestFeature <span class="token operator">=</span> i            <span class="token comment">#print(bestFeature,bestSplictValue)</span>        <span class="token keyword">return</span> bestFeature<span class="token keyword">def</span> <span class="token function">TreeGenerate</span><span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>feature<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#通过递归调用创建决策树</span>    label_list<span class="token operator">=</span><span class="token punctuation">[</span>example<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">]</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>label_list<span class="token punctuation">.</span>count<span class="token punctuation">(</span>label_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token builtin">len</span><span class="token punctuation">(</span>label_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#设置递归结束条件，类别中所有的标签都相同时，递归结束，返回一个叶节点</span>        <span class="token keyword">return</span> label_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>      best_index<span class="token operator">=</span>ChooseBestFeature<span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>    best_feature<span class="token operator">=</span>feature<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span>    decisionTree<span class="token operator">=</span><span class="token punctuation">&#123;</span>best_feature<span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">del</span><span class="token punctuation">(</span>feature<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span><span class="token punctuation">)</span>    values_best_feature<span class="token operator">=</span><span class="token punctuation">[</span>example<span class="token punctuation">[</span>best_index<span class="token punctuation">]</span> <span class="token keyword">for</span> example <span class="token keyword">in</span> dataset<span class="token punctuation">]</span>    dict_value<span class="token operator">=</span><span class="token builtin">set</span><span class="token punctuation">(</span>values_best_feature<span class="token punctuation">)</span>    <span class="token keyword">for</span> value <span class="token keyword">in</span> dict_value<span class="token punctuation">:</span>        new_feature<span class="token operator">=</span>feature<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>        decisionTree<span class="token punctuation">[</span>best_feature<span class="token punctuation">]</span><span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">=</span>TreeGenerate<span class="token punctuation">(</span>SubDataset<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>best_index<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>new_feature<span class="token punctuation">)</span><span class="token comment">#递归调用自身不断生成子树</span>            <span class="token keyword">return</span> decisionTree<span class="token keyword">def</span> <span class="token function">GenerateDataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'青年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'中年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'是'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'非常好'</span><span class="token punctuation">,</span> <span class="token string">'同意'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>               <span class="token punctuation">[</span><span class="token string">'老年'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'一般般'</span><span class="token punctuation">,</span> <span class="token string">'拒绝'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    features <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'有工作'</span><span class="token punctuation">,</span> <span class="token string">'有房子'</span><span class="token punctuation">,</span> <span class="token string">'信贷情况'</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> dataset<span class="token punctuation">,</span> features<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>    dataset<span class="token punctuation">,</span>feature<span class="token operator">=</span>GenerateDataset<span class="token punctuation">(</span><span class="token punctuation">)</span>    decision_tree<span class="token operator">=</span>TreeGenerate<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>feature<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>decision_tree<span class="token punctuation">)</span>    <span class="token comment"># 定义文本框和箭头格式</span>    decisionNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"round4"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#3366FF'</span><span class="token punctuation">)</span>  <span class="token comment">#定义判断结点形态</span>    leafNode <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">"circle"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#FF6633'</span><span class="token punctuation">)</span>  <span class="token comment">#定义叶结点形态</span>    arrow_args <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">"&lt;-"</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span>  <span class="token comment">#定义箭头</span>    mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>  <span class="token comment"># 指定默认字体</span>    mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># 解决保存图像时负号'-'显示为方块的问题</span>    createPlot<span class="token punctuation">(</span>decision_tree<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a>第六章</h2><h3 id="第一题-1"><a href="#第一题-1" class="headerlink" title="第一题"></a>第一题</h3><ul><li>Model1 <script type="math/tex; mode=display">TP=300,FN=80 ,TN=500 ,FP=60</script><script type="math/tex; mode=display">Acurracy=\frac{TP+TN}{TP+FN+TN+FP}=\frac{300+500}{300+80+500+60}=0.851</script><script type="math/tex; mode=display">Cost=300\times(-1)+80\times100+500\times0+60\times5=8000</script><script type="math/tex; mode=display">Recall=\frac{TP}{TP+FN}=\frac{300}{300+80}=0.789</script></li><li>Model2<script type="math/tex; mode=display">TP=500,FN=90,TN=400,FP=10</script><script type="math/tex; mode=display">Acurracy=\frac{TP+TN}{TP+FN+FP+TN}=\frac{500+400}{500+400+10+90}=0.9</script><script type="math/tex; mode=display">Cost=500\times(-1)+90\times100+400\times0+10\times5=8550</script><script type="math/tex; mode=display">Recall=\frac{TP}{TP+FN}=\frac{500}{500+90}=0.847</script></li></ul><h3 id="第二题-1"><a href="#第二题-1" class="headerlink" title="第二题"></a>第二题</h3><ul><li>1、当阈值增大时，样本中实际为正值的样本的个数不变，但是由于阈值的提高，可能导致一部分正例可能被误判为负例，即$TP+FN$的值不变，而$TP$的值可能变小，$Recall=\frac{TP}{TP+FN}$，所以，recall的值将可能不变或变小。</li><li>2、当阈值减小时，样本中实际为正值的样本的个数不变，但是由于阈值的减小，可能导致一部分本来被误判的正例被正确的判为正例，即$TP+FN$的值不变，而$TP$的值可能变大，$Recall=\frac{TP}{TP+FN}$，所以，recall的值将可能不变或变大。</li></ul><h3 id="第三题-1"><a href="#第三题-1" class="headerlink" title="第三题"></a>第三题</h3><p>ROC曲线即受试者工作特征曲线，其纵轴为TPR(True Positive Rate)，横轴为FPR(False Positive Rate)：</p><script type="math/tex; mode=display">TPR=\frac{TP}{TP+FN}</script><script type="math/tex; mode=display">FPR=\frac{FP}{FP+TN}</script><p>在ROC曲线中的每一个点都代表了一个分类器，而这个点的横纵坐标代表了这个分类器的性能。改变分类器的阈值，分类器所代表的点也在ROC曲线上移动。<br>ROC曲线的四个顶点$(0,0),(0,1),(1,0),(0,0)$；每个点都有特殊的含义：</p><ul><li>$(0,0)$点：即$FPR=TPR=0$，即$FP=TP=0$，可以发现该分类器预测所有的样本都为负样本;</li><li>$(0,1)$点：即$FPR=0,TPR=1$，即$TP=TP+FN，FN=FP=0$，且该分类器全部判断正确，是一种理想的分类器；</li><li>$(1,0)$点：即$FPR=1,TPR=0$，即$FP=FP+TN,TP=TN=0$，该分类器是最糟糕的分类器，所有的预测都是错误的；</li><li>$(1,1)$点：即$FPR=TPR=1$，$TN=FN=0$，可以发现，该分类器判断所有的样本都是正样本。</li></ul><h3 id="第四题-1"><a href="#第四题-1" class="headerlink" title="第四题"></a>第四题</h3><p>$M_1$模型在大小为50的集合上进行测试，错误率$e_1=0.13$;<br>$M_2$模型在大小为4500的集合上进行测试，错误率$e_2=0.28$;<br>当测试集足够大时，可认为：</p><script type="math/tex; mode=display">e_1 \sim N(\mu_1, \sigma_1^2)</script><script type="math/tex; mode=display">e_2 \sim N(\mu_2, \sigma_2^2)</script><p>为了比较两个模型的性能是否有显著的统计学上的差异，令$d=e_1-e_2$，因为$e_1\sim N,e_2\sim N$,所以，$d\sim N(d_t,\sigma_t)$,由正态分布的性质：</p><script type="math/tex; mode=display">\sigma_t^2=\sigma_1^2+\sigma_2^2\approx\hat{\sigma_1^2}+\hat{\sigma_2^2}=\frac{e_1(1-e_1)}{n_1}+\frac{e_2(1-e_2)}{n_2}</script><script type="math/tex; mode=display">d_t=d\pm Z_{\frac{\alpha}{2}}\hat{\sigma_t}</script><script type="math/tex; mode=display">d=\lvert e_2-e_1 \rvert=0.28-0.13=0.15</script><script type="math/tex; mode=display">\hat{\sigma_d}=\frac{0.13(1-0.13)}{50}+\frac{0.28(1-0.28)}{4500}=0.0023</script><p>当置信水平为0.95时，$Z_\frac{\alpha}{2}=1.96$:</p><script type="math/tex; mode=display">d_t=0.15\pm 1.96\times \sqrt{0.0023}=0.15\pm 0.094</script><p>区间中不包含0，认为两者之间有差距，模型$M_1$的性能优于模型$M_2$的性能。</p><h3 id="第五题-1"><a href="#第五题-1" class="headerlink" title="第五题"></a>第五题</h3><p>在机器学习建模过程中，通行的做法通常是将数据分为训练集和测试集。测试集是与训练独立的数据，完全不参与训练，用于最终模型的评估。在训练过程中，经常会出现过拟合的问题，就是模型可以很好的匹配训练数据，却不能很好在预测训练集外的数据。如果此时就使用测试数据来调整模型参数，就相当于在训练时已知部分测试数据的信息，会影响最终评估结果的准确性。通常的做法是在训练数据再中分出一部分做为验证(Validation)数据，用来评估模型的训练效果。</p><p>验证数据取自训练数据，但不参与训练，这样可以相对客观的评估模型对于训练集之外数据的匹配程度。模型在验证数据中的评估常用的是交叉验证，又称循环验证。它将原始数据分成K组(K-Fold)，将每个子集数据分别做一次验证集，其余的K-1组子集数据作为训练集，这样会得到K个模型。这K个模型分别在验证集中评估结果，最后的误差MSE(Mean Squared Error)加和平均就得到交叉验证误差。交叉验证有效利用了有限的数据，并且评估结果能够尽可能接近模型在测试集上的表现，可以做为模型优化的指标使用。<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> KFold<span class="token keyword">import</span> random<span class="token comment">#随机生成一百个(-20,20)的数字</span>num<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    num<span class="token punctuation">.</span>append<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#print(num)</span><span class="token comment">#使用k-fold方法对数据集进行划分</span>num<span class="token operator">=</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>num<span class="token punctuation">)</span>kf<span class="token operator">=</span>KFold<span class="token punctuation">(</span>n_splits<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token keyword">for</span> train<span class="token punctuation">,</span>test <span class="token keyword">in</span> kf<span class="token punctuation">.</span>split<span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>    num_train<span class="token punctuation">,</span>num_test<span class="token operator">=</span>num<span class="token punctuation">[</span>train<span class="token punctuation">]</span><span class="token punctuation">,</span>num<span class="token punctuation">[</span>test<span class="token punctuation">]</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"训练集为："</span><span class="token punctuation">,</span>num_train<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"验证集为："</span><span class="token punctuation">,</span>num_test<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> 日常技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown基础语法练习</title>
      <link href="/2021/10/21/markdown-prictice/"/>
      <url>/2021/10/21/markdown-prictice/</url>
      
        <content type="html"><![CDATA[<p>使用vscode进行markdown文件编写，在vscode中有丰富的插件可以使用，推荐使用markdown preview插件，可同时预览.md文件的效果。</p><h1 id="标题练习"><a href="#标题练习" class="headerlink" title="标题练习"></a>标题练习</h1><h1 id="主标题"><a href="#主标题" class="headerlink" title="主标题"></a>主标题</h1><p>语法：主标题文字 空行 ====</p><h2 id="副标题"><a href="#副标题" class="headerlink" title="副标题"></a>副标题</h2><p>语法：副标题文字 空行 ——</p><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><p>语法： #（有几个#号就是几级标题）标题文字</p><h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><p>语法： TAGS/标签：内容</p><p>标签: 练习 markdown语法</p><h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p>语法: 在段落中填写 [TOC] （toc小写也可以）以显示各标题为结构的目录（大纲）导航。</p><p>[toc]</p><h1 id="斜体，粗体，删除线，分栏线"><a href="#斜体，粗体，删除线，分栏线" class="headerlink" title="斜体，粗体，删除线，分栏线"></a>斜体，粗体，删除线，分栏线</h1><h1 id="粗体"><a href="#粗体" class="headerlink" title="粗体"></a>粗体</h1><p>语法： 在文字两端加双下底线或双星号<br><strong>粗体文字示范</strong></p><h1 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h1><p>语法： 在文字两端加单下底线或单星号<br><em>斜体文字示范</em></p><h1 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h1><p>语法： 在文字两端加双波浪号<br><del>删除线示范</del></p><h1 id="分栏线"><a href="#分栏线" class="headerlink" title="分栏线"></a>分栏线</h1><p>语法： 在空白行下方添加三条—-横线</p><hr>]]></content>
      
      
      <categories>
          
          <category> 日常技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>祝我自己生日快乐/博客开张纪念</title>
      <link href="/2021/10/21/happybirthday/"/>
      <url>/2021/10/21/happybirthday/</url>
      
        <content type="html"><![CDATA[<div><iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/2R5iTxkCln6NLTw6l0kjWw?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div><p>21岁了。  </p><p>今天就是21岁的第一天。很难想象之后的日子就是朝着三十岁大步流星头也不回的猛冲。彷佛还在去年生日的第一天，还在考研的压力下苦苦的与失眠和蚊子作斗争。寒来暑往，四序迁流。彷佛真的就是在弹指一挥间。  </p><p>从20岁到21岁，从南京到西安，从本科生到研究生，也算是生命中很重要的转折之一了吧。前段时间在网上查资料，看了很多大佬的技术博客都放在自己的个人博客里边。后来就稍微关注了一下这方面的技术。发现搭建一个个人主页的成本似乎并不是很高，需要的入门技术也不是很复杂。于是，就买了自己的域名，使用git pages+hexo的技术方案初步搭建了自己的主页，算是给自己的生日礼物吧。</p><p>这个主页内容用了很短的时间来折腾，大多数东西都直接采用了matery主题的框架，还有很多功能目前没有实现。以后会继续折腾，受制于个人审美能力的原因，应该也是在matery或者其他主题的框架下继续魔改吧。个人博客以后主要会用来记录自己的技术学习笔记，也会有一些个人生活分享。</p><p>你我皆凡人，生在人世间。终日奔波苦，一刻不得闲。没有人是世界的中心。平凡的生活，也有被记录下来的价值。记录自己的生活，包括技术生活和日常生活，给自己一个从旁观者的角度来看自己的生活的机会，这就是这个博客最大的意义，也是给自己最好的生日礼物。</p>]]></content>
      
      
      <categories>
          
          <category> 日日谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> normaldays </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
